function ConduitCalculator() {
    const [e, t] = useState(4),
        [s, a] = useState(0.26),
        [r, l] = useState("in"),
        [i, n] = useState(null),
        [o, d] = useState(null),
        [c, m] = useState(null),
        [x, u] = useState("single"),
        [h, p] = useState(!1),
        g = [
            { type: "Cat5e UTP", category: "Data", diameter: 0.2, nec: "NEC 800" },
            { type: "Cat5e STP", category: "Data", diameter: 0.24, nec: "NEC 800" },
            { type: "Cat6 UTP", category: "Data", diameter: 0.25, nec: "NEC 800" },
            { type: "Cat6 STP", category: "Data", diameter: 0.28, nec: "NEC 800" },
            { type: "Cat6A UTP", category: "Data", diameter: 0.3, nec: "NEC 800" },
            { type: "Cat6A STP", category: "Data", diameter: 0.35, nec: "NEC 800" },
            { type: "RG59", category: "Coax", diameter: 0.24, nec: "NEC 820" },
            { type: "RG6", category: "Coax", diameter: 0.27, nec: "NEC 820" },
            { type: "RG6 Quad Shield", category: "Coax", diameter: 0.3, nec: "NEC 820" },
            { type: "RG11", category: "Coax", diameter: 0.41, nec: "NEC 820" },
            { type: "RG58", category: "Coax", diameter: 0.2, nec: "NEC 820" },
            { type: "HDMI Standard", category: "AV", diameter: 0.28, nec: "AVIXA" },
            { type: "HDMI Premium", category: "AV", diameter: 0.32, nec: "AVIXA" },
            { type: "HDMI Active Optical", category: "AV", diameter: 0.2, nec: "AVIXA" },
            { type: "DisplayPort", category: "AV", diameter: 0.28, nec: "AVIXA" },
            { type: "DVI Single Link", category: "AV", diameter: 0.3, nec: "AVIXA" },
            { type: "DVI Dual Link", category: "AV", diameter: 0.35, nec: "AVIXA" },
            { type: "VGA/HD15", category: "AV", diameter: 0.3, nec: "AVIXA" },
            { type: "SDI/HD-SDI", category: "AV", diameter: 0.28, nec: "AVIXA" },
            { type: "12G-SDI", category: "AV", diameter: 0.3, nec: "AVIXA" },
            { type: "USB 2.0", category: "AV", diameter: 0.2, nec: "AVIXA" },
            { type: "USB 3.0", category: "AV", diameter: 0.24, nec: "AVIXA" },
            { type: "USB-C", category: "AV", diameter: 0.22, nec: "AVIXA" },
            { type: "XLR Microphone", category: "Audio", diameter: 0.24, nec: "AVIXA" },
            { type: "Speaker 18AWG", category: "Audio", diameter: 0.18, nec: "NEC 725" },
            { type: "Speaker 16AWG", category: "Audio", diameter: 0.22, nec: "NEC 725" },
            { type: "Speaker 14AWG", category: "Audio", diameter: 0.26, nec: "NEC 725" },
            { type: "Speaker 12AWG", category: "Audio", diameter: 0.32, nec: "NEC 725" },
            { type: "Dante/AES67 (Cat6)", category: "Audio", diameter: 0.25, nec: "AES67" },
            { type: "Fiber Simplex", category: "Fiber", diameter: 0.1, nec: "NEC 770" },
            { type: "Fiber Duplex", category: "Fiber", diameter: 0.12, nec: "NEC 770" },
            { type: "Fiber 6-Strand", category: "Fiber", diameter: 0.2, nec: "NEC 770" },
            { type: "Fiber 12-Strand", category: "Fiber", diameter: 0.28, nec: "NEC 770" },
            { type: "Fiber 24-Strand", category: "Fiber", diameter: 0.35, nec: "NEC 770" },
            { type: "RS-232", category: "Control", diameter: 0.2, nec: "NEC 725" },
            { type: "RS-485", category: "Control", diameter: 0.22, nec: "NEC 725" },
            { type: "DMX 3-pin", category: "Control", diameter: 0.24, nec: "NEC 725" },
            { type: "DMX 5-pin", category: "Control", diameter: 0.26, nec: "NEC 725" },
            { type: "CEC/IR Control", category: "Control", diameter: 0.14, nec: "NEC 725" },
            { type: "12V DC 18AWG", category: "Power", diameter: 0.18, nec: "NEC 725" },
            { type: "24V DC 16AWG", category: "Power", diameter: 0.22, nec: "NEC 725" },
            { type: "48V DC 14AWG", category: "Power", diameter: 0.26, nec: "NEC 725" },
            { type: "Composite Video", category: "Legacy", diameter: 0.24, nec: "AVIXA" },
            { type: "S-Video", category: "Legacy", diameter: 0.28, nec: "AVIXA" },
            { type: "Component Video (3x)", category: "Legacy", diameter: 0.72, nec: "AVIXA" },
        ],
        [b, f] = useState([]),
        [y, j] = useState(""),
        [_, v] = useState(1),
        [N, w] = useState(0.25),
        [C, M] = useState("in"),
        [k, S] = useState(""),
        [R, P] = useState(null),
        [A, D] = useState(0),
        I = (e, t = i) => {
            if (!t || null === e || e < 0) return;
            const s = t._0xf639dc,
                a = s[e];
            if (!a) return;
            const r = t.cableQty * Math.PI * Math.pow(t.outerDiameterInches / 2, 2),
                l = Math.PI * Math.pow(a.id / 2, 2),
                n = Math.round((r / l) * 100),
                o = 1 === t.cableQty ? 53 : 2 === t.cableQty ? 31 : 40,
                d = n > o,
                c = t.cableQty >= 3 ? a.id / t.outerDiameterInches : null;
            let x = "N/A",
                u = "gray";
            t.cableQty >= 3 &&
                c &&
                (c < 2.8
                    ? ((x = "High Risk"), (u = "red"))
                    : c <= 3.2
                      ? ((x = "Borderline"), (u = "yellow"))
                      : ((x = "Low Risk"), (u = "green")));
            let h = [],
                p = "good";
            d &&
                ((p = "error"),
                h.push({
                    type: "error",
                    icon: "üö´",
                    title: "NEC Violation",
                    text: `${n}% fill exceeds NEC Chapter 9 limit of ${o}% for ${t.cableQty} cable(s). This installation would not pass inspection.`,
                }),
                h.push({
                    type: "error",
                    icon: "‚Üí",
                    title: "Required Action",
                    text: "Select a larger conduit size or reduce the number of cables.",
                })),
                t.cableQty >= 3 &&
                    ("High Risk" === x
                        ? ("error" !== p && (p = "warning"),
                          h.push({
                              type: "warning",
                              icon: "‚ö†Ô∏è",
                              title: "High JAM Risk (AVIXA)",
                              text: `JAM ratio of ${c.toFixed(2)} is below 2.8. Per AVIXA guidelines, cables are likely to jam during pulling, potentially damaging cable jackets.`,
                          }),
                          h.push({
                              type: "info",
                              icon: "üí°",
                              title: "Mitigation Options",
                              text: "Use cable pulling lubricant, pull slowly, or consider splitting into multiple conduit runs.",
                          }))
                        : "Borderline" === x
                          ? ("good" === p && (p = "caution"),
                            h.push({
                                type: "caution",
                                icon: "‚ö†Ô∏è",
                                title: "Borderline JAM Risk (AVIXA)",
                                text: `JAM ratio of ${c.toFixed(2)} is in the borderline range (2.8-3.2). Cable pulling may be difficult.`,
                            }),
                            h.push({
                                type: "info",
                                icon: "üí°",
                                title: "Recommendation",
                                text: "Use cable pulling lubricant and pull cables slowly to minimize risk.",
                            }))
                          : "Low Risk" === x &&
                            h.push({
                                type: "success",
                                icon: "‚úÖ",
                                title: "Safe JAM Ratio (AVIXA)",
                                text: `JAM ratio of ${c.toFixed(2)} exceeds 3.2. Cables should pull smoothly without jamming.`,
                            })),
                d ||
                    (n <= 0.5 * o
                        ? h.push({
                              type: "info",
                              icon: "‚ÑπÔ∏è",
                              title: "Low Fill Percentage",
                              text: `${n}% fill is well below NEC limit. This provides room for future cable additions.`,
                          })
                        : n <= 0.75 * o
                          ? h.push({
                                type: "success",
                                icon: "‚úÖ",
                                title: "Good Fill Percentage",
                                text: `${n}% fill is within recommended range. Allows for easy pulling and some expansion.`,
                            })
                          : h.push({
                                type: "caution",
                                icon: "‚ÑπÔ∏è",
                                title: "Near Maximum Fill",
                                text: `${n}% fill is close to NEC limit of ${o}%. Limited room for future cables.`,
                            }));
            const g = s.findIndex((e) => e.trade === t._0xd93e1a?.trade);
            let b = "";
            (b = e < g ? "undersized" : e > g ? "oversized" : "minimum"),
                m({
                    conduit: a,
                    conduitIndex: e,
                    fillPercent: n,
                    necLimit: o,
                    exceedsNEC: d,
                    jamRatio: c ? c.toFixed(2) : "N/A",
                    jamRisk: x,
                    jamRiskColor: u,
                    recommendations: h,
                    status: p,
                    comparison: b,
                    necMinConduit: t._0xd93e1a,
                });
        },
        E = (e) => {
            d(e), I(e);
        },
        F = (e) => {
            const t = {
                "High Risk": "bg-red-600 text-white",
                Borderline: "bg-yellow-50 dark:bg-yellow-900/200 text-white",
                "Low Risk": "bg-green-600 text-white",
                "N/A": "bg-gray-400 text-white",
            };
            return t[e] || t["N/A"];
        };
    return _jsxs("div", {
        className: "max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-8",
        children: [
            _jsxs("div", {
                className: "flex items-center justify-between mb-4 sm:mb-6",
                children: [
                    _jsx("h1", {
                        className: "text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",
                        children: "Cable Conduit Capacity Calculator",
                    }),
                    (i || b.length > 0) &&
                        _jsx("button", {
                            onClick: () => p(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: h,
                onConfirm: () => {
                    t(4),
                        a(0.26),
                        l("in"),
                        n(null),
                        d(null),
                        m(null),
                        u("single"),
                        f([]),
                        j(""),
                        v(1),
                        w(0.25),
                        M("in"),
                        S(""),
                        P(null),
                        D(0),
                        p(!1);
                },
                onCancel: () => p(!1),
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Determines the correct EMT conduit size for your cable runs based on NEC Chapter 9 fill requirements. Enter the number of cables and their outer diameter to get the recommended conduit size, fill percentage, and JAM ratio risk assessment for cable pulls with 3+ conductors.",
                    ],
                }),
            }),
            _jsxs("div", {
                className: "flex gap-2 mb-6",
                children: [
                    _jsx("button", {
                        type: "button",
                        onClick: () => u("single"),
                        className:
                            "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                            ("single" === x ? "bg-blue-600 text-white" : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                        children: "üìè Single Cable Type",
                    }),
                    _jsx("button", {
                        type: "button",
                        onClick: () => u("mixed"),
                        className:
                            "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                            ("mixed" === x ? "bg-blue-600 text-white" : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                        children: "üîÄ Multiple Cable Types",
                    }),
                ],
            }),
            "mixed" === x &&
                _jsxs("div", {
                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-6 mb-6 border",
                    children: [
                        _jsx("h2", {
                            className: "text-lg font-semibold text-gray-800 mb-4",
                            children: "Mixed Cable Configuration",
                        }),
                        _jsx("p", {
                            className: "text-sm text-gray-600 dark:text-gray-300 mb-4",
                            children: "Select cable types from the NEC/AVIXA database or add custom cables:",
                        }),
                        _jsxs("div", {
                            className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border border-blue-200 dark:border-blue-800 mb-4",
                            children: [
                                _jsx("h3", { className: "font-semibold text-blue-800 dark:text-blue-200 mb-3", children: "Add Cable" }),
                                _jsxs("div", {
                                    className: "grid sm:grid-cols-3 gap-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Cable Type",
                                                }),
                                                _jsxs("select", {
                                                    value: y,
                                                    onChange: (e) => j(e.target.value),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                    children: [
                                                        _jsx("option", { value: "", children: "-- Select Cable --" }),
                                                        _jsx("optgroup", {
                                                            label: "Data Cables",
                                                            children: g
                                                                .filter((e) => "Data" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "AV Cables",
                                                            children: g
                                                                .filter((e) => "AV" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "Audio Cables",
                                                            children: g
                                                                .filter((e) => "Audio" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "Coaxial Cables",
                                                            children: g
                                                                .filter((e) => "Coax" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "Fiber Optic",
                                                            children: g
                                                                .filter((e) => "Fiber" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "Control Cables",
                                                            children: g
                                                                .filter((e) => "Control" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("optgroup", {
                                                            label: "Power (Low Voltage)",
                                                            children: g
                                                                .filter((e) => "Power" === e.category)
                                                                .map((e) =>
                                                                    _jsxs(
                                                                        "option",
                                                                        {
                                                                            value: e.type,
                                                                            children: [
                                                                                e.type,
                                                                                " (",
                                                                                e.diameter,
                                                                                '" OD)',
                                                                            ],
                                                                        },
                                                                        e.type
                                                                    )
                                                                ),
                                                        }),
                                                        _jsx("option", {
                                                            value: "custom",
                                                            children: "üìè Custom Cable...",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Quantity",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "1",
                                                    value: _,
                                                    onChange: (e) =>
                                                        v("" === e.target.value ? "" : parseInt(e.target.value) || ""),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                }),
                                            ],
                                        }),
                                        _jsx("div", {
                                            className: "flex items-end",
                                            children: _jsx("button", {
                                                type: "button",
                                                onClick: () => {
                                                    if ("custom" === y) {
                                                        if (!k.trim())
                                                            return void alert(
                                                                "Please enter a name for the custom cable"
                                                            );
                                                        const e = "mm" === C ? N / 25.4 : N;
                                                        f([
                                                            ...b,
                                                            {
                                                                type: k || "Custom Cable",
                                                                description: `Custom (${N} ${C})`,
                                                                diameter: e,
                                                                quantity: _,
                                                            },
                                                        ]),
                                                            S("");
                                                    } else if (y) {
                                                        const e = g.find((e) => e.type === y);
                                                        if (e) {
                                                            const t = b.findIndex((t) => t.type === e.type);
                                                            if (t >= 0) {
                                                                const e = [...b];
                                                                (e[t].quantity += _), f(e);
                                                            } else
                                                                f([
                                                                    ...b,
                                                                    {
                                                                        type: e.type,
                                                                        description: `${e.category} - ${e.nec}`,
                                                                        diameter: e.diameter,
                                                                        quantity: _,
                                                                    },
                                                                ]);
                                                        }
                                                    }
                                                    v(1);
                                                },
                                                disabled: !y,
                                                className:
                                                    "w-full py-2 rounded-lg font-medium cursor-pointer " +
                                                    (y
                                                        ? "bg-blue-600 text-white hover:bg-blue-700"
                                                        : "bg-gray-300 text-gray-500 dark:text-gray-400 cursor-not-allowed"),
                                                children: "+ Add Cable",
                                            }),
                                        }),
                                    ],
                                }),
                                "custom" === y &&
                                    _jsxs("div", {
                                        className: "mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg border",
                                        children: [
                                            _jsx("h4", {
                                                className: "font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                children: "Custom Cable Details",
                                            }),
                                            _jsxs("div", {
                                                className: "grid grid-cols-3 gap-3",
                                                children: [
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Cable Name",
                                                            }),
                                                            _jsx("input", {
                                                                type: "text",
                                                                value: k,
                                                                onChange: (e) => S(e.target.value),
                                                                placeholder: "e.g., Custom Cat7",
                                                                className: "w-full px-2 py-1 text-sm border rounded dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Outer Diameter",
                                                            }),
                                                            _jsx("input", {
                                                                type: "number",
                                                                step: "0.01",
                                                                min: "0.01",
                                                                value: N,
                                                                onChange: (e) =>
                                                                    w(
                                                                        "" === e.target.value
                                                                            ? ""
                                                                            : parseFloat(e.target.value) || ""
                                                                    ),
                                                                className: "w-full px-2 py-1 text-sm border rounded dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Unit",
                                                            }),
                                                            _jsxs("select", {
                                                                value: C,
                                                                onChange: (e) => M(e.target.value),
                                                                className: "w-full px-2 py-1 text-sm border rounded dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                                children: [
                                                                    _jsx("option", { value: "in", children: "inches" }),
                                                                    _jsx("option", { value: "mm", children: "mm" }),
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                            ],
                        }),
                        b.length > 0 &&
                            _jsxs("div", {
                                className: "mb-4",
                                children: [
                                    _jsx("h3", {
                                        className: "font-semibold text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Selected Cables",
                                    }),
                                    _jsx("div", {
                                        className: "space-y-2",
                                        children: b.map((e, t) =>
                                            _jsxs(
                                                "div",
                                                {
                                                    className:
                                                        "flex items-center justify-between bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex-1",
                                                            children: [
                                                                _jsx("span", {
                                                                    className: "font-medium",
                                                                    children: e.type,
                                                                }),
                                                                _jsxs("span", {
                                                                    className: "text-gray-500 dark:text-gray-400 text-sm ml-2",
                                                                    children: ["(", e.diameter.toFixed(3), '" OD)'],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2",
                                                            children: [
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "1",
                                                                    value: e.quantity,
                                                                    onChange: (e) =>
                                                                        ((e, t) => {
                                                                            const s = [...b];
                                                                            if ("" === t || void 0 === t)
                                                                                s[e].quantity = "";
                                                                            else {
                                                                                const a = parseInt(t);
                                                                                s[e].quantity = isNaN(a) ? "" : a;
                                                                            }
                                                                            f(s);
                                                                        })(t, e.target.value),
                                                                    className:
                                                                        "w-16 px-2 py-1 text-sm border rounded text-center dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                                }),
                                                                _jsx("button", {
                                                                    type: "button",
                                                                    onClick: () => {
                                                                        return (
                                                                            (e = t), void f(b.filter((t, s) => s !== e))
                                                                        );
                                                                        var e;
                                                                    },
                                                                    className: "text-red-600 hover:text-red-800 dark:text-red-200 px-2",
                                                                    children: "‚úï",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                },
                                                t
                                            )
                                        ),
                                    }),
                                ],
                            }),
                        _jsx("button", {
                            type: "button",
                            onClick: () => {
                                if (0 === b.length) return void alert("Please add at least one cable type");
                                const e = calculateMixedConduitFill(b, "EMT");
                                P(e);
                                const t = e.conduitOptions.findIndex((e) => e.recommended);
                                D(t >= 0 ? t : 0);
                            },
                            disabled: 0 === b.length,
                            className:
                                "w-full py-3 rounded-lg font-semibold cursor-pointer " +
                                (b.length > 0
                                    ? "bg-blue-600 hover:bg-blue-700 text-white"
                                    : "bg-gray-300 text-gray-500 dark:text-gray-400 cursor-not-allowed"),
                            children: "Calculate Conduit Size",
                        }),
                    ],
                }),
            "mixed" === x &&
                R &&
                _jsxs(_Fragment, {
                    children: [
                        R.exceedsMaximum &&
                            _jsxs("div", {
                                className: "bg-red-50 dark:bg-red-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-6 mb-6 border-2 border-red-300",
                                children: [
                                    _jsxs("div", {
                                        className: "flex items-center gap-2 mb-3",
                                        children: [
                                            _jsx("span", { className: "text-2xl", children: "‚ö†Ô∏è" }),
                                            _jsx("h2", {
                                                className: "text-xl font-bold text-red-800 dark:text-red-200",
                                                children: "Exceeds Maximum Single Conduit Capacity",
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-sm text-red-700 mb-4",
                                        children:
                                            'The total cable area exceeds what can fit in a single 4" conduit per NEC Chapter 9. Multiple conduits are required.',
                                    }),
                                    R.multiConduitRecommendations &&
                                        R.multiConduitRecommendations.length > 0 &&
                                        _jsxs("div", {
                                            className: "mb-4",
                                            children: [
                                                _jsx("h3", {
                                                    className: "font-semibold text-red-800 dark:text-red-200 mb-2",
                                                    children: "üìã Multi-Conduit Recommendations:",
                                                }),
                                                _jsx("div", {
                                                    className: "grid sm:grid-cols-2 lg:grid-cols-3 gap-3",
                                                    children: R.multiConduitRecommendations.map((e, t) =>
                                                        _jsxs(
                                                            "div",
                                                            {
                                                                className:
                                                                    "p-3 rounded-lg border-2 " +
                                                                    (0 === t
                                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-400"
                                                                        : "bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"),
                                                                children: [
                                                                    0 === t &&
                                                                        _jsx("div", {
                                                                            className:
                                                                                "text-xs font-bold text-green-700 mb-1",
                                                                            children: "‚úì RECOMMENDED",
                                                                        }),
                                                                    _jsxs("div", {
                                                                        className: "text-lg font-bold text-gray-800",
                                                                        children: [
                                                                            e.conduitCount,
                                                                            "√ó ",
                                                                            e.conduitSize,
                                                                            " Conduits",
                                                                        ],
                                                                    }),
                                                                    _jsxs("div", {
                                                                        className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                                        children: [
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Cables per conduit: ~",
                                                                                    e.cablesPerConduit,
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Fill: ",
                                                                                    e.fillPercent,
                                                                                    "% ",
                                                                                    e.compliant ? "‚úì" : "‚ö†",
                                                                                ],
                                                                            }),
                                                                            e.jamRatio &&
                                                                                _jsxs("div", {
                                                                                    children: [
                                                                                        "JAM Ratio: ",
                                                                                        e.jamRatio,
                                                                                        " (",
                                                                                        e.jamStatus,
                                                                                        ")",
                                                                                    ],
                                                                                }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                    R.bestPractices &&
                                        R.bestPractices.length > 0 &&
                                        _jsxs("div", {
                                            className: "mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg",
                                            children: [
                                                _jsx("h4", {
                                                    className: "font-semibold text-gray-800 mb-2",
                                                    children: "üí° Best Practices:",
                                                }),
                                                _jsx("ul", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                    children: R.bestPractices.map((e, t) =>
                                                        _jsxs(
                                                            "li",
                                                            {
                                                                className: "flex items-start gap-2",
                                                                children: [
                                                                    _jsx("span", {
                                                                        className: "text-blue-500",
                                                                        children: "‚Ä¢",
                                                                    }),
                                                                    e,
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                ],
                            }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-6 mb-6 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4",
                                    children: R.exceedsMaximum
                                        ? "Mixed Cable Results (Exceeds Single Conduit)"
                                        : "Mixed Cable Results",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-3 gap-4 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            className: R.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-5 rounded-lg border-2 border-red-200 dark:border-red-800 text-center"
                                                : "bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border-2 border-blue-200 dark:border-blue-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300",
                                                    children: R.exceedsMaximum
                                                        ? "Largest Conduit"
                                                        : "Recommended Conduit",
                                                }),
                                                _jsx("div", {
                                                    className: R.exceedsMaximum
                                                        ? "text-3xl font-bold text-red-700"
                                                        : "text-3xl font-bold text-blue-700",
                                                    children: R.recommendedConduit.trade,
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: ["EMT - ID: ", R.recommendedConduit.id, '"'],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: R.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-5 rounded-lg border-2 border-red-200 dark:border-red-800 text-center"
                                                : "bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border-2 border-green-200 dark:border-green-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300",
                                                    children: "Actual Fill",
                                                }),
                                                _jsxs("div", {
                                                    className:
                                                        "text-3xl font-bold " +
                                                        (R.recommendedConduit.actualFillPercent <= R.fillPercentAllowed
                                                            ? "text-green-700"
                                                            : "text-red-600"),
                                                    children: [R.recommendedConduit.actualFillPercent, "%"],
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: [
                                                        R.exceedsMaximum ? "‚ùå Exceeds " : "NEC limit: ",
                                                        R.fillPercentAllowed,
                                                        "%",
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border-2 border-purple-200 dark:border-purple-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300",
                                                    children: "Total Cables",
                                                }),
                                                _jsx("div", {
                                                    className: "text-3xl font-bold text-purple-700",
                                                    children: R.totalCables,
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: [R.cableBreakdown.length, " type(s)"],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "mb-4",
                                    children: [
                                        _jsx("h3", {
                                            className: "font-semibold text-gray-700 dark:text-gray-300 mb-2",
                                            children: "Cable Breakdown",
                                        }),
                                        _jsx("div", {
                                            className: "overflow-x-auto",
                                            children: _jsxs("table", {
                                                className: "w-full text-sm",
                                                children: [
                                                    _jsx("thead", {
                                                        children: _jsxs("tr", {
                                                            className: "bg-gray-50 dark:bg-gray-900/50",
                                                            children: [
                                                                _jsx("th", {
                                                                    className: "px-3 py-2 text-left",
                                                                    children: "Type",
                                                                }),
                                                                _jsx("th", {
                                                                    className: "px-3 py-2 text-center",
                                                                    children: "Qty",
                                                                }),
                                                                _jsx("th", {
                                                                    className: "px-3 py-2 text-right",
                                                                    children: "OD (in)",
                                                                }),
                                                                _jsx("th", {
                                                                    className: "px-3 py-2 text-right",
                                                                    children: "Area (sq in)",
                                                                }),
                                                            ],
                                                        }),
                                                    }),
                                                    _jsx("tbody", {
                                                        children: R.cableBreakdown.map((e, t) =>
                                                            _jsxs(
                                                                "tr",
                                                                {
                                                                    className: "border-t",
                                                                    children: [
                                                                        _jsx("td", {
                                                                            className: "px-3 py-2 font-medium",
                                                                            children: e.type,
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "px-3 py-2 text-center",
                                                                            children: e.quantity,
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "px-3 py-2 text-right",
                                                                            children: e.diameter,
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "px-3 py-2 text-right",
                                                                            children: e.totalArea,
                                                                        }),
                                                                    ],
                                                                },
                                                                t
                                                            )
                                                        ),
                                                    }),
                                                ],
                                            }),
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        !R.exceedsMaximum &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 mb-6 border",
                                children: [
                                    _jsx("h2", {
                                        className: "text-lg sm:text-xl font-semibold text-gray-800 mb-2",
                                        children: "Adjust Conduit Size",
                                    }),
                                    _jsx("p", {
                                        className: "text-sm text-gray-600 dark:text-gray-300 mb-4",
                                        children:
                                            "Slide to explore different conduit sizes and see how they affect fill percentage and JAM risk per NEC and AVIXA standards.",
                                    }),
                                    _jsxs("div", {
                                        className: "mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className: "flex justify-between items-center mb-2",
                                                children: [
                                                    _jsxs("label", {
                                                        className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                        children: [
                                                            "Selected Conduit: ",
                                                            _jsx("span", {
                                                                className: "font-bold text-blue-600 text-lg",
                                                                children: R.conduitOptions[A]?.trade || "--",
                                                            }),
                                                        ],
                                                    }),
                                                    R.conduitOptions[A]?.trade === R.recommendedConduit.trade &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",
                                                            children: "NEC Minimum",
                                                        }),
                                                    A <
                                                        R.conduitOptions.findIndex(
                                                            (e) => e.trade === R.recommendedConduit.trade
                                                        ) &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-red-100 text-red-700 rounded",
                                                            children: "Below NEC Minimum",
                                                        }),
                                                    A >
                                                        R.conduitOptions.findIndex(
                                                            (e) => e.trade === R.recommendedConduit.trade
                                                        ) &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-green-100 text-green-700 rounded",
                                                            children: "Above NEC Minimum",
                                                        }),
                                                ],
                                            }),
                                            _jsx("input", {
                                                type: "range",
                                                min: "0",
                                                max: String(R.conduitOptions.length - 1),
                                                value: A,
                                                onChange: (e) => D(parseInt(e.target.value)),
                                                className:
                                                    "w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600",
                                            }),
                                            _jsx("div", {
                                                className:
                                                    "flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1 overflow-x-auto",
                                                children: R.conduitOptions.map((e, t) =>
                                                    _jsx(
                                                        "span",
                                                        {
                                                            className: `px-1 ${t === A ? "font-bold text-blue-600" : ""} ${R.recommendedConduit.trade === e.trade ? "text-blue-500" : ""}`,
                                                            children: e.trade,
                                                        },
                                                        t
                                                    )
                                                ),
                                            }),
                                            _jsxs("div", {
                                                className: "flex flex-wrap gap-2 mt-4",
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400 self-center",
                                                        children: "Quick Select:",
                                                    }),
                                                    R.conduitOptions
                                                        .slice(0, 6)
                                                        .map((e, t) =>
                                                            _jsxs(
                                                                "button",
                                                                {
                                                                    type: "button",
                                                                    onClick: () => D(t),
                                                                    className:
                                                                        "px-3 py-1.5 text-xs rounded border transition-colors cursor-pointer " +
                                                                        (A === t
                                                                            ? "bg-blue-600 text-white border-blue-600"
                                                                            : R.recommendedConduit.trade === e.trade
                                                                              ? "bg-blue-50 dark:bg-blue-900/20 text-blue-700 border-blue-300 hover:bg-blue-100"
                                                                              : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:bg-gray-900/50"),
                                                                    children: [
                                                                        e.trade,
                                                                        R.recommendedConduit.trade === e.trade &&
                                                                            _jsx("span", {
                                                                                className: "ml-1 text-xs",
                                                                                children: "‚òÖ",
                                                                            }),
                                                                    ],
                                                                },
                                                                t
                                                            )
                                                        ),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className:
                                            "p-4 rounded-lg border-2 " +
                                            (R.conduitOptions[A]?.compliant
                                                ? "High Risk" === R.conduitOptions[A]?.jamStatus
                                                    ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300"
                                                    : "Borderline" === R.conduitOptions[A]?.jamStatus
                                                      ? "bg-amber-50 dark:bg-amber-900/20 border-amber-300"
                                                      : "bg-green-50 dark:bg-green-900/20 border-green-300"
                                                : "bg-red-50 dark:bg-red-900/20 border-red-300"),
                                        children: [
                                            _jsxs("div", {
                                                className: "grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "text-center p-3 bg-white dark:bg-gray-800 rounded-lg border",
                                                        children: [
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                children: "Conduit",
                                                            }),
                                                            _jsx("div", {
                                                                className: "text-xl font-bold text-gray-800",
                                                                children: R.conduitOptions[A]?.trade,
                                                            }),
                                                            _jsxs("div", {
                                                                className: "text-xs text-gray-400",
                                                                children: ["ID: ", R.conduitOptions[A]?.id, '"'],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className:
                                                            "text-center p-3 rounded-lg border " +
                                                            (R.conduitOptions[A]?.compliant
                                                                ? "bg-white dark:bg-gray-800"
                                                                : "bg-red-100 border-red-300"),
                                                        children: [
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                children: "Fill %",
                                                            }),
                                                            _jsxs("div", {
                                                                className:
                                                                    "text-xl font-bold " +
                                                                    (R.conduitOptions[A]?.compliant
                                                                        ? "text-green-600"
                                                                        : "text-red-600"),
                                                                children: [R.conduitOptions[A]?.actualFillPercent, "%"],
                                                            }),
                                                            _jsxs("div", {
                                                                className: "text-xs text-gray-400",
                                                                children: ["Limit: ", R.fillPercentAllowed, "%"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-center p-3 bg-white dark:bg-gray-800 rounded-lg border",
                                                        children: [
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                children: "JAM Ratio",
                                                            }),
                                                            _jsx("div", {
                                                                className: "text-xl font-bold text-purple-600",
                                                                children:
                                                                    R.totalCables >= 3 && R.conduitOptions[A]?.jamRatio
                                                                        ? R.conduitOptions[A].jamRatio
                                                                        : "N/A",
                                                            }),
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-400",
                                                                children:
                                                                    R.totalCables >= 3
                                                                        ? "ID √∑ Avg OD"
                                                                        : "N/A (<3 cables)",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className:
                                                            "text-center p-3 rounded-lg border " +
                                                            ("High Risk" === R.conduitOptions[A]?.jamStatus
                                                                ? "bg-red-100 border-red-300"
                                                                : "Borderline" === R.conduitOptions[A]?.jamStatus
                                                                  ? "bg-yellow-100 border-yellow-300"
                                                                  : "Low Risk" === R.conduitOptions[A]?.jamStatus
                                                                    ? "bg-green-100 border-green-300"
                                                                    : "bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"),
                                                        children: [
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                children: "JAM Risk",
                                                            }),
                                                            _jsx("div", {
                                                                className:
                                                                    "text-xl font-bold " +
                                                                    ("High Risk" === R.conduitOptions[A]?.jamStatus
                                                                        ? "text-red-600"
                                                                        : "Borderline" ===
                                                                            R.conduitOptions[A]?.jamStatus
                                                                          ? "text-yellow-600"
                                                                          : "Low Risk" ===
                                                                              R.conduitOptions[A]?.jamStatus
                                                                            ? "text-green-600"
                                                                            : "text-gray-600 dark:text-gray-300"),
                                                                children: R.conduitOptions[A]?.jamStatus || "N/A",
                                                            }),
                                                            _jsx("div", {
                                                                className: "text-xs text-gray-400",
                                                                children:
                                                                    "Low Risk" === R.conduitOptions[A]?.jamStatus
                                                                        ? "> 3.2"
                                                                        : "Borderline" ===
                                                                            R.conduitOptions[A]?.jamStatus
                                                                          ? "2.8 - 3.2"
                                                                          : "High Risk" ===
                                                                              R.conduitOptions[A]?.jamStatus
                                                                            ? "< 2.8"
                                                                            : "--",
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "space-y-2",
                                                children: [
                                                    _jsx("h4", {
                                                        className: "font-semibold text-gray-700 dark:text-gray-300 text-sm",
                                                        children: "Analysis & Recommendations:",
                                                    }),
                                                    !R.conduitOptions[A]?.compliant &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-red-100 border-red-200 dark:border-red-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "‚ùå" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className: "font-semibold text-red-800 dark:text-red-200",
                                                                                children: "NEC Violation: ",
                                                                            }),
                                                                            _jsxs("span", {
                                                                                className: "text-red-700",
                                                                                children: [
                                                                                    "Fill exceeds ",
                                                                                    R.fillPercentAllowed,
                                                                                    "% limit. Select a larger conduit.",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                    R.conduitOptions[A]?.compliant &&
                                                        R.totalCables >= 3 &&
                                                        "High Risk" === R.conduitOptions[A]?.jamStatus &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-red-100 border-red-200 dark:border-red-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "‚ö†Ô∏è" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className: "font-semibold text-red-800 dark:text-red-200",
                                                                                children: "High JAM Risk (AVIXA): ",
                                                                            }),
                                                                            _jsxs("span", {
                                                                                className: "text-red-700",
                                                                                children: [
                                                                                    "JAM ratio of ",
                                                                                    R.conduitOptions[A]?.jamRatio,
                                                                                    " is below 2.8. High probability of cables jamming during pull.",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                    R.conduitOptions[A]?.compliant &&
                                                        R.totalCables >= 3 &&
                                                        "Borderline" === R.conduitOptions[A]?.jamStatus &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-yellow-100 border-yellow-200 dark:border-yellow-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "‚ö†Ô∏è" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "font-semibold text-yellow-800 dark:text-yellow-200",
                                                                                children:
                                                                                    "Borderline JAM Risk (AVIXA): ",
                                                                            }),
                                                                            _jsxs("span", {
                                                                                className: "text-yellow-700",
                                                                                children: [
                                                                                    "JAM ratio of ",
                                                                                    R.conduitOptions[A]?.jamRatio,
                                                                                    " is in the borderline range (2.8-3.2). Cable pulling may be difficult.",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                    R.conduitOptions[A]?.compliant &&
                                                        R.totalCables >= 3 &&
                                                        ("Borderline" === R.conduitOptions[A]?.jamStatus ||
                                                            "High Risk" === R.conduitOptions[A]?.jamStatus) &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-amber-100 border-amber-200 dark:border-amber-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "üí°" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "font-semibold text-amber-800 dark:text-amber-200",
                                                                                children: "Recommendation: ",
                                                                            }),
                                                                            _jsx("span", {
                                                                                className: "text-amber-700",
                                                                                children:
                                                                                    "Use cable pulling lubricant and pull cables slowly to minimize risk.",
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                    R.conduitOptions[A]?.compliant &&
                                                        R.conduitOptions[A]?.actualFillPercent >=
                                                            R.fillPercentAllowed - 5 &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "‚ÑπÔ∏è" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "font-semibold text-blue-800 dark:text-blue-200",
                                                                                children: "Near Maximum Fill: ",
                                                                            }),
                                                                            _jsxs("span", {
                                                                                className: "text-blue-700",
                                                                                children: [
                                                                                    R.conduitOptions[A]
                                                                                        ?.actualFillPercent,
                                                                                    "% fill is close to NEC limit of ",
                                                                                    R.fillPercentAllowed,
                                                                                    "%. Limited room for future cables.",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                    R.conduitOptions[A]?.compliant &&
                                                        (R.totalCables < 3 ||
                                                            "Low Risk" === R.conduitOptions[A]?.jamStatus) &&
                                                        R.conduitOptions[A]?.actualFillPercent <
                                                            R.fillPercentAllowed - 5 &&
                                                        _jsx("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-sm bg-green-100 border-green-200 dark:border-green-800",
                                                            children: _jsxs("div", {
                                                                className: "flex gap-2",
                                                                children: [
                                                                    _jsx("span", { children: "‚úÖ" }),
                                                                    _jsxs("div", {
                                                                        children: [
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "font-semibold text-green-800 dark:text-green-200",
                                                                                children: "Good Selection: ",
                                                                            }),
                                                                            _jsx("span", {
                                                                                className: "text-green-700",
                                                                                children:
                                                                                    "This conduit size meets NEC requirements with comfortable margin and low JAM risk.",
                                                                            }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                        !R.exceedsMaximum &&
                            R.totalCables >= 3 &&
                            "Low Risk" !== R.conduitOptions[A]?.jamStatus &&
                            _jsxs("div", {
                                className: "bg-amber-50 dark:bg-amber-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 mb-6 border border-amber-300",
                                children: [
                                    _jsxs("h2", {
                                        className:
                                            "text-lg sm:text-xl font-semibold text-amber-800 dark:text-amber-200 mb-4 flex items-center gap-2",
                                        children: [_jsx("span", { children: "‚ö†Ô∏è" }), " JAM Risk - Recommendations"],
                                    }),
                                    (() => {
                                        const e = R.conduitOptions.find(
                                            (e) => "Low Risk" === e.jamStatus && e.compliant
                                        );
                                        return (
                                            e &&
                                            _jsxs("div", {
                                                className:
                                                    "mb-4 p-3 sm:p-4 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-800",
                                                children: [
                                                    _jsx("h3", {
                                                        className: "font-semibold text-amber-700 mb-2",
                                                        children: "Option 1: Use Larger Conduit",
                                                    }),
                                                    _jsxs("p", {
                                                        className: "text-sm text-amber-800 dark:text-amber-200 mb-2",
                                                        children: [
                                                            "Upgrade to ",
                                                            _jsx("strong", { children: e.trade }),
                                                            " EMT (ID: ",
                                                            e.id,
                                                            '") for a safe JAM ratio of ',
                                                            _jsx("strong", { children: e.jamRatio }),
                                                            ".",
                                                        ],
                                                    }),
                                                    _jsx("span", {
                                                        className:
                                                            "inline-block px-2 py-1 text-xs rounded bg-green-600 text-white",
                                                        children: "Low Risk - Safe to Pull",
                                                    }),
                                                ],
                                            })
                                        );
                                    })(),
                                ],
                            }),
                        _jsxs("div", {
                            className: "bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 sm:p-5 mb-6 border border-blue-200 dark:border-blue-800",
                            children: [
                                _jsx("h2", {
                                    className: "text-base sm:text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2 sm:mb-3",
                                    children: "AVIXA JAM Ratio Standard",
                                }),
                                _jsxs("p", {
                                    className: "text-xs sm:text-sm text-blue-700 mb-3",
                                    children: [
                                        _jsx("strong", { children: "JAM (Jamming)" }),
                                        " occurs when three or more cables wedge together during pulling. The JAM ratio predicts this probability using the average cable diameter.",
                                    ],
                                }),
                                _jsx("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-800 mb-3",
                                    children: _jsxs("p", {
                                        className: "text-xs sm:text-sm font-mono text-blue-800 dark:text-blue-200 mb-1",
                                        children: [
                                            _jsx("strong", { children: "Formula:" }),
                                            " JAM = Conduit ID √∑ Average Cable OD",
                                        ],
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "grid grid-cols-3 gap-2 sm:gap-3 text-xs",
                                    children: [
                                        _jsxs("div", {
                                            className: "bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-red-700",
                                                    children: "JAM < 2.8",
                                                }),
                                                _jsx("div", { className: "text-red-600", children: "High Risk" }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-yellow-700",
                                                    children: "JAM 2.8-3.2",
                                                }),
                                                _jsx("div", { className: "text-yellow-600", children: "Borderline" }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-green-700",
                                                    children: "JAM > 3.2",
                                                }),
                                                _jsx("div", { className: "text-green-600", children: "Low Risk" }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                    ],
                }),
            "single" === x &&
                _jsxs("div", {
                    className: "bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 sm:p-5 mb-6 border border-blue-200 dark:border-blue-800",
                    children: [
                        _jsx("h2", {
                            className: "text-base sm:text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2 sm:mb-3",
                            children: "AVIXA JAM Ratio Standard",
                        }),
                        _jsxs("p", {
                            className: "text-xs sm:text-sm text-blue-700 mb-3",
                            children: [
                                _jsx("strong", { children: "JAM (Jamming)" }),
                                " occurs when three or more cables wedge together during pulling. The JAM ratio predicts this probability and is automatically calculated based on the recommended conduit size.",
                            ],
                        }),
                        _jsx("div", {
                            className: "bg-white dark:bg-gray-800 rounded-lg p-3 border border-blue-200 dark:border-blue-800 mb-3",
                            children: _jsxs("p", {
                                className: "text-xs sm:text-sm font-mono text-blue-800 dark:text-blue-200 mb-1",
                                children: [_jsx("strong", { children: "Formula:" }), " JAM = Conduit ID √∑ Cable OD"],
                            }),
                        }),
                        _jsxs("div", {
                            className: "grid grid-cols-3 gap-2 sm:gap-3 text-xs",
                            children: [
                                _jsxs("div", {
                                    className: "bg-red-50 dark:bg-red-900/20 p-2 rounded border border-red-200 dark:border-red-800 text-center",
                                    children: [
                                        _jsx("div", { className: "font-bold text-red-700", children: "JAM < 2.8" }),
                                        _jsx("div", { className: "text-red-600", children: "High Risk" }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-yellow-50 dark:bg-yellow-900/20 p-2 rounded border border-yellow-200 dark:border-yellow-800 text-center",
                                    children: [
                                        _jsx("div", { className: "font-bold text-yellow-700", children: "2.8 - 3.2" }),
                                        _jsx("div", { className: "text-yellow-600", children: "Borderline" }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-green-50 dark:bg-green-900/20 p-2 rounded border border-green-200 dark:border-green-800 text-center",
                                    children: [
                                        _jsx("div", { className: "font-bold text-green-700", children: "JAM > 3.2" }),
                                        _jsx("div", { className: "text-green-600", children: "Low Risk" }),
                                    ],
                                }),
                            ],
                        }),
                    ],
                }),
            "single" === x &&
                _jsxs("div", {
                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-8 mb-6 sm:mb-8 border",
                    children: [
                        _jsx("h2", {
                            className: "text-lg sm:text-xl font-semibold text-gray-800 mb-4",
                            children: "Cable Configuration",
                        }),
                        _jsxs("div", {
                            className: "grid sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",
                            children: [
                                _jsxs("div", {
                                    children: [
                                        _jsx("label", {
                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                            children: "Number of Cables",
                                        }),
                                        _jsxs("div", {
                                            className: "flex gap-2 mb-2",
                                            children: [
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "1",
                                                    max: "100",
                                                    value: e,
                                                    onChange: (e) => {
                                                        if ("" === e.target.value) return void t("");
                                                        const s = parseInt(e.target.value);
                                                        isNaN(s) || t(Math.min(100, s));
                                                    },
                                                    className:
                                                        "w-20 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 text-center font-bold text-blue-600",
                                                }),
                                                _jsx("span", {
                                                    className: "text-sm text-gray-500 dark:text-gray-400 self-center",
                                                    children: "cables",
                                                }),
                                            ],
                                        }),
                                        _jsx("input", {
                                            type: "range",
                                            min: "1",
                                            max: "24",
                                            value: Math.min(e, 24),
                                            onChange: (e) => t("" === e.target.value ? "" : parseFloat(e.target.value)),
                                            className:
                                                "w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600",
                                        }),
                                        _jsxs("div", {
                                            className: "flex justify-between text-xs text-gray-400 mt-1",
                                            children: [
                                                _jsx("span", { children: "1" }),
                                                _jsx("span", { children: "6" }),
                                                _jsx("span", { children: "12" }),
                                                _jsx("span", { children: "18" }),
                                                _jsx("span", { children: "24" }),
                                            ],
                                        }),
                                        _jsx("p", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: "Use slider for quick select or type any number (1-100)",
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    children: [
                                        _jsx("label", {
                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                            children: "Cable Outer Diameter",
                                        }),
                                        _jsxs("div", {
                                            className: "flex gap-2",
                                            children: [
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.01",
                                                    value: s,
                                                    onChange: (e) =>
                                                        a("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "flex-1 px-3 sm:px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",
                                                }),
                                                _jsxs("select", {
                                                    value: r,
                                                    onChange: (e) => {
                                                        return (t = e.target.value), l(t), void M(t);
                                                        var t;
                                                    },
                                                    className:
                                                        "px-2 sm:px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-gray-50 dark:bg-gray-900/50",
                                                    children: [
                                                        _jsx("option", { value: "in", children: "in" }),
                                                        _jsx("option", { value: "mm", children: "mm" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsx("p", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: "Total outer diameter including jacket",
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "sm:col-span-2 lg:col-span-1",
                                    children: [
                                        _jsx("label", {
                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                            children: "Common Cable Sizes",
                                        }),
                                        _jsx("div", {
                                            className: "flex flex-wrap gap-1 sm:gap-2",
                                            children: ("in" === r
                                                ? [
                                                      { label: "Cat6", od: 0.25 },
                                                      { label: "Cat6A", od: 0.32 },
                                                      { label: "RG6", od: 0.27 },
                                                      { label: "RG59", od: 0.24 },
                                                      { label: "12/2 Romex", od: 0.45 },
                                                  ]
                                                : [
                                                      { label: "Cat6", od: 6.35 },
                                                      { label: "Cat6A", od: 8.13 },
                                                      { label: "RG6", od: 6.86 },
                                                      { label: "RG59", od: 6.1 },
                                                      { label: "12/2 NM", od: 11.4 },
                                                  ]
                                            ).map((e) =>
                                                _jsx(
                                                    "button",
                                                    {
                                                        onClick: () => a(e.od),
                                                        className:
                                                            "px-2 py-1 text-xs rounded border transition-colors cursor-pointer " +
                                                            (Math.abs(s - e.od) < 0.01
                                                                ? "bg-blue-600 text-white border-blue-600"
                                                                : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:bg-blue-900/20"),
                                                        children: e.label,
                                                    },
                                                    e.label
                                                )
                                            ),
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsx("button", {
                            type: "button",
                            onClick: () => {
                                const t = _0xb9cb50(e, s, r);
                                if ((n(t), t._0xd93e1a)) {
                                    const e = t._0xf639dc.findIndex((e) => e.trade === t._0xd93e1a.trade);
                                    d(e), I(e, t);
                                } else d(null), m(null);
                            },
                            className:
                                "w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors cursor-pointer",
                            children: "Calculate Conduit Size & JAM Ratio",
                        }),
                    ],
                }),
            "single" === x &&
                i &&
                _jsxs("div", {
                    className: "space-y-6",
                    children: [
                        i.exceedsMaximum &&
                            _jsxs("div", {
                                className: "bg-red-50 dark:bg-red-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border-2 border-red-300",
                                children: [
                                    _jsxs("div", {
                                        className: "flex items-center gap-2 mb-3",
                                        children: [
                                            _jsx("span", { className: "text-2xl", children: "‚ö†Ô∏è" }),
                                            _jsx("h2", {
                                                className: "text-lg sm:text-xl font-bold text-red-800 dark:text-red-200",
                                                children: "Exceeds Maximum Single Conduit Capacity",
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-sm text-red-700 mb-4",
                                        children:
                                            'The cable quantity exceeds what can fit in a single 4" conduit per NEC Chapter 9. Multiple conduits are required.',
                                    }),
                                    i.exceedsMultiConduitOptions &&
                                        i.exceedsMultiConduitOptions.length > 0 &&
                                        _jsxs("div", {
                                            className: "mb-4",
                                            children: [
                                                _jsx("h3", {
                                                    className: "font-semibold text-red-800 dark:text-red-200 mb-2",
                                                    children: "üìã Multi-Conduit Recommendations:",
                                                }),
                                                _jsx("div", {
                                                    className: "grid sm:grid-cols-2 lg:grid-cols-3 gap-3",
                                                    children: i.exceedsMultiConduitOptions.map((e, t) =>
                                                        _jsxs(
                                                            "div",
                                                            {
                                                                className:
                                                                    "p-3 rounded-lg border-2 " +
                                                                    (0 === t
                                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-400"
                                                                        : "bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700"),
                                                                children: [
                                                                    0 === t &&
                                                                        _jsx("div", {
                                                                            className:
                                                                                "text-xs font-bold text-green-700 mb-1",
                                                                            children: "‚úì RECOMMENDED",
                                                                        }),
                                                                    _jsxs("div", {
                                                                        className: "text-lg font-bold text-gray-800",
                                                                        children: [
                                                                            e.count,
                                                                            "√ó ",
                                                                            e.conduit.trade,
                                                                            " Conduits",
                                                                        ],
                                                                    }),
                                                                    _jsxs("div", {
                                                                        className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                                        children: [
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Cables per conduit: ",
                                                                                    e.cablesEach,
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Fill: ",
                                                                                    e.fillPercent,
                                                                                    "% ",
                                                                                    e.compliant ? "‚úì" : "‚ö†",
                                                                                ],
                                                                            }),
                                                                            e.jamRatio &&
                                                                                _jsxs("div", {
                                                                                    children: [
                                                                                        "JAM Ratio: ",
                                                                                        e.jamRatio,
                                                                                        " (",
                                                                                        e.jamRisk,
                                                                                        ")",
                                                                                    ],
                                                                                }),
                                                                        ],
                                                                    }),
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                    i.bestPractices &&
                                        i.bestPractices.length > 0 &&
                                        _jsxs("div", {
                                            className: "mt-4 p-3 bg-white dark:bg-gray-800 rounded-lg",
                                            children: [
                                                _jsx("h4", {
                                                    className: "font-semibold text-gray-800 mb-2",
                                                    children: "üí° Best Practices:",
                                                }),
                                                _jsx("ul", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                    children: i.bestPractices.map((e, t) =>
                                                        _jsxs(
                                                            "li",
                                                            {
                                                                className: "flex items-start gap-2",
                                                                children: [
                                                                    _jsx("span", {
                                                                        className: "text-blue-500",
                                                                        children: "‚Ä¢",
                                                                    }),
                                                                    e,
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                ],
                            }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsxs("div", {
                                    className: "mb-4",
                                    children: _jsx("h2", {
                                        className: "text-lg sm:text-xl font-semibold text-gray-800",
                                        children: i.exceedsMaximum
                                            ? "Largest Available Conduit (Insufficient)"
                                            : "Recommended Conduit",
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "grid sm:grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            className: i.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-4 sm:p-5 rounded-lg border-2 border-red-300"
                                                : "bg-blue-50 dark:bg-blue-900/20 p-4 sm:p-5 rounded-lg border-2 border-blue-300",
                                            children: [
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs text-red-600 font-medium"
                                                        : "text-xs text-blue-600 font-medium",
                                                    children: i.exceedsMaximum
                                                        ? "Largest Conduit"
                                                        : "Recommended Conduit",
                                                }),
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-2xl sm:text-3xl font-bold text-red-700"
                                                        : "text-2xl sm:text-3xl font-bold text-blue-700",
                                                    children: i._0xd93e1a ? i._0xd93e1a.trade : '4"',
                                                }),
                                                _jsxs("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs sm:text-sm text-red-600"
                                                        : "text-xs sm:text-sm text-blue-600",
                                                    children: [
                                                        "ID: ",
                                                        i._0xd93e1a ? i._0xd93e1a.id : "4.334",
                                                        '" (',
                                                        i._0xd93e1a
                                                            ? Math.round(25.4 * i._0xd93e1a.id * 10) / 10
                                                            : "110.1",
                                                        "mm)",
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: i.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-4 sm:p-5 rounded-lg border-2 border-red-300"
                                                : "bg-green-50 dark:bg-green-900/20 p-4 sm:p-5 rounded-lg border-2 border-green-300",
                                            children: [
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs text-red-600 font-medium"
                                                        : "text-xs text-green-600 font-medium",
                                                    children: "Conduit Fill",
                                                }),
                                                _jsxs("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-2xl sm:text-3xl font-bold text-red-700"
                                                        : "text-2xl sm:text-3xl font-bold text-green-700",
                                                    children: [i.actualFillPercent, "%"],
                                                }),
                                                _jsxs("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs sm:text-sm text-red-600"
                                                        : "text-xs sm:text-sm text-green-600",
                                                    children: [
                                                        i.exceedsMaximum ? "‚ùå Exceeds " : "Max allowed: ",
                                                        i.fillPercentage,
                                                        "%",
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: i.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-4 sm:p-5 rounded-lg border-2 border-red-300"
                                                : "bg-purple-50 dark:bg-purple-900/20 p-4 sm:p-5 rounded-lg border-2 border-purple-300",
                                            children: [
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs text-red-600 font-medium"
                                                        : "text-xs text-purple-600 font-medium",
                                                    children: "JAM Ratio",
                                                }),
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-2xl sm:text-3xl font-bold text-red-700"
                                                        : "text-2xl sm:text-3xl font-bold text-purple-700",
                                                    children: i.exceedsMaximum ? "N/A" : i.jamRatio,
                                                }),
                                                _jsxs("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs sm:text-sm text-red-600"
                                                        : "text-xs sm:text-sm text-purple-600",
                                                    children: i.exceedsMaximum
                                                        ? "Fill limit exceeded"
                                                        : [
                                                              i._0xd93e1a ? i._0xd93e1a.id : "4.334",
                                                              '" √∑ ',
                                                              i.outerDiameterInches.toFixed(3),
                                                              '"',
                                                          ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: i.exceedsMaximum
                                                ? "bg-red-50 dark:bg-red-900/20 p-4 sm:p-5 rounded-lg border-2 border-red-300"
                                                : `p-4 sm:p-5 rounded-lg border-2 ${((e) => {
                                                      const t = {
                                                          red: "bg-red-100 border-red-300 text-red-800 dark:text-red-200",
                                                          yellow: "bg-yellow-100 border-yellow-300 text-yellow-800 dark:text-yellow-200",
                                                          green: "bg-green-100 border-green-300 text-green-800 dark:text-green-200",
                                                          gray: "bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300",
                                                      };
                                                      return t[e] || t.gray;
                                                  })(i.jamRiskColor)}`,
                                            children: [
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs text-red-600 font-medium"
                                                        : "text-xs font-medium opacity-80",
                                                    children: "JAM Risk",
                                                }),
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-2xl sm:text-3xl font-bold text-red-700"
                                                        : "text-2xl sm:text-3xl font-bold",
                                                    children: i.exceedsMaximum ? "N/A" : i.jamRisk,
                                                }),
                                                _jsx("div", {
                                                    className: i.exceedsMaximum
                                                        ? "text-xs sm:text-sm text-red-600"
                                                        : "text-xs sm:text-sm opacity-80",
                                                    children: i.exceedsMaximum
                                                        ? "‚ö† Fill exceeded"
                                                        : "N/A" === i.jamRisk
                                                          ? "Only for 3+ cables"
                                                          : "Low Risk" === i.jamRisk
                                                            ? "‚úì Safe to pull"
                                                            : "Borderline" === i.jamRisk
                                                              ? "‚ö† Use caution"
                                                              : "‚ö† See recommendations",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "p-3 sm:p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg text-xs sm:text-sm",
                                    children: _jsxs("div", {
                                        className: "grid sm:grid-cols-3 gap-2 sm:gap-4",
                                        children: [
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", { className: "text-gray-500 dark:text-gray-400", children: "Cables:" }),
                                                    " ",
                                                    _jsxs("strong", {
                                                        children: [i.cableQty, " √ó ", i.outerDiameter, " ", i.unit],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: "Min ID Required:",
                                                    }),
                                                    " ",
                                                    _jsxs("strong", {
                                                        children: [
                                                            i.minRequiredIDInches,
                                                            '" (',
                                                            Math.round(25.4 * i.minRequiredIDInches * 10) / 10,
                                                            "mm)",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: "NEC Fill Rule:",
                                                    }),
                                                    " ",
                                                    _jsxs("strong", {
                                                        children: [
                                                            i.fillPercentage,
                                                            "% (",
                                                            i.cableQty >= 3
                                                                ? "3+ cables"
                                                                : 2 === i.cableQty
                                                                  ? "2 cables"
                                                                  : "1 cable",
                                                            ")",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                }),
                            ],
                        }),
                        !i.exceedsMaximum &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                                children: [
                                    _jsx("h2", {
                                        className: "text-lg sm:text-xl font-semibold text-gray-800 mb-2",
                                        children: "Adjust Conduit Size",
                                    }),
                                    _jsx("p", {
                                        className: "text-sm text-gray-600 dark:text-gray-300 mb-4",
                                        children:
                                            "Slide to explore different conduit sizes and see how they affect fill percentage and JAM risk per NEC and AVIXA standards.",
                                    }),
                                    _jsxs("div", {
                                        className: "mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className: "flex justify-between items-center mb-2",
                                                children: [
                                                    _jsxs("label", {
                                                        className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                        children: [
                                                            "Selected Conduit: ",
                                                            _jsx("span", {
                                                                className: "font-bold text-blue-600 text-lg",
                                                                children: i._0xf639dc[o]?.trade || "--",
                                                            }),
                                                        ],
                                                    }),
                                                    c &&
                                                        "minimum" === c.comparison &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-blue-100 text-blue-700 rounded",
                                                            children: "NEC Minimum",
                                                        }),
                                                    c &&
                                                        "undersized" === c.comparison &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-red-100 text-red-700 rounded",
                                                            children: "Below NEC Minimum",
                                                        }),
                                                    c &&
                                                        "oversized" === c.comparison &&
                                                        _jsx("span", {
                                                            className:
                                                                "px-2 py-1 text-xs bg-green-100 text-green-700 rounded",
                                                            children: "Above NEC Minimum",
                                                        }),
                                                ],
                                            }),
                                            _jsx("input", {
                                                type: "range",
                                                min: "0",
                                                max: i._0xf639dc.length - 1,
                                                value: null !== o ? o : 0,
                                                onChange: (e) => E(parseInt(e.target.value)),
                                                className:
                                                    "w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-600",
                                            }),
                                            _jsx("div", {
                                                className:
                                                    "flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1 overflow-x-auto",
                                                children: i._0xf639dc.map((e, t) =>
                                                    _jsx(
                                                        "span",
                                                        {
                                                            className: `px-1 ${t === o ? "font-bold text-blue-600" : ""} ${i._0xd93e1a?.trade === e.trade ? "text-blue-500" : ""}`,
                                                            children: e.trade,
                                                        },
                                                        t
                                                    )
                                                ),
                                            }),
                                            _jsxs("div", {
                                                className: "flex flex-wrap gap-2 mt-4",
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400 self-center",
                                                        children: "Quick Select:",
                                                    }),
                                                    i._0xf639dc
                                                        .slice(0, 6)
                                                        .map((e, t) =>
                                                            _jsxs(
                                                                "button",
                                                                {
                                                                    onClick: () => E(t),
                                                                    className:
                                                                        "px-3 py-1.5 text-xs rounded border transition-colors cursor-pointer " +
                                                                        (o === t
                                                                            ? "bg-blue-600 text-white border-blue-600"
                                                                            : i._0xd93e1a?.trade === e.trade
                                                                              ? "bg-blue-50 dark:bg-blue-900/20 text-blue-700 border-blue-300 hover:bg-blue-100"
                                                                              : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:bg-gray-900/50"),
                                                                    children: [
                                                                        e.trade,
                                                                        i._0xd93e1a?.trade === e.trade &&
                                                                            _jsx("span", {
                                                                                className: "ml-1 text-xs",
                                                                                children: "‚òÖ",
                                                                            }),
                                                                    ],
                                                                },
                                                                t
                                                            )
                                                        ),
                                                ],
                                            }),
                                        ],
                                    }),
                                    c &&
                                        _jsxs("div", {
                                            className:
                                                "p-4 rounded-lg border-2 " +
                                                ("error" === c.status
                                                    ? "bg-red-50 dark:bg-red-900/20 border-red-300"
                                                    : "warning" === c.status
                                                      ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300"
                                                      : "caution" === c.status
                                                        ? "bg-amber-50 dark:bg-amber-900/20 border-amber-300"
                                                        : "bg-green-50 dark:bg-green-900/20 border-green-300"),
                                            children: [
                                                _jsxs("div", {
                                                    className: "grid grid-cols-2 sm:grid-cols-4 gap-3 mb-4",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "text-center p-3 bg-white dark:bg-gray-800 rounded-lg border",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                    children: "Conduit",
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xl font-bold text-gray-800",
                                                                    children: c.conduit.trade,
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children: ["ID: ", c.conduit.id, '"'],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className:
                                                                "text-center p-3 rounded-lg border " +
                                                                (c.exceedsNEC
                                                                    ? "bg-red-100 border-red-300"
                                                                    : "bg-white dark:bg-gray-800"),
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                    children: "Fill %",
                                                                }),
                                                                _jsxs("div", {
                                                                    className:
                                                                        "text-xl font-bold " +
                                                                        (c.exceedsNEC
                                                                            ? "text-red-600"
                                                                            : "text-green-600"),
                                                                    children: [c.fillPercent, "%"],
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children: ["Limit: ", c.necLimit, "%"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "text-center p-3 bg-white dark:bg-gray-800 rounded-lg border",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                    children: "JAM Ratio",
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xl font-bold text-purple-600",
                                                                    children: c.jamRatio,
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children:
                                                                        i.cableQty >= 3 ? "ID √∑ OD" : "N/A (<3 cables)",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className:
                                                                "text-center p-3 rounded-lg border " +
                                                                ("red" === c.jamRiskColor
                                                                    ? "bg-red-100 border-red-300"
                                                                    : "yellow" === c.jamRiskColor
                                                                      ? "bg-yellow-100 border-yellow-300"
                                                                      : "green" === c.jamRiskColor
                                                                        ? "bg-green-100 border-green-300"
                                                                        : "bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600"),
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-400 font-medium",
                                                                    children: "JAM Risk",
                                                                }),
                                                                _jsx("div", {
                                                                    className:
                                                                        "text-xl font-bold " +
                                                                        ("red" === c.jamRiskColor
                                                                            ? "text-red-600"
                                                                            : "yellow" === c.jamRiskColor
                                                                              ? "text-yellow-600"
                                                                              : "green" === c.jamRiskColor
                                                                                ? "text-green-600"
                                                                                : "text-gray-600 dark:text-gray-300"),
                                                                    children: c.jamRisk,
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children:
                                                                        "Low Risk" === c.jamRisk
                                                                            ? "> 3.2"
                                                                            : "Borderline" === c.jamRisk
                                                                              ? "2.8 - 3.2"
                                                                              : "High Risk" === c.jamRisk
                                                                                ? "< 2.8"
                                                                                : "--",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "space-y-2",
                                                    children: [
                                                        _jsx("h4", {
                                                            className: "font-semibold text-gray-700 dark:text-gray-300 text-sm",
                                                            children: "Analysis & Recommendations:",
                                                        }),
                                                        c.recommendations.map((e, t) =>
                                                            _jsx(
                                                                "div",
                                                                {
                                                                    className:
                                                                        "p-3 rounded-lg border text-sm " +
                                                                        ("error" === e.type
                                                                            ? "bg-red-100 border-red-200 dark:border-red-800"
                                                                            : "warning" === e.type
                                                                              ? "bg-yellow-100 border-yellow-200 dark:border-yellow-800"
                                                                              : "caution" === e.type
                                                                                ? "bg-amber-100 border-amber-200 dark:border-amber-800"
                                                                                : "success" === e.type
                                                                                  ? "bg-green-100 border-green-200 dark:border-green-800"
                                                                                  : "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),
                                                                    children: _jsxs("div", {
                                                                        className: "flex gap-2",
                                                                        children: [
                                                                            _jsx("span", { children: e.icon }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    _jsxs("span", {
                                                                                        className:
                                                                                            "font-semibold " +
                                                                                            ("error" === e.type
                                                                                                ? "text-red-800 dark:text-red-200"
                                                                                                : "warning" === e.type
                                                                                                  ? "text-yellow-800 dark:text-yellow-200"
                                                                                                  : "caution" === e.type
                                                                                                    ? "text-amber-800 dark:text-amber-200"
                                                                                                    : "success" ===
                                                                                                        e.type
                                                                                                      ? "text-green-800 dark:text-green-200"
                                                                                                      : "text-blue-800 dark:text-blue-200"),
                                                                                        children: [e.title, ": "],
                                                                                    }),
                                                                                    _jsx("span", {
                                                                                        className:
                                                                                            "error" === e.type
                                                                                                ? "text-red-700"
                                                                                                : "warning" === e.type
                                                                                                  ? "text-yellow-700"
                                                                                                  : "caution" === e.type
                                                                                                    ? "text-amber-700"
                                                                                                    : "success" ===
                                                                                                        e.type
                                                                                                      ? "text-green-700"
                                                                                                      : "text-blue-700",
                                                                                        children: e.text,
                                                                                    }),
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                },
                                                                t
                                                            )
                                                        ),
                                                    ],
                                                }),
                                                "minimum" !== c.comparison &&
                                                    _jsxs("div", {
                                                        className: "mt-3 p-2 bg-white dark:bg-gray-800 rounded text-xs text-gray-600 dark:text-gray-300",
                                                        children: [
                                                            _jsx("strong", { children: "Note:" }),
                                                            " NEC minimum for ",
                                                            i.cableQty,
                                                            " √ó ",
                                                            i.outerDiameter,
                                                            i.unit,
                                                            " cables is ",
                                                            _jsx("strong", { children: c.necMinConduit?.trade }),
                                                            ".",
                                                            "oversized" === c.comparison &&
                                                                " You have selected a larger size, which improves pull ease and allows for future expansion.",
                                                            "undersized" === c.comparison &&
                                                                " The selected size is too small and would violate NEC requirements.",
                                                        ],
                                                    }),
                                            ],
                                        }),
                                ],
                            }),
                        !i.exceedsMaximum &&
                            i.cableQty >= 3 &&
                            "Low Risk" !== i.jamRisk &&
                            _jsxs("div", {
                                className: "bg-amber-50 dark:bg-amber-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border border-amber-300",
                                children: [
                                    _jsxs("h2", {
                                        className:
                                            "text-lg sm:text-xl font-semibold text-amber-800 dark:text-amber-200 mb-4 flex items-center gap-2",
                                        children: [_jsx("span", { children: "‚ö†Ô∏è" }), " JAM Risk - Recommendations"],
                                    }),
                                    i.safeJamConduit &&
                                        _jsxs("div", {
                                            className: "mb-4 p-3 sm:p-4 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-800",
                                            children: [
                                                _jsx("h3", {
                                                    className: "font-semibold text-amber-700 mb-2",
                                                    children: "Option 1: Use Larger Conduit",
                                                }),
                                                _jsxs("p", {
                                                    className: "text-sm text-amber-800 dark:text-amber-200 mb-2",
                                                    children: [
                                                        "Upgrade to ",
                                                        _jsx("strong", { children: i.safeJamConduit.trade }),
                                                        " EMT (ID: ",
                                                        i.safeJamConduit.id,
                                                        '") for a safe JAM ratio of ',
                                                        _jsx("strong", { children: i.safeJamRatio }),
                                                        ".",
                                                    ],
                                                }),
                                                _jsx("span", {
                                                    className: `inline-block px-2 py-1 text-xs rounded ${F("Low Risk")}`,
                                                    children: "Low Risk - Safe to Pull",
                                                }),
                                            ],
                                        }),
                                    i.multiConduitOptions.length > 0 &&
                                        _jsxs("div", {
                                            className: "p-3 sm:p-4 bg-white dark:bg-gray-800 rounded-lg border border-amber-200 dark:border-amber-800",
                                            children: [
                                                _jsx("h3", {
                                                    className: "font-semibold text-amber-700 mb-3",
                                                    children:
                                                        "Option 2: Split Into Multiple Conduits (AVIXA Best Practice)",
                                                }),
                                                _jsx("div", {
                                                    className: "grid sm:grid-cols-2 gap-3",
                                                    children: i.multiConduitOptions.map((e, t) =>
                                                        _jsxs(
                                                            "div",
                                                            {
                                                                className:
                                                                    "p-3 rounded-lg border " +
                                                                    ("Low Risk" === e.jamRisk
                                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"
                                                                        : "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"),
                                                                children: [
                                                                    _jsxs("div", {
                                                                        className: "font-semibold text-gray-800 mb-1",
                                                                        children: [
                                                                            e.count,
                                                                            " √ó ",
                                                                            e.conduit.trade,
                                                                            " Conduits",
                                                                        ],
                                                                    }),
                                                                    _jsxs("div", {
                                                                        className:
                                                                            "text-xs sm:text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                                        children: [
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    e.cablesEach,
                                                                                    " cables per conduit",
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "JAM Ratio: ",
                                                                                    _jsx("strong", {
                                                                                        children: e.jamRatio,
                                                                                    }),
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Fill: ",
                                                                                    e.fillPercent,
                                                                                    "%",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                    _jsx("span", {
                                                                        className: `inline-block mt-2 px-2 py-1 text-xs rounded ${F(e.jamRisk)}`,
                                                                        children: e.jamRisk,
                                                                    }),
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-amber-700 mt-3",
                                                    children:
                                                        "üí° Splitting cables into multiple conduits reduces JAM risk and makes future cable additions easier.",
                                                }),
                                            ],
                                        }),
                                ],
                            }),
                        !i.exceedsMaximum &&
                            i.cableQty >= 3 &&
                            "Low Risk" === i.jamRisk &&
                            _jsxs("div", {
                                className: "bg-green-50 dark:bg-green-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border border-green-300",
                                children: [
                                    _jsxs("h2", {
                                        className:
                                            "text-lg sm:text-xl font-semibold text-green-800 dark:text-green-200 mb-2 flex items-center gap-2",
                                        children: [_jsx("span", { children: "‚úÖ" }), " Safe Configuration"],
                                    }),
                                    _jsxs("p", {
                                        className: "text-sm text-green-700",
                                        children: [
                                            "With a JAM ratio of ",
                                            i.jamRatio,
                                            ", the recommended ",
                                            i._0xd93e1a?.trade,
                                            " conduit provides low risk of cable jamming during installation. Safe to proceed with cable pull.",
                                        ],
                                    }),
                                ],
                            }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: "NEC Conduit Fill Requirements",
                                }),
                                _jsxs("div", {
                                    className: "grid grid-cols-3 gap-2 sm:gap-3 text-xs sm:text-sm mb-4",
                                    children: [
                                        _jsxs("div", {
                                            className:
                                                "p-3 rounded-lg border-2 text-center " +
                                                (1 === i.cableQty
                                                    ? "bg-blue-100 border-blue-400"
                                                    : "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700"),
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-gray-700 dark:text-gray-300",
                                                    children: "1 Cable",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-blue-600",
                                                    children: "53%",
                                                }),
                                                _jsx("div", { className: "text-gray-500 dark:text-gray-400", children: "Max Fill" }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "p-3 rounded-lg border-2 text-center " +
                                                (2 === i.cableQty
                                                    ? "bg-blue-100 border-blue-400"
                                                    : "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700"),
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-gray-700 dark:text-gray-300",
                                                    children: "2 Cables",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-blue-600",
                                                    children: "31%",
                                                }),
                                                _jsx("div", { className: "text-gray-500 dark:text-gray-400", children: "Max Fill" }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "p-3 rounded-lg border-2 text-center " +
                                                (i.cableQty >= 3
                                                    ? "bg-blue-100 border-blue-400"
                                                    : "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700"),
                                            children: [
                                                _jsx("div", {
                                                    className: "font-bold text-gray-700 dark:text-gray-300",
                                                    children: "3+ Cables",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-blue-600",
                                                    children: "40%",
                                                }),
                                                _jsx("div", { className: "text-gray-500 dark:text-gray-400", children: "Max Fill" }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsxs("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: [
                                        "EMT Conduit Sizes Reference",
                                        i.exceedsMaximum &&
                                            _jsx("span", {
                                                className: "ml-2 text-sm font-normal text-red-600",
                                                children: "(All sizes exceeded - multiple conduits required)",
                                            }),
                                        !i.exceedsMaximum &&
                                            c &&
                                            c.conduit &&
                                            _jsxs("span", {
                                                className: "ml-2 text-sm font-normal text-purple-600",
                                                children: ["(selected: ", c.conduit.trade, ")"],
                                            }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "overflow-x-auto",
                                    children: _jsxs("table", {
                                        className: "w-full text-xs sm:text-sm",
                                        children: [
                                            _jsx("thead", {
                                                children: _jsxs("tr", {
                                                    className: "bg-gray-100 dark:bg-gray-700",
                                                    children: [
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "Trade Size",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "Actual ID",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "Metric",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "Fill %",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "JAM Ratio*",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-2 sm:px-3 py-2 text-left",
                                                            children: "Status",
                                                        }),
                                                    ],
                                                }),
                                            }),
                                            _jsx("tbody", {
                                                children: i._0xf639dc.map((e, t) => {
                                                    const s = e.id / i.outerDiameterInches,
                                                        a =
                                                            i.cableQty *
                                                            Math.PI *
                                                            Math.pow(i.outerDiameterInches / 2, 2),
                                                        r = Math.PI * Math.pow(e.id / 2, 2),
                                                        l = Math.round((a / r) * 100),
                                                        n = i._0xd93e1a?.trade === e.trade,
                                                        o = !i.exceedsMaximum && c?.conduit?.trade === e.trade,
                                                        d = !i.exceedsMaximum && i.safeJamConduit?.trade === e.trade;
                                                    let m =
                                                        i.cableQty < 3
                                                            ? "N/A"
                                                            : s < 2.8
                                                              ? "High Risk"
                                                              : s <= 3.2
                                                                ? "Borderline"
                                                                : "Low Risk";
                                                    const x = l > (1 === i.cableQty ? 53 : 2 === i.cableQty ? 31 : 40),
                                                        u = i.exceedsMaximum
                                                            ? "bg-red-50 dark:bg-red-900/20"
                                                            : o
                                                              ? "bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"
                                                              : n
                                                                ? "bg-blue-50 dark:bg-blue-900/20"
                                                                : d
                                                                  ? "bg-green-50 dark:bg-green-900/20"
                                                                  : "";
                                                    return _jsxs(
                                                        "tr",
                                                        {
                                                            className: `border-b ${u}`,
                                                            children: [
                                                                _jsxs("td", {
                                                                    className: "px-2 sm:px-3 py-2 font-medium",
                                                                    children: [
                                                                        e.trade,
                                                                        i.exceedsMaximum &&
                                                                            t === i._0xf639dc.length - 1 &&
                                                                            _jsx("span", {
                                                                                className: "ml-1 text-red-600 text-xs",
                                                                                children: "‚Üê Largest",
                                                                            }),
                                                                        !i.exceedsMaximum &&
                                                                            o &&
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "ml-1 text-purple-600 text-xs",
                                                                                children: "‚Üê Selected",
                                                                            }),
                                                                        !i.exceedsMaximum &&
                                                                            n &&
                                                                            !o &&
                                                                            _jsx("span", {
                                                                                className: "ml-1 text-blue-600 text-xs",
                                                                                children: "‚Üê NEC Min",
                                                                            }),
                                                                        !i.exceedsMaximum &&
                                                                            d &&
                                                                            !n &&
                                                                            !o &&
                                                                            _jsx("span", {
                                                                                className:
                                                                                    "ml-1 text-green-600 text-xs",
                                                                                children: "‚Üê Safe JAM",
                                                                            }),
                                                                    ],
                                                                }),
                                                                _jsxs("td", {
                                                                    className: "px-2 sm:px-3 py-2",
                                                                    children: [e.id, '"'],
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-2 sm:px-3 py-2",
                                                                    children: e.metric,
                                                                }),
                                                                _jsxs("td", {
                                                                    className:
                                                                        "px-2 sm:px-3 py-2 " +
                                                                        (x ? "text-red-600 font-semibold" : ""),
                                                                    children: [
                                                                        l,
                                                                        "%",
                                                                        x &&
                                                                            _jsx("span", {
                                                                                className: "text-xs ml-1",
                                                                                children: "‚ö†Ô∏è",
                                                                            }),
                                                                    ],
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-2 sm:px-3 py-2",
                                                                    children: Math.round(100 * s) / 100,
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-2 sm:px-3 py-2",
                                                                    children: _jsx("span", {
                                                                        className: `px-2 py-0.5 rounded text-xs ${i.exceedsMaximum && x ? "bg-red-600 text-white" : F(m)}`,
                                                                        children:
                                                                            i.exceedsMaximum && x ? "Exceeded" : m,
                                                                    }),
                                                                }),
                                                            ],
                                                        },
                                                        t
                                                    );
                                                }),
                                            }),
                                        ],
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "flex flex-wrap gap-4 mt-3 text-xs text-gray-500 dark:text-gray-400",
                                    children: [
                                        _jsxs("span", {
                                            children: [
                                                "* JAM ratio calculated for cable OD of ",
                                                i.outerDiameter,
                                                " ",
                                                i.unit,
                                            ],
                                        }),
                                        _jsxs("span", {
                                            children: [
                                                "‚Ä¢ NEC max fill: ",
                                                1 === i.cableQty ? "53%" : 2 === i.cableQty ? "31%" : "40%",
                                                " for ",
                                                i.cableQty,
                                                " cable(s)",
                                            ],
                                        }),
                                    ],
                                }),
                                i.exceedsMaximum
                                    ? _jsxs("div", {
                                          className: "flex flex-wrap gap-2 mt-2",
                                          children: [
                                              _jsxs("span", {
                                                  className: "flex items-center gap-1 text-xs",
                                                  children: [
                                                      _jsx("span", {
                                                          className: "w-3 h-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded",
                                                      }),
                                                      " All Exceeded",
                                                  ],
                                              }),
                                              _jsxs("span", {
                                                  className: "flex items-center gap-1 text-xs text-red-600",
                                                  children: [
                                                      _jsx("span", { children: "‚ö†Ô∏è" }),
                                                      " Multiple conduits required",
                                                  ],
                                              }),
                                          ],
                                      })
                                    : _jsxs("div", {
                                          className: "flex flex-wrap gap-2 mt-2",
                                          children: [
                                              _jsxs("span", {
                                                  className: "flex items-center gap-1 text-xs",
                                                  children: [
                                                      _jsx("span", {
                                                          className:
                                                              "w-3 h-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded",
                                                      }),
                                                      " NEC Minimum",
                                                  ],
                                              }),
                                              _jsxs("span", {
                                                  className: "flex items-center gap-1 text-xs",
                                                  children: [
                                                      _jsx("span", {
                                                          className:
                                                              "w-3 h-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded",
                                                      }),
                                                      " Safe JAM",
                                                  ],
                                              }),
                                              _jsxs("span", {
                                                  className: "flex items-center gap-1 text-xs",
                                                  children: [
                                                      _jsx("span", {
                                                          className:
                                                              "w-3 h-3 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-800 rounded",
                                                      }),
                                                      " Selected",
                                                  ],
                                              }),
                                          ],
                                      }),
                            ],
                        }),
                    ],
                }),
        ],
    });
}
function AudioCalculator() {
    const [e, t] = useState("datarate"),
        [s, a] = useState(48e3),
        [r, l] = useState(24),
        [i, n] = useState(2),
        [o, d] = useState(1),
        [c, m] = useState(0),
        [x, u] = useState(null),
        [h, p] = useState("dante"),
        [g, b] = useState(16),
        [f, y] = useState(48e3),
        [j, _] = useState(24),
        [v, N] = useState(!1),
        [w, C] = useState(null),
        [M, k] = useState(1e3),
        [S, R] = useState(20),
        [P, A] = useState(10),
        [D, I] = useState(8),
        [E, F] = useState(3),
        [B, T] = useState("m"),
        [L, H] = useState("control-room"),
        [U, q] = useState(null),
        [$, W] = useState(!1);
    return _jsxs("div", {
        className: "max-w-4xl mx-auto px-6 py-8",
        children: [
            _jsxs("div", {
                className: "flex items-center justify-between mb-6",
                children: [
                    _jsx("h1", { className: "text-3xl font-bold text-gray-900 dark:text-gray-100", children: "Audio Calculator" }),
                    (x !== null || w !== null || U !== null) &&
                        _jsx("button", {
                            onClick: () => W(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: $,
                onConfirm: () => {
                    t("datarate"),
                        a(48e3),
                        l(24),
                        n(2),
                        d(1),
                        m(0),
                        u(null),
                        p("dante"),
                        b(16),
                        y(48e3),
                        _(24),
                        N(!1),
                        C(null),
                        k(1e3),
                        R(20),
                        A(10),
                        I(8),
                        F(3),
                        T("m"),
                        H("control-room"),
                        q(null),
                        W(!1);
                },
                onCancel: () => W(!1),
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Comprehensive audio calculations including PCM data rate, Dante/AES67 network bandwidth, and acoustic wavelength with room mode analysis.",
                    ],
                }),
            }),
            _jsxs("div", {
                className: "flex gap-2 mb-6",
                children: [
                    _jsx("button", {
                        type: "button",
                        onClick: () => t("datarate"),
                        className:
                            "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                            ("datarate" === e
                                ? "bg-green-600 text-white"
                                : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                        children: "üìä Data Rate",
                    }),
                    _jsx("button", {
                        type: "button",
                        onClick: () => t("dante"),
                        className:
                            "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                            ("dante" === e ? "bg-green-600 text-white" : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                        children: "üåê Dante/AES67",
                    }),
                    _jsx("button", {
                        type: "button",
                        onClick: () => t("wavelength"),
                        className:
                            "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                            ("wavelength" === e
                                ? "bg-green-600 text-white"
                                : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                        children: "üîä Wavelength",
                    }),
                ],
            }),
            "datarate" === e &&
                _jsxs(_Fragment, {
                    children: [
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: "Audio Configuration",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Sampling Rate",
                                                }),
                                                _jsxs("select", {
                                                    value: s,
                                                    onChange: (e) => a(Number(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", {
                                                            value: 44100,
                                                            children: "44.1 kHz (CD Quality)",
                                                        }),
                                                        _jsx("option", {
                                                            value: 48e3,
                                                            children: "48 kHz (Professional)",
                                                        }),
                                                        _jsx("option", {
                                                            value: 96e3,
                                                            children: "96 kHz (Hi-Res Audio)",
                                                        }),
                                                        _jsx("option", {
                                                            value: 192e3,
                                                            children: "192 kHz (Studio Master)",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Bit Depth",
                                                }),
                                                _jsxs("select", {
                                                    value: r,
                                                    onChange: (e) => l(Number(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", { value: 16, children: "16-bit (CD Quality)" }),
                                                        _jsx("option", {
                                                            value: 24,
                                                            children: "24-bit (Professional)",
                                                        }),
                                                        _jsx("option", { value: 32, children: "32-bit (Float)" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Channels",
                                                }),
                                                _jsxs("select", {
                                                    value: i,
                                                    onChange: (e) => n(Number(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", { value: 1, children: "1 (Mono)" }),
                                                        _jsx("option", { value: 2, children: "2 (Stereo)" }),
                                                        _jsx("option", { value: 6, children: "6 (5.1 Surround)" }),
                                                        _jsx("option", { value: 8, children: "8 (7.1 Surround)" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Duration",
                                                }),
                                                _jsxs("div", {
                                                    className: "flex gap-2",
                                                    children: [
                                                        _jsx("input", {
                                                            type: "number",
                                                            min: "0",
                                                            value: o,
                                                            onChange: (e) =>
                                                                d(
                                                                    "" === e.target.value
                                                                        ? ""
                                                                        : parseInt(e.target.value) || ""
                                                                ),
                                                            placeholder: "Min",
                                                            className: "w-1/2 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                        }),
                                                        _jsx("input", {
                                                            type: "number",
                                                            min: "0",
                                                            max: "59",
                                                            value: c,
                                                            onChange: (e) =>
                                                                m(
                                                                    "" === e.target.value
                                                                        ? ""
                                                                        : Math.min(59, parseInt(e.target.value) || "")
                                                                ),
                                                            placeholder: "Sec",
                                                            className: "w-1/2 px-3 py-2 border rounded-lg dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("button", {
                                    type: "button",
                                    onClick: () => {
                                        u(_0xae89d3(s, r, i, o, c));
                                    },
                                    className:
                                        "w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg cursor-pointer",
                                    children: "Calculate Audio Data Rate",
                                }),
                            ],
                        }),
                        x &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsx("h2", { className: "text-xl font-semibold mb-6", children: "Results" }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-3 gap-4 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className:
                                                    "bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border-2 border-green-200 dark:border-green-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Data Rate",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-green-700",
                                                        children: [x.dataRateMbps, " Mbps"],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [x.dataRateKbps, " Kbps"],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border-2 border-blue-200 dark:border-blue-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "File Size",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-2xl font-bold text-blue-700",
                                                        children: x.fileSizeFormatted,
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: ((e, t) => {
                                                            if (0 === e && 0 === t) return "0 seconds";
                                                            const s = [];
                                                            return (
                                                                e > 0 && s.push(`${e} min`),
                                                                t > 0 && s.push(`${t} sec`),
                                                                s.join(" ")
                                                            );
                                                        })(o, c),
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border-2 border-purple-200 dark:border-purple-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Bits per Second",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-lg font-bold text-purple-700",
                                                        children: x.dataRateBps.toLocaleString(),
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: "bps",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                    ],
                }),
            "dante" === e &&
                _jsxs(_Fragment, {
                    children: [
                        _jsxs("div", {
                            className: "bg-green-50 dark:bg-green-900/20 rounded-xl p-4 mb-6 border border-green-200 dark:border-green-800",
                            children: [
                                _jsx("h2", {
                                    className: "font-semibold text-green-800 dark:text-green-200 mb-2",
                                    children: "Protocol Selection",
                                }),
                                _jsxs("div", {
                                    className: "flex gap-4",
                                    children: [
                                        _jsx("button", {
                                            type: "button",
                                            onClick: () => p("dante"),
                                            className:
                                                "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                                                ("dante" === h
                                                    ? "bg-green-600 text-white"
                                                    : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:bg-green-900/20"),
                                            children: "üéõÔ∏è Dante (Audinate)",
                                        }),
                                        _jsx("button", {
                                            type: "button",
                                            onClick: () => p("aes67"),
                                            className:
                                                "flex-1 py-3 px-4 rounded-lg font-medium transition-colors cursor-pointer " +
                                                ("aes67" === h
                                                    ? "bg-blue-600 text-white"
                                                    : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:bg-blue-900/20"),
                                            children: "üåê AES67 (Open Standard)",
                                        }),
                                    ],
                                }),
                                _jsx("p", {
                                    className: "text-xs text-green-700 mt-2",
                                    children:
                                        "dante" === h
                                            ? "Dante: Proprietary Layer 3 protocol by Audinate. ~25% overhead, 4 channels per flow."
                                            : "AES67: Open interoperable standard (AES67-2018). ~20% overhead, 8 channels per stream.",
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                            children: [
                                _jsxs("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: ["dante" === h ? "Dante" : "AES67", " Configuration"],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Channel Count",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "1",
                                                    max: "512",
                                                    value: g,
                                                    onChange: (e) =>
                                                        b("" === e.target.value ? "" : parseInt(e.target.value) || ""),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Total audio channels (1-512)",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Sample Rate",
                                                }),
                                                _jsxs("select", {
                                                    value: f,
                                                    onChange: (e) => y(Number(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", { value: 44100, children: "44.1 kHz" }),
                                                        _jsx("option", { value: 48e3, children: "48 kHz (Standard)" }),
                                                        _jsx("option", { value: 96e3, children: "96 kHz" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Bit Depth",
                                                }),
                                                _jsxs("select", {
                                                    value: j,
                                                    onChange: (e) => _(Number(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", { value: 16, children: "16-bit" }),
                                                        _jsx("option", { value: 24, children: "24-bit (Standard)" }),
                                                        _jsx("option", { value: 32, children: "32-bit float" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        "dante" === h &&
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("label", {
                                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                        children: "Redundancy (Dante Only)",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex gap-4",
                                                        children: [
                                                            _jsxs("label", {
                                                                className: "flex items-center cursor-pointer",
                                                                children: [
                                                                    _jsx("input", {
                                                                        type: "radio",
                                                                        checked: !v,
                                                                        onChange: () => N(!1),
                                                                        className: "mr-2",
                                                                    }),
                                                                    "Primary Only",
                                                                ],
                                                            }),
                                                            _jsxs("label", {
                                                                className: "flex items-center cursor-pointer",
                                                                children: [
                                                                    _jsx("input", {
                                                                        type: "radio",
                                                                        checked: v,
                                                                        onChange: () => N(!0),
                                                                        className: "mr-2",
                                                                    }),
                                                                    "Primary + Secondary",
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        "aes67" === h &&
                                            _jsx("div", {
                                                children: _jsx("p", {
                                                    className:
                                                        "text-xs text-blue-600 bg-blue-50 dark:bg-blue-900/20 p-3 rounded-lg border border-blue-200 dark:border-blue-800",
                                                    children:
                                                        "Note: AES67 does not include built-in redundancy. For redundant streaming, SMPTE 2022-7 can be added externally.",
                                                }),
                                            }),
                                    ],
                                }),
                                _jsx("button", {
                                    type: "button",
                                    onClick: () => {
                                        const e = (g * f * j) / 1e6,
                                            t = e * ("dante" === h ? 1.25 : 1.2),
                                            s = "dante" === h ? 4 : 8,
                                            a = Math.ceil(g / s),
                                            r = t / a,
                                            l = "dante" === h && v ? 2 * t : t;
                                        let i,
                                            n = "100 Mbps";
                                        l > 80 && (n = "1 Gbps"),
                                            l > 800 && (n = "10 Gbps"),
                                            (i =
                                                "dante" === h
                                                    ? 96e3 === f
                                                        ? "0.25-1 ms"
                                                        : "0.5-2 ms"
                                                    : 96e3 === f
                                                      ? "0.5-2 ms"
                                                      : "1-4 ms"),
                                            C({
                                                protocol: h,
                                                protocolName: "dante" === h ? "Dante" : "AES67",
                                                rawBandwidthMbps: Math.round(100 * e) / 100,
                                                protocolBandwidthMbps: Math.round(100 * t) / 100,
                                                overhead: "dante" === h ? "25%" : "20%",
                                                totalBandwidth: Math.round(100 * l) / 100,
                                                flowsNeeded: a,
                                                bandwidthPerFlow: Math.round(100 * r) / 100,
                                                networkRecommendation: n,
                                                latency: i,
                                                redundancy: v,
                                            });
                                    },
                                    className:
                                        "w-full mt-6 " +
                                        ("dante" === h
                                            ? "bg-green-600 hover:bg-green-700"
                                            : "bg-blue-600 hover:bg-blue-700") +
                                        " text-white font-semibold py-3 rounded-lg cursor-pointer",
                                    children: "Calculate " + ("dante" === h ? "Dante" : "AES67") + " Bandwidth",
                                }),
                            ],
                        }),
                        w &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsxs("h2", {
                                        className: "text-xl font-semibold mb-6",
                                        children: [w.protocolName, " Bandwidth Results"],
                                    }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-3 gap-4 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className:
                                                    ("dante" === w.protocol
                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"
                                                        : "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800") +
                                                    " p-5 rounded-lg border-2 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Total Bandwidth",
                                                    }),
                                                    _jsxs("div", {
                                                        className:
                                                            "text-2xl font-bold " +
                                                            ("dante" === w.protocol
                                                                ? "text-green-700"
                                                                : "text-blue-700"),
                                                        children: [w.totalBandwidth, " Mbps"],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children:
                                                            "dante" === w.protocol
                                                                ? w.redundancy
                                                                    ? "With redundancy"
                                                                    : "Primary only"
                                                                : "Single network",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border-2 border-purple-200 dark:border-purple-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Network Recommendation",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-2xl font-bold text-purple-700",
                                                        children: w.networkRecommendation,
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: "Minimum switch port speed",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-orange-50 dark:bg-orange-900/20 p-5 rounded-lg border-2 border-orange-200 dark:border-orange-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Typical Latency",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-2xl font-bold text-orange-700",
                                                        children: w.latency,
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: w.protocolName,
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border",
                                        children: [
                                            _jsxs("h3", {
                                                className: "font-semibold text-gray-700 dark:text-gray-300 mb-2",
                                                children: [w.protocolName, " Technical Details"],
                                            }),
                                            _jsxs("div", {
                                                className: "grid md:grid-cols-2 gap-4 text-sm",
                                                children: [
                                                    _jsxs("div", {
                                                        children: [
                                                            "Raw audio bandwidth: ",
                                                            _jsxs("span", {
                                                                className: "font-medium",
                                                                children: [w.rawBandwidthMbps, " Mbps"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            "Protocol overhead: ",
                                                            _jsx("span", {
                                                                className: "font-medium",
                                                                children: w.overhead,
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            "dante" === w.protocol ? "Flows" : "Streams",
                                                            " needed: ",
                                                            _jsx("span", {
                                                                className: "font-medium",
                                                                children: w.flowsNeeded,
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            "Bandwidth per ",
                                                            "dante" === w.protocol ? "flow" : "stream",
                                                            ": ",
                                                            _jsxs("span", {
                                                                className: "font-medium",
                                                                children: [w.bandwidthPerFlow, " Mbps"],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                    ],
                }),
            "wavelength" === e &&
                _jsxs(_Fragment, {
                    children: [
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: "Frequency & Room Parameters",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Frequency (Hz)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "20",
                                                    max: "20000",
                                                    step: "1",
                                                    value: M,
                                                    onChange: (e) =>
                                                        k("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    placeholder: "Enter frequency (20-20000 Hz)",
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Human hearing range: 20 Hz - 20,000 Hz",
                                                }),
                                                _jsx("div", {
                                                    className: "flex flex-wrap gap-2 mt-2",
                                                    children: [50, 100, 250, 500, 1e3, 2e3, 4e3, 8e3].map((e) =>
                                                        _jsxs(
                                                            "button",
                                                            {
                                                                type: "button",
                                                                onClick: () => k(e),
                                                                className:
                                                                    "px-2 py-1 text-xs rounded border cursor-pointer " +
                                                                    (M === e
                                                                        ? "bg-green-600 text-white border-green-600"
                                                                        : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-green-50 dark:bg-green-900/20"),
                                                                children: [e >= 1e3 ? e / 1e3 + "k" : e, " Hz"],
                                                            },
                                                            e
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Room Purpose (ISO 3382)",
                                                }),
                                                _jsxs("select", {
                                                    value: L,
                                                    onChange: (e) => H(e.target.value),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                    children: [
                                                        _jsx("option", {
                                                            value: "control-room",
                                                            children: "üéõÔ∏è Control Room / Mixing Studio",
                                                        }),
                                                        _jsx("option", {
                                                            value: "recording-studio",
                                                            children: "üéôÔ∏è Recording Studio",
                                                        }),
                                                        _jsx("option", {
                                                            value: "home-studio",
                                                            children: "üè† Home Studio",
                                                        }),
                                                        _jsx("option", {
                                                            value: "podcast-studio",
                                                            children: "üé§ Podcast / Voice Studio",
                                                        }),
                                                        _jsx("option", {
                                                            value: "home-theater",
                                                            children: "üé¨ Home Theater",
                                                        }),
                                                        _jsx("option", {
                                                            value: "living-room",
                                                            children: "üõãÔ∏è Living Room (HiFi Listening)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "conference-room",
                                                            children: "üíº Conference Room",
                                                        }),
                                                        _jsx("option", {
                                                            value: "lecture-hall",
                                                            children: "üéì Lecture Hall / Classroom",
                                                        }),
                                                        _jsx("option", {
                                                            value: "rehearsal-room",
                                                            children: "üé∏ Music Rehearsal Room",
                                                        }),
                                                        _jsx("option", {
                                                            value: "concert-hall",
                                                            children: "üéª Concert Hall / Auditorium",
                                                        }),
                                                        _jsx("option", {
                                                            value: "house-of-worship",
                                                            children: "‚õ™ House of Worship",
                                                        }),
                                                        _jsx("option", {
                                                            value: "open-office",
                                                            children: "üè¢ Open Office",
                                                        }),
                                                    ],
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children:
                                                        "Room purpose determines target RT60 and treatment approach",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Temperature (¬∞C)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "0",
                                                    max: "40",
                                                    step: "1",
                                                    value: S,
                                                    onChange: (e) =>
                                                        R("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Temperature affects speed of sound (typical: 20¬∞C)",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "md:col-span-2",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex items-center justify-between mb-2",
                                                    children: [
                                                        _jsx("label", {
                                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300",
                                                            children: "Room Dimensions",
                                                        }),
                                                        _jsxs("select", {
                                                            value: B,
                                                            onChange: (e) => T(e.target.value),
                                                            className:
                                                                "px-3 py-1 border rounded-lg text-sm focus:ring-2 focus:ring-green-500",
                                                            children: [
                                                                _jsx("option", { value: "m", children: "Meters (m)" }),
                                                                _jsx("option", { value: "ft", children: "Feet (ft)" }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "grid grid-cols-3 gap-4",
                                                    children: [
                                                        _jsxs("div", {
                                                            children: [
                                                                _jsxs("label", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: ["Length (", B, ")"],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    step: "0.1",
                                                                    min: "0.1",
                                                                    value: P,
                                                                    onChange: (e) =>
                                                                        A(
                                                                            "" === e.target.value
                                                                                ? ""
                                                                                : parseFloat(e.target.value)
                                                                        ),
                                                                    className:
                                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            children: [
                                                                _jsxs("label", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: ["Width (", B, ")"],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    step: "0.1",
                                                                    min: "0.1",
                                                                    value: D,
                                                                    onChange: (e) =>
                                                                        I(
                                                                            "" === e.target.value
                                                                                ? ""
                                                                                : parseFloat(e.target.value)
                                                                        ),
                                                                    className:
                                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            children: [
                                                                _jsxs("label", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: ["Height (", B, ")"],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    step: "0.1",
                                                                    min: "0.1",
                                                                    value: E,
                                                                    onChange: (e) =>
                                                                        F(
                                                                            "" === e.target.value
                                                                                ? ""
                                                                                : parseFloat(e.target.value)
                                                                        ),
                                                                    className:
                                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("button", {
                                    type: "button",
                                    onClick: () => {
                                        const e = 331.3 + 0.606 * S,
                                            t = e / M,
                                            s = 100 * t,
                                            a = 3.28084 * t,
                                            r = 12 * a,
                                            l = (e) => ("ft" === B ? 0.3048 * e : e),
                                            i = l(P),
                                            n = l(D),
                                            o = l(E),
                                            d = (t, s) => {
                                                const a = [];
                                                for (let r = 1; r <= 4; r++) {
                                                    const l = (e / 2) * (r / t);
                                                    a.push({
                                                        mode: r,
                                                        frequency: Math.round(10 * l) / 10,
                                                        label: `${s}${r}`,
                                                    });
                                                }
                                                return a;
                                            },
                                            c = d(i, "L"),
                                            m = d(n, "W"),
                                            x = d(o, "H"),
                                            u = i * n * o,
                                            h = 35.3147 * u,
                                            p = {
                                                "recording-studio": {
                                                    name: "Recording Studio",
                                                    targetRT60: 0.3,
                                                    range: "0.2-0.4s",
                                                    focus: "Absorption & Isolation",
                                                    nc: "NC 15-20",
                                                },
                                                "control-room": {
                                                    name: "Control Room",
                                                    targetRT60: 0.35,
                                                    range: "0.25-0.4s",
                                                    focus: "Balanced Absorption/Diffusion",
                                                    nc: "NC 20-25",
                                                },
                                                "home-theater": {
                                                    name: "Home Theater",
                                                    targetRT60: 0.4,
                                                    range: "0.3-0.5s",
                                                    focus: "Side Absorption, Rear Diffusion",
                                                    nc: "NC 25-30",
                                                },
                                                "home-studio": {
                                                    name: "Home Studio",
                                                    targetRT60: 0.4,
                                                    range: "0.3-0.5s",
                                                    focus: "First Reflections, Bass Control",
                                                    nc: "NC 25-30",
                                                },
                                                "podcast-studio": {
                                                    name: "Podcast/Voice Studio",
                                                    targetRT60: 0.25,
                                                    range: "0.2-0.3s",
                                                    focus: "Maximum Absorption for Speech",
                                                    nc: "NC 20-25",
                                                },
                                                "lecture-hall": {
                                                    name: "Lecture Hall",
                                                    targetRT60: 0.7,
                                                    range: "0.6-0.8s",
                                                    focus: "Speech Intelligibility",
                                                    nc: "NC 25-30",
                                                },
                                                "rehearsal-room": {
                                                    name: "Music Rehearsal",
                                                    targetRT60: 1,
                                                    range: "0.8-1.2s",
                                                    focus: "Variable Acoustics",
                                                    nc: "NC 30-35",
                                                },
                                                "concert-hall": {
                                                    name: "Concert Hall",
                                                    targetRT60: 1.8,
                                                    range: "1.5-2.2s",
                                                    focus: "Diffusion, Minimal Absorption",
                                                    nc: "NC 15-20",
                                                },
                                                "house-of-worship": {
                                                    name: "House of Worship",
                                                    targetRT60: 2,
                                                    range: "1.5-3.0s",
                                                    focus: "Reverberance for Music",
                                                    nc: "NC 25-30",
                                                },
                                                "open-office": {
                                                    name: "Open Office",
                                                    targetRT60: 0.5,
                                                    range: "0.4-0.6s",
                                                    focus: "Speech Privacy, Noise Reduction",
                                                    nc: "NC 35-40",
                                                },
                                                "conference-room": {
                                                    name: "Conference Room",
                                                    targetRT60: 0.5,
                                                    range: "0.4-0.6s",
                                                    focus: "Speech Clarity",
                                                    nc: "NC 25-30",
                                                },
                                                "living-room": {
                                                    name: "Living Room (HiFi)",
                                                    targetRT60: 0.5,
                                                    range: "0.4-0.6s",
                                                    focus: "Balanced Listening",
                                                    nc: "NC 30-35",
                                                },
                                            },
                                            g = p[L] || p["control-room"],
                                            b = g.targetRT60,
                                            f = Math.round(2e3 * Math.sqrt(b / u)),
                                            y = 2 * (i * n + n * o + i * o),
                                            j = (4 * u) / y,
                                            _ = [o, n, i].sort((e, t) => e - t),
                                            v = _[1] / _[0],
                                            N = _[2] / _[0];
                                        let w = "poor",
                                            C = null;
                                        [
                                            { w: 1.14, l: 1.39 },
                                            { w: 1.28, l: 1.54 },
                                            { w: 1.6, l: 2.33 },
                                        ].forEach((e) => {
                                            const t = Math.sqrt(Math.pow(v - e.w, 2) + Math.pow(N - e.l, 2));
                                            t < 0.3 ? (w = "good") : t < 0.5 && "good" !== w && (w = "acceptable"),
                                                (!C || t < C.distance) && (C = { ...e, distance: t });
                                        });
                                        const k = Math.abs(v - 1) < 0.1 && Math.abs(N - 1) < 0.1,
                                            R = Math.abs(N - 2) < 0.15 && Math.abs(v - 1) < 0.15,
                                            A = Math.abs(N - 2) < 0.15 && Math.abs(v - 2) < 0.15,
                                            I = Math.abs(N - 4) < 0.2 && Math.abs(v - 2) < 0.15,
                                            F = Math.abs(N - 2) < 0.15 && Math.abs(v - 1) < 0.15;
                                        (k || R || A || I || F) && (w = "problematic");
                                        const T = (0.161 * u) / b,
                                            H = 0.1 * y,
                                            U = Math.max(0, T - H),
                                            $ = 0.38 * i,
                                            W = n / 2,
                                            V = ((2 * W) / e) * 1e3;
                                        let O = [],
                                            z = "";
                                        z =
                                            M < 60
                                                ? "sub-bass"
                                                : M < 250
                                                  ? "bass"
                                                  : M < 500
                                                    ? "low-mid"
                                                    : M < 2e3
                                                      ? "mid"
                                                      : M < 6e3
                                                        ? "high-mid"
                                                        : "high";
                                        const G = t / 4,
                                            X = 100 * G,
                                            J = 39.37 * G,
                                            Q = M < f,
                                            K = [...c, ...m, ...x].map((e) => e.frequency).sort((e, t) => e - t),
                                            Y = [];
                                        for (let e = 0; e < K.length - 1; e++)
                                            Math.abs(K[e] - K[e + 1]) <= 5 && Y.push(Math.round((K[e] + K[e + 1]) / 2));
                                        if (
                                            ("sub-bass" === z
                                                ? (O.push({
                                                      type: "critical",
                                                      icon: "üî¥",
                                                      title: "Sub-Bass Treatment Challenge",
                                                      text: `At ${M} Hz (Œª = ${t.toFixed(2)}m), wavelengths are very long. Porous absorbers would need to be ${Math.round(X)} cm (${Math.round(J)}") deep to be effective.`,
                                                  }),
                                                  O.push({
                                                      type: "recommendation",
                                                      icon: "üí°",
                                                      title: "Recommended Solutions",
                                                      text: "Use membrane/panel bass traps tuned to this frequency, Helmholtz resonators, or room dimension ratios. Corner-loaded diaphragmatic absorbers are most space-efficient.",
                                                  }),
                                                  O.push({
                                                      type: "placement",
                                                      icon: "üìç",
                                                      title: "Optimal Placement",
                                                      text: `Place treatment at ${G.toFixed(2)}m (${Math.round(J)}") from walls for maximum pressure zone absorption.`,
                                                  }))
                                                : "bass" === z
                                                  ? (O.push({
                                                        type: "info",
                                                        icon: "üéµ",
                                                        title: "Bass Frequency Range",
                                                        text: `${M} Hz is in the bass range. This frequency ${Q ? "is below" : "is near"} the Schroeder frequency (${f} Hz), meaning ${Q ? "discrete room modes dominate" : "transitional modal/diffuse behavior"}.`,
                                                    }),
                                                    O.push({
                                                        type: "recommendation",
                                                        icon: "üß±",
                                                        title: "Bass Trap Specifications",
                                                        text: `Porous bass traps need minimum ${Math.round(X)} cm (${Math.round(J)}") depth. 6" (15cm) thick corner traps with air gap can extend effectiveness. Rockwool/mineral wool density: 40-80 kg/m¬≥.`,
                                                    }),
                                                    O.push({
                                                        type: "placement",
                                                        icon: "üìç",
                                                        title: "Corner Placement",
                                                        text: "Tri-corner placement (floor-wall-wall junction) is 35% more effective than flat wall mounting. Stack bass traps floor to ceiling in room corners.",
                                                    }))
                                                  : "low-mid" === z
                                                    ? (O.push({
                                                          type: "info",
                                                          icon: "üéµ",
                                                          title: "Low-Mid Frequency Range",
                                                          text: `${M} Hz requires thicker treatment than standard panels. This range often contains voice fundamentals and kick drum body.`,
                                                      }),
                                                      O.push({
                                                          type: "recommendation",
                                                          icon: "üì¶",
                                                          title: "Panel Specifications",
                                                          text: `Minimum 4" (10cm) thick broadband absorbers required. For full effectiveness at ${M} Hz, use ${Math.round(J)}" depth or add air gap behind panels equal to panel thickness.`,
                                                      }),
                                                      O.push({
                                                          type: "tip",
                                                          icon: "‚úÖ",
                                                          title: "Effective Products",
                                                          text: 'Thick fiberglass panels (703/705 series), rockwool absorbers, or DIY frames with 4-6" mineral wool. NRC rating > 1.0 at 250 Hz recommended.',
                                                      }))
                                                    : "mid" === z
                                                      ? (O.push({
                                                            type: "info",
                                                            icon: "üéµ",
                                                            title: "Mid Frequency Range",
                                                            text: `${M} Hz is efficiently absorbed by standard acoustic panels. This critical speech intelligibility range benefits from first reflection point treatment.`,
                                                        }),
                                                        O.push({
                                                            type: "recommendation",
                                                            icon: "üì¶",
                                                            title: "Panel Specifications",
                                                            text: `Standard 2" (5cm) acoustic panels effective. For ${M} Hz, Œª/4 = ${Math.round(X)} cm (${J.toFixed(1)}"). Panels should have NRC ‚â• 0.85.`,
                                                        }),
                                                        O.push({
                                                            type: "placement",
                                                            icon: "üìç",
                                                            title: "Key Locations",
                                                            text: "First reflection points on side walls, ceiling cloud above listening position, and rear wall treatment. Use mirror trick: place panel where you see speakers reflected.",
                                                        }),
                                                        M > 1e3 &&
                                                            O.push({
                                                                type: "diffusion",
                                                                icon: "üåÄ",
                                                                title: "Diffusion Option",
                                                                text: `Diffusion becomes effective at ${M} Hz. QRD diffusers with well depth of ${Math.round(50 * t)} cm can scatter this frequency. Consider rear wall diffusion to maintain room liveliness.`,
                                                            }))
                                                      : "high-mid" === z
                                                        ? (O.push({
                                                              type: "info",
                                                              icon: "üéµ",
                                                              title: "High-Mid Frequency Range",
                                                              text: `${M} Hz is easily controlled. Even thin materials (1-2") provide significant absorption. Risk of over-damping the room.`,
                                                          }),
                                                          O.push({
                                                              type: "recommendation",
                                                              icon: "üåÄ",
                                                              title: "Diffusion Recommended",
                                                              text: `Diffusion is highly effective at ${M} Hz. Recommended diffuser depth: ${Math.round(X)} cm minimum. Skyline/QRD diffusers work well on rear walls.`,
                                                          }),
                                                          O.push({
                                                              type: "warning",
                                                              icon: "‚ö†Ô∏è",
                                                              title: "Avoid Over-Absorption",
                                                              text: 'Too much high-frequency absorption creates a "dead" room. Balance absorption with diffusion. Target 0.3-0.5s RT60 for control rooms, 0.4-0.6s for home studios.',
                                                          }))
                                                        : (O.push({
                                                              type: "info",
                                                              icon: "üéµ",
                                                              title: "High Frequency Range",
                                                              text: `${M} Hz (Œª = ${s.toFixed(1)} cm) is absorbed by virtually any porous material including carpet, curtains, and furniture.`,
                                                          }),
                                                          O.push({
                                                              type: "recommendation",
                                                              icon: "üåÄ",
                                                              title: "Diffusion Optimal",
                                                              text: "Use diffusion to scatter high frequencies while preserving energy. Small-scale diffusers (5-10cm depth) are effective. Polycylindrical diffusers add warmth.",
                                                          }),
                                                          O.push({
                                                              type: "warning",
                                                              icon: "‚ö†Ô∏è",
                                                              title: "Preserve Air & Brightness",
                                                              text: 'High frequencies give a room "air" and detail. Excessive absorption makes rooms sound dull. Use absorbers sparingly at first reflection points only.',
                                                          })),
                                            Q)
                                        ) {
                                            const e = 5,
                                                t = [];
                                            c.forEach((s) => {
                                                Math.abs(s.frequency - M) <= e &&
                                                    t.push(`Length ${s.label} (${s.frequency} Hz)`);
                                            }),
                                                m.forEach((s) => {
                                                    Math.abs(s.frequency - M) <= e &&
                                                        t.push(`Width ${s.label} (${s.frequency} Hz)`);
                                                }),
                                                x.forEach((s) => {
                                                    Math.abs(s.frequency - M) <= e &&
                                                        t.push(`Height ${s.label} (${s.frequency} Hz)`);
                                                }),
                                                t.length > 0 &&
                                                    O.push({
                                                        type: "modal",
                                                        icon: "üéØ",
                                                        title: "Room Mode Match Detected!",
                                                        text: `${M} Hz coincides with room mode(s): ${t.join(", ")}. This frequency will have significant peaks and nulls in the room. Targeted treatment strongly recommended.`,
                                                    });
                                        }
                                        Y.length > 0 &&
                                            M < 300 &&
                                            O.push({
                                                type: "warning",
                                                icon: "‚ö†Ô∏è",
                                                title: "Mode Clustering Detected",
                                                text: `Room has clustered modes near ${Y.slice(0, 3).join(", ")} Hz. These frequencies will have exaggerated bass response. Prioritize broadband bass trapping in corners.`,
                                            }),
                                            u < 30
                                                ? O.push({
                                                      type: "room",
                                                      icon: "üìê",
                                                      title: "Small Room Consideration",
                                                      text: `Room volume (${u.toFixed(1)} m¬≥) is small. Modal problems will be more pronounced. Consider bass traps in all corners and avoid placing speakers/listeners at room center or against walls.`,
                                                  })
                                                : u > 200 &&
                                                  O.push({
                                                      type: "room",
                                                      icon: "üìê",
                                                      title: "Large Room Consideration",
                                                      text: `Room volume (${u.toFixed(1)} m¬≥) is large. Modal density is higher, making broadband treatment more effective than narrow-band solutions. Consider distributed absorber placement.`,
                                                  }),
                                            O.push({
                                                type: "purpose",
                                                icon: "üéØ",
                                                title: `${g.name} Requirements (ISO 3382)`,
                                                text: `Target RT60: ${g.range}. Treatment focus: ${g.focus}. Background noise target: ${g.nc}.`,
                                            }),
                                            "problematic" === w
                                                ? O.push({
                                                      type: "warning",
                                                      icon: "‚ö†Ô∏è",
                                                      title: "Problematic Room Ratios (Bolt Area)",
                                                      text: `Room ratios (1:${v.toFixed(2)}:${N.toFixed(2)}) are ${k ? "cubic" : "harmonic multiples"}, causing severe mode clustering. Consider room treatment or dimension changes. Bass problems will be significant.`,
                                                  })
                                                : "acceptable" === w &&
                                                  O.push({
                                                      type: "info",
                                                      icon: "‚ÑπÔ∏è",
                                                      title: "Room Ratios (Bolt Area)",
                                                      text: `Room ratios (1:${v.toFixed(2)}:${N.toFixed(2)}) are acceptable but not optimal. Closest Bolt ratio: 1:${C.w}:${C.l}. Some mode clustering expected.`,
                                                  }),
                                            (g.name.includes("Control") ||
                                                g.name.includes("Studio") ||
                                                g.name.includes("Theater")) &&
                                                O.push({
                                                    type: "reflection",
                                                    icon: "ü™û",
                                                    title: "First Reflection Points (ITU-R BS.1116)",
                                                    text: `ITDG: ${V.toFixed(1)}ms. Treat side walls at ${(W * ("ft" === B ? 3.28 : 1)).toFixed(1)}${B} from listener. Use mirror trick to locate exact points. Ceiling cloud recommended.`,
                                                }),
                                            q({
                                                frequency: M,
                                                speedOfSound: Math.round(10 * e) / 10,
                                                wavelengthM: Math.round(1e3 * t) / 1e3,
                                                wavelengthCm: Math.round(10 * s) / 10,
                                                wavelengthFt: Math.round(100 * a) / 100,
                                                wavelengthIn: Math.round(10 * r) / 10,
                                                lengthModes: c,
                                                widthModes: m,
                                                heightModes: x,
                                                schroederFreq: f,
                                                volumeM3: Math.round(10 * u) / 10,
                                                volumeFt3: Math.round(h),
                                                roomDimensionUnit: B,
                                                treatmentRec: O,
                                                freqBand: z,
                                                quarterWavelengthCm: Math.round(10 * X) / 10,
                                                quarterWavelengthIn: Math.round(10 * J) / 10,
                                                isBelowSchroeder: Q,
                                                purposeInfo: g,
                                                surfaceArea: Math.round(10 * y) / 10,
                                                meanFreePath: Math.round(100 * j) / 100,
                                                roomRatios: { w: v.toFixed(2), l: N.toFixed(2), quality: w },
                                                requiredAbsorption: Math.round(T),
                                                additionalAbsorptionNeeded: Math.round(U),
                                                firstReflectionTime: Math.round(10 * V) / 10,
                                                listenerPosition: Math.round($ * ("ft" === B ? 3.28 : 1) * 10) / 10,
                                            });
                                    },
                                    className:
                                        "w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 rounded-lg cursor-pointer",
                                    children: "Calculate Wavelength & Room Modes",
                                }),
                            ],
                        }),
                        U &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsx("h2", {
                                        className: "text-xl font-semibold mb-6",
                                        children: "Wavelength Results",
                                    }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-4 gap-4 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className:
                                                    "bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-200 dark:border-green-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Wavelength",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-green-700",
                                                        children: [
                                                            "ft" === U.roomDimensionUnit
                                                                ? U.wavelengthFt + " ft"
                                                                : U.wavelengthM + " m",
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            "ft" === U.roomDimensionUnit
                                                                ? U.wavelengthIn + " in"
                                                                : U.wavelengthCm + " cm",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Speed of Sound",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-blue-700",
                                                        children: [
                                                            "ft" === U.roomDimensionUnit
                                                                ? Math.round(3.28084 * U.speedOfSound) + " ft/s"
                                                                : U.speedOfSound + " m/s",
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: ["at ", S, "¬∞C"],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border-2 border-purple-200 dark:border-purple-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Schroeder Frequency",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-purple-700",
                                                        children: [U.schroederFreq, " Hz"],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: "Modal/diffuse transition",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border-2 border-orange-200 dark:border-orange-800 text-center",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Room Volume",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-orange-700",
                                                        children: [
                                                            "ft" === U.roomDimensionUnit
                                                                ? U.volumeFt3 + " ft¬≥"
                                                                : U.volumeM3 + " m¬≥",
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            "ft" === U.roomDimensionUnit
                                                                ? U.volumeM3 + " m¬≥"
                                                                : U.volumeFt3 + " ft¬≥",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    U.purposeInfo &&
                                        _jsxs("div", {
                                            className: "mb-6 p-4 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-800",
                                            children: [
                                                _jsxs("h3", {
                                                    className:
                                                        "font-semibold text-indigo-800 dark:text-indigo-200 mb-3 flex items-center gap-2",
                                                    children: ["üè† Room Analysis - ", U.purposeInfo.name],
                                                }),
                                                _jsxs("div", {
                                                    className: "grid sm:grid-cols-2 md:grid-cols-4 gap-3",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "bg-white dark:bg-gray-800 p-3 rounded border text-center",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: "Target RT60",
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-lg font-bold text-indigo-700",
                                                                    children: U.purposeInfo.range,
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children: "ISO 3382",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "bg-white dark:bg-gray-800 p-3 rounded border text-center",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: "NC Rating Target",
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-lg font-bold text-indigo-700",
                                                                    children: U.purposeInfo.nc,
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children: "ANSI S12.2",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className:
                                                                "bg-white dark:bg-gray-800 p-3 rounded border text-center " +
                                                                ("problematic" === U.roomRatios?.quality
                                                                    ? "border-red-300"
                                                                    : "good" === U.roomRatios?.quality
                                                                      ? "border-green-300"
                                                                      : ""),
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: "Room Ratios (Bolt)",
                                                                }),
                                                                _jsxs("div", {
                                                                    className:
                                                                        "text-sm font-bold " +
                                                                        ("problematic" === U.roomRatios?.quality
                                                                            ? "text-red-600"
                                                                            : "good" === U.roomRatios?.quality
                                                                              ? "text-green-600"
                                                                              : "text-indigo-700"),
                                                                    children: [
                                                                        "1:",
                                                                        U.roomRatios?.w,
                                                                        ":",
                                                                        U.roomRatios?.l,
                                                                    ],
                                                                }),
                                                                _jsx("div", {
                                                                    className:
                                                                        "text-xs " +
                                                                        ("problematic" === U.roomRatios?.quality
                                                                            ? "text-red-500"
                                                                            : "good" === U.roomRatios?.quality
                                                                              ? "text-green-500"
                                                                              : "text-gray-400"),
                                                                    children:
                                                                        "problematic" === U.roomRatios?.quality
                                                                            ? "‚ö†Ô∏è Problematic"
                                                                            : "good" === U.roomRatios?.quality
                                                                              ? "‚úÖ Good"
                                                                              : "Acceptable",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "bg-white dark:bg-gray-800 p-3 rounded border text-center",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                                    children: "First Reflection",
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-lg font-bold text-indigo-700",
                                                                    children: [U.firstReflectionTime, " ms"],
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-gray-400",
                                                                    children: "ITDG",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "mt-3 grid sm:grid-cols-3 gap-3 text-sm",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2",
                                                            children: [
                                                                _jsx("span", {
                                                                    className: "text-gray-500 dark:text-gray-400",
                                                                    children: "Surface Area:",
                                                                }),
                                                                _jsxs("span", {
                                                                    className: "font-medium",
                                                                    children: [U.surfaceArea, " m¬≤"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2",
                                                            children: [
                                                                _jsx("span", {
                                                                    className: "text-gray-500 dark:text-gray-400",
                                                                    children: "Mean Free Path:",
                                                                }),
                                                                _jsxs("span", {
                                                                    className: "font-medium",
                                                                    children: [U.meanFreePath, " m"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2",
                                                            children: [
                                                                _jsx("span", {
                                                                    className: "text-gray-500 dark:text-gray-400",
                                                                    children: "Listener Position:",
                                                                }),
                                                                _jsxs("span", {
                                                                    className: "font-medium",
                                                                    children: [
                                                                        U.listenerPosition,
                                                                        " ",
                                                                        U.roomDimensionUnit,
                                                                        " from front (38% rule)",
                                                                    ],
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "mt-2 text-xs text-indigo-600",
                                                    children: U.purposeInfo.focus,
                                                }),
                                            ],
                                        }),
                                    _jsxs("div", {
                                        className: "mb-6 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border",
                                        children: [
                                            _jsx("h3", {
                                                className: "font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",
                                                children: "„Ä∞Ô∏è Waveform Visualization",
                                            }),
                                            _jsx("div", {
                                                className: "bg-white dark:bg-gray-800 rounded-lg border p-2 sm:p-4 overflow-hidden",
                                                children: (() => {
                                                    const e = "undefined" != typeof window && window.innerWidth < 640,
                                                        t = e ? 300 : 500,
                                                        s = e ? 120 : 150,
                                                        a = e ? 30 : 40,
                                                        r = (s - 2 * a) / 2,
                                                        l = t - 2 * a,
                                                        i = U.frequency,
                                                        n = 1 / i,
                                                        o = i < 100 ? 1 : i < 500 ? 1.5 : i < 2e3 ? 2 : 3,
                                                        d = [];
                                                    for (let e = 0; e <= 200; e++) {
                                                        const t = a + (e / 200) * l,
                                                            i = (e / 200) * o * 2 * Math.PI,
                                                            n = s / 2 - Math.sin(i) * r * 0.85;
                                                        d.push(
                                                            `${0 === e ? "M" : "L"} ${t.toFixed(2)} ${n.toFixed(2)}`
                                                        );
                                                    }
                                                    const c = d.join(" "),
                                                        m = l / o,
                                                        x =
                                                            "ft" === U.roomDimensionUnit
                                                                ? U.wavelengthFt + " ft"
                                                                : U.wavelengthM + " m";
                                                    return _jsxs("svg", {
                                                        viewBox: `0 0 ${t} ${s}`,
                                                        className: "w-full h-auto max-h-40",
                                                        style: {
                                                            maxWidth: t + "px",
                                                            margin: "0 auto",
                                                            display: "block",
                                                        },
                                                        children: [
                                                            _jsx("line", {
                                                                x1: a,
                                                                y1: s / 2,
                                                                x2: t - a,
                                                                y2: s / 2,
                                                                stroke: "#e5e7eb",
                                                                strokeWidth: "1",
                                                                strokeDasharray: "4,4",
                                                            }),
                                                            _jsx("line", {
                                                                x1: a,
                                                                y1: a,
                                                                x2: a,
                                                                y2: s - a,
                                                                stroke: "#e5e7eb",
                                                                strokeWidth: "1",
                                                            }),
                                                            _jsx("line", {
                                                                x1: a,
                                                                y1: s / 2,
                                                                x2: t - a,
                                                                y2: s / 2,
                                                                stroke: "#9ca3af",
                                                                strokeWidth: "1",
                                                            }),
                                                            _jsx("path", {
                                                                d: c,
                                                                fill: "none",
                                                                stroke: "#10b981",
                                                                strokeWidth: e ? "2" : "2.5",
                                                                strokeLinecap: "round",
                                                            }),
                                                            _jsx("line", {
                                                                x1: a,
                                                                y1: s - a + 10,
                                                                x2: a + m,
                                                                y2: s - a + 10,
                                                                stroke: "#6366f1",
                                                                strokeWidth: "2",
                                                            }),
                                                            _jsx("line", {
                                                                x1: a,
                                                                y1: s - a + 5,
                                                                x2: a,
                                                                y2: s - a + 15,
                                                                stroke: "#6366f1",
                                                                strokeWidth: "2",
                                                            }),
                                                            _jsx("line", {
                                                                x1: a + m,
                                                                y1: s - a + 5,
                                                                x2: a + m,
                                                                y2: s - a + 15,
                                                                stroke: "#6366f1",
                                                                strokeWidth: "2",
                                                            }),
                                                            _jsx("text", {
                                                                x: a + m / 2,
                                                                y: s - 5,
                                                                textAnchor: "middle",
                                                                fontSize: e ? "10" : "12",
                                                                fill: "#6366f1",
                                                                fontWeight: "600",
                                                                children: "Œª = " + x,
                                                            }),
                                                            _jsx("text", {
                                                                x: a - 5,
                                                                y: a + 5,
                                                                textAnchor: "end",
                                                                fontSize: e ? "8" : "10",
                                                                fill: "#9ca3af",
                                                                children: "+1",
                                                            }),
                                                            _jsx("text", {
                                                                x: a - 5,
                                                                y: s / 2 + 3,
                                                                textAnchor: "end",
                                                                fontSize: e ? "8" : "10",
                                                                fill: "#9ca3af",
                                                                children: "0",
                                                            }),
                                                            _jsx("text", {
                                                                x: a - 5,
                                                                y: s - a,
                                                                textAnchor: "end",
                                                                fontSize: e ? "8" : "10",
                                                                fill: "#9ca3af",
                                                                children: "-1",
                                                            }),
                                                            _jsx("text", {
                                                                x: t - a,
                                                                y: a - 5,
                                                                textAnchor: "end",
                                                                fontSize: e ? "10" : "11",
                                                                fill: "#6b7280",
                                                                children: i + " Hz",
                                                            }),
                                                            o >= 1 &&
                                                                _jsxs("g", {
                                                                    children: [
                                                                        _jsx("line", {
                                                                            x1: a,
                                                                            y1: a - 8,
                                                                            x2: a + m,
                                                                            y2: a - 8,
                                                                            stroke: "#f59e0b",
                                                                            strokeWidth: "1.5",
                                                                            strokeDasharray: "3,2",
                                                                        }),
                                                                        _jsx("text", {
                                                                            x: a + m / 2,
                                                                            y: a - 12,
                                                                            textAnchor: "middle",
                                                                            fontSize: e ? "8" : "9",
                                                                            fill: "#f59e0b",
                                                                            children:
                                                                                "T = " +
                                                                                (n >= 0.001
                                                                                    ? (1e3 * n).toFixed(2) + " ms"
                                                                                    : (1e6 * n).toFixed(1) + " ¬µs"),
                                                                        }),
                                                                    ],
                                                                }),
                                                        ],
                                                    });
                                                })(),
                                            }),
                                            _jsxs("div", {
                                                className: "mt-3 grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                style: {
                                                                    width: "12px",
                                                                    height: "3px",
                                                                    backgroundColor: "#10b981",
                                                                    borderRadius: "2px",
                                                                },
                                                            }),
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Sound wave",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                style: {
                                                                    width: "12px",
                                                                    height: "3px",
                                                                    backgroundColor: "#6366f1",
                                                                    borderRadius: "2px",
                                                                },
                                                            }),
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Wavelength (Œª)",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                style: {
                                                                    width: "12px",
                                                                    height: "3px",
                                                                    backgroundColor: "#f59e0b",
                                                                    borderRadius: "2px",
                                                                    borderStyle: "dashed",
                                                                },
                                                            }),
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Period (T)",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: ["Œª = v/f = ", U.speedOfSound, "/", U.frequency],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-gray-500 dark:text-gray-400 mt-2",
                                                children:
                                                    "A pure sine wave at the specified frequency. Real audio contains multiple frequencies (harmonics) that combine to create complex waveforms. The wavelength (Œª) represents one complete cycle of pressure variation in air.",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "mb-6",
                                        children: [
                                            _jsx("h3", {
                                                className: "font-semibold text-gray-700 dark:text-gray-300 mb-2",
                                                children: "Room Axial Modes",
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-gray-500 dark:text-gray-400 mb-2",
                                                children:
                                                    "Axial modes are resonant frequencies where sound waves bounce between two parallel surfaces. At these frequencies, standing waves form causing peaks and nulls in the room's frequency response. Modes below the Schroeder frequency are particularly problematic and benefit from bass trapping.",
                                            }),
                                            _jsxs("p", {
                                                className: "text-xs text-blue-600 mb-3",
                                                children: [
                                                    _jsx("strong", { children: "üí° Practical Use:" }),
                                                    " Use these frequencies to tune parametric EQ cuts on subwoofers, identify where to place bass traps (corners absorb all three axial modes), and avoid placing speakers/listeners at room dimension midpoints where nulls occur. For critical listening rooms, look for mode clustering‚Äîmultiple modes within 5 Hz indicate problem areas.",
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "grid md:grid-cols-3 gap-4",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",
                                                        children: [
                                                            _jsx("h4", {
                                                                className: "font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                                children: "Length Modes",
                                                            }),
                                                            _jsx("div", {
                                                                className: "space-y-1",
                                                                children: U.lengthModes.map((e) =>
                                                                    _jsxs(
                                                                        "div",
                                                                        {
                                                                            className: "text-sm flex justify-between",
                                                                            children: [
                                                                                _jsx("span", { className: "text-gray-700 dark:text-gray-300", children: e.label }),
                                                                                _jsxs("span", {
                                                                                    className: "font-medium",
                                                                                    children: [e.frequency, " Hz"],
                                                                                }),
                                                                            ],
                                                                        },
                                                                        e.label
                                                                    )
                                                                ),
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",
                                                        children: [
                                                            _jsx("h4", {
                                                                className: "font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                                children: "Width Modes",
                                                            }),
                                                            _jsx("div", {
                                                                className: "space-y-1",
                                                                children: U.widthModes.map((e) =>
                                                                    _jsxs(
                                                                        "div",
                                                                        {
                                                                            className: "text-sm flex justify-between",
                                                                            children: [
                                                                                _jsx("span", { className: "text-gray-700 dark:text-gray-300", children: e.label }),
                                                                                _jsxs("span", {
                                                                                    className: "font-medium",
                                                                                    children: [e.frequency, " Hz"],
                                                                                }),
                                                                            ],
                                                                        },
                                                                        e.label
                                                                    )
                                                                ),
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "bg-gray-50 dark:bg-gray-900/50 p-3 rounded-lg border",
                                                        children: [
                                                            _jsx("h4", {
                                                                className: "font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                                children: "Height Modes",
                                                            }),
                                                            _jsx("div", {
                                                                className: "space-y-1",
                                                                children: U.heightModes.map((e) =>
                                                                    _jsxs(
                                                                        "div",
                                                                        {
                                                                            className: "text-sm flex justify-between",
                                                                            children: [
                                                                                _jsx("span", { className: "text-gray-700 dark:text-gray-300", children: e.label }),
                                                                                _jsxs("span", {
                                                                                    className: "font-medium",
                                                                                    children: [e.frequency, " Hz"],
                                                                                }),
                                                                            ],
                                                                        },
                                                                        e.label
                                                                    )
                                                                ),
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    U.treatmentRec.length > 0 &&
                                        _jsxs("div", {
                                            className: "space-y-3",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex items-center justify-between",
                                                    children: [
                                                        _jsx("h3", {
                                                            className: "font-semibold text-gray-800 text-lg",
                                                            children: "üîä Acoustic Treatment Recommendations",
                                                        }),
                                                        _jsxs("span", {
                                                            className:
                                                                "text-xs px-2 py-1 rounded-full font-medium " +
                                                                ("sub-bass" === U.freqBand || "bass" === U.freqBand
                                                                    ? "bg-red-100 text-red-700"
                                                                    : "low-mid" === U.freqBand
                                                                      ? "bg-orange-100 text-orange-700"
                                                                      : "mid" === U.freqBand
                                                                        ? "bg-green-100 text-green-700"
                                                                        : "bg-blue-100 text-blue-700"),
                                                            children: [
                                                                U.freqBand.charAt(0).toUpperCase() +
                                                                    U.freqBand.slice(1),
                                                                " Range",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "grid sm:grid-cols-3 gap-3 mb-4",
                                                    children: [
                                                        _jsxs("div", {
                                                            className:
                                                                "bg-indigo-50 dark:bg-indigo-900/20 p-3 rounded-lg border border-indigo-200 dark:border-indigo-800 text-center",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-indigo-600 font-medium",
                                                                    children: "Min Absorber Depth (Œª/4)",
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-lg font-bold text-indigo-700",
                                                                    children: [U.quarterWavelengthCm, " cm"],
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-xs text-indigo-500",
                                                                    children: [U.quarterWavelengthIn, '"'],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className:
                                                                "p-3 rounded-lg border text-center " +
                                                                (U.isBelowSchroeder
                                                                    ? "bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"
                                                                    : "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"),
                                                            children: [
                                                                _jsx("div", {
                                                                    className:
                                                                        "text-xs font-medium " +
                                                                        (U.isBelowSchroeder
                                                                            ? "text-amber-600"
                                                                            : "text-green-600"),
                                                                    children: "Acoustic Behavior",
                                                                }),
                                                                _jsx("div", {
                                                                    className:
                                                                        "text-sm font-bold " +
                                                                        (U.isBelowSchroeder
                                                                            ? "text-amber-700"
                                                                            : "text-green-700"),
                                                                    children: U.isBelowSchroeder
                                                                        ? "Modal Region"
                                                                        : "Diffuse Field",
                                                                }),
                                                                _jsxs("div", {
                                                                    className:
                                                                        "text-xs " +
                                                                        (U.isBelowSchroeder
                                                                            ? "text-amber-500"
                                                                            : "text-green-500"),
                                                                    children: [
                                                                        U.isBelowSchroeder ? "Below" : "Above",
                                                                        " Schroeder (",
                                                                        U.schroederFreq,
                                                                        " Hz)",
                                                                    ],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className:
                                                                "bg-purple-50 dark:bg-purple-900/20 p-3 rounded-lg border border-purple-200 dark:border-purple-800 text-center",
                                                            children: [
                                                                _jsx("div", {
                                                                    className: "text-xs text-purple-600 font-medium",
                                                                    children: "Diffuser Min Depth",
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "text-lg font-bold text-purple-700",
                                                                    children: [Math.round(U.wavelengthCm / 4), " cm"],
                                                                }),
                                                                _jsx("div", {
                                                                    className: "text-xs text-purple-500",
                                                                    children: "For effective scattering",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "space-y-2",
                                                    children: U.treatmentRec.map((e, t) =>
                                                        _jsx(
                                                            "div",
                                                            {
                                                                className:
                                                                    "p-3 rounded-lg border " +
                                                                    ("critical" === e.type
                                                                        ? "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"
                                                                        : "warning" === e.type
                                                                          ? "bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800"
                                                                          : "modal" === e.type
                                                                            ? "bg-purple-50 dark:bg-purple-900/20 border-purple-200 dark:border-purple-800"
                                                                            : "room" === e.type
                                                                              ? "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700"
                                                                              : "diffusion" === e.type
                                                                                ? "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"
                                                                                : "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"),
                                                                children: _jsxs("div", {
                                                                    className: "flex gap-2",
                                                                    children: [
                                                                        _jsx("span", {
                                                                            className: "text-lg",
                                                                            children: e.icon,
                                                                        }),
                                                                        _jsxs("div", {
                                                                            children: [
                                                                                _jsx("div", {
                                                                                    className:
                                                                                        "font-semibold text-sm " +
                                                                                        ("critical" === e.type
                                                                                            ? "text-red-800 dark:text-red-200"
                                                                                            : "warning" === e.type
                                                                                              ? "text-amber-800 dark:text-amber-200"
                                                                                              : "modal" === e.type
                                                                                                ? "text-purple-800 dark:text-purple-200"
                                                                                                : "room" === e.type
                                                                                                  ? "text-gray-800"
                                                                                                  : "diffusion" ===
                                                                                                      e.type
                                                                                                    ? "text-blue-800 dark:text-blue-200"
                                                                                                    : "text-green-800 dark:text-green-200"),
                                                                                    children: e.title,
                                                                                }),
                                                                                _jsx("div", {
                                                                                    className:
                                                                                        "text-sm " +
                                                                                        ("critical" === e.type
                                                                                            ? "text-red-700"
                                                                                            : "warning" === e.type
                                                                                              ? "text-amber-700"
                                                                                              : "modal" === e.type
                                                                                                ? "text-purple-700"
                                                                                                : "room" === e.type
                                                                                                  ? "text-gray-700 dark:text-gray-300"
                                                                                                  : "diffusion" ===
                                                                                                      e.type
                                                                                                    ? "text-blue-700"
                                                                                                    : "text-green-700"),
                                                                                    children: e.text,
                                                                                }),
                                                                            ],
                                                                        }),
                                                                    ],
                                                                }),
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                                _jsxs("div", {
                                                    className: "mt-4 p-3 bg-gray-100 dark:bg-gray-700 rounded-lg text-xs text-gray-600 dark:text-gray-300",
                                                    children: [
                                                        _jsx("strong", { children: "Standards Reference: " }),
                                                        "Recommendations based on AES/IEC acoustic treatment guidelines, Schroeder diffuser theory, and the Œª/4 absorption rule. For professional applications, consult an acoustic engineer.",
                                                    ],
                                                }),
                                            ],
                                        }),
                                ],
                            }),
                    ],
                }),
        ],
    });
}
function POECalculator() {
    const [e, t] = useState(0),
        [s, a] = useState(0),
        [r, l] = useState(0),
        [i, n] = useState(0),
        [o, d] = useState(20),
        [c, m] = useState(50),
        [x, u] = useState(null),
        [h, p] = useState(!1),
        [cableLength, setCableLength] = useState(50),
        [cableType, setCableType] = useState("cat6"),
        [lengthUnit, setLengthUnit] = useState("m"),
        g = (e) => (t) => {
            if ("" === t.target.value) return void e("");
            const s = "" === t.target.value ? "" : parseInt(t.target.value);
            e(Math.max(0, s));
        },
        b = e + s + r + i,
        // Convert display length to meters for calculation
        cableLengthM = lengthUnit === "ft" ? cableLength / 3.28084 : cableLength,
        // Convert meters to feet for display
        displayLengthFt = Math.round(cableLength * 3.28084),
        displayLengthM = Math.round(cableLength / 3.28084);
    return _jsxs("div", {
        className: "max-w-4xl mx-auto px-6 py-8",
        children: [
            _jsxs("div", {
                className: "flex items-center justify-between mb-6",
                children: [
                    _jsx("h1", { className: "text-3xl font-bold text-gray-900 dark:text-gray-100", children: "POE Budget Calculator" }),
                    b > 0 &&
                        _jsx("button", {
                            onClick: () => p(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: h,
                onConfirm: () => {
                    t(0), a(0), l(0), n(0), d(20), m(50), u(null), p(!1), setCableLength(50), setCableType("cat6"), setLengthUnit("m");
                },
                onCancel: () => p(!1),
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Calculates total Power over Ethernet requirements for your network. Enter the count of devices by PoE type (PoE, PoE+, PoE++, 4PPoE) to determine the total wattage needed and recommended switch power budget with headroom.",
                    ],
                }),
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                children: [
                    _jsx("h2", {
                        className: "text-lg font-semibold text-gray-800 mb-4",
                        children: "Device Count by POE Type",
                    }),
                    _jsxs("div", {
                        className: "grid md:grid-cols-2 gap-6",
                        children: [
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "POE Devices (15.4W each)",
                                    }),
                                    _jsxs("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            _jsx("input", {
                                                type: "number",
                                                min: "0",
                                                value: e,
                                                onChange: g(t),
                                                className: "w-full px-4 py-2 border rounded-lg text-lg font-medium dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                placeholder: "0",
                                            }),
                                            _jsxs("span", {
                                                className: "text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",
                                                children: ["= ", (15.4 * e).toFixed(1), "W"],
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "IP phones, basic cameras, small APs",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "POE+ Devices (30W each)",
                                    }),
                                    _jsxs("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            _jsx("input", {
                                                type: "number",
                                                min: "0",
                                                value: s,
                                                onChange: g(a),
                                                className: "w-full px-4 py-2 border rounded-lg text-lg font-medium dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                placeholder: "0",
                                            }),
                                            _jsxs("span", {
                                                className: "text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",
                                                children: ["= ", (30 * s).toFixed(1), "W"],
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "PTZ cameras, video phones, advanced APs",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "POE++ Devices (60W each)",
                                    }),
                                    _jsxs("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            _jsx("input", {
                                                type: "number",
                                                min: "0",
                                                value: r,
                                                onChange: g(l),
                                                className: "w-full px-4 py-2 border rounded-lg text-lg font-medium dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                placeholder: "0",
                                            }),
                                            _jsxs("span", {
                                                className: "text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",
                                                children: ["= ", (60 * r).toFixed(1), "W"],
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "Video conferencing, multi-radio APs, small displays",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "4PPoE / Type 4 Devices (90W each)",
                                    }),
                                    _jsxs("div", {
                                        className: "flex items-center gap-3",
                                        children: [
                                            _jsx("input", {
                                                type: "number",
                                                min: "0",
                                                value: i,
                                                onChange: g(n),
                                                className: "w-full px-4 py-2 border rounded-lg text-lg font-medium dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                placeholder: "0",
                                            }),
                                            _jsxs("span", {
                                                className: "text-sm text-gray-500 dark:text-gray-400 whitespace-nowrap",
                                                children: ["= ", (90 * i).toFixed(1), "W"],
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "Large displays, thin clients, high-power devices",
                                    }),
                                ],
                            }),
                        ],
                    }),
                    _jsx("div", {
                        className: "mt-6 p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg border",
                        children: _jsxs("div", {
                            className: "flex justify-between items-center",
                            children: [
                                _jsx("span", {
                                    className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                    children: "Total Devices:",
                                }),
                                _jsx("span", { className: "text-lg font-bold text-blue-700", children: b }),
                            ],
                        }),
                    }),
                    _jsxs("div", {
                        className: "mt-6",
                        children: [
                            _jsxs("label", {
                                className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                children: ["Headroom: ", o, "%"],
                            }),
                            _jsx("input", {
                                type: "range",
                                min: "0",
                                max: "50",
                                step: "5",
                                value: o,
                                onChange: (e) => d("" === e.target.value ? "" : parseFloat(e.target.value)),
                                className: "w-full",
                            }),
                            _jsx("p", {
                                className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                children: "Additional power buffer for future expansion and safety margin",
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "mt-6 p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",
                        children: [
                            _jsxs("label", {
                                className: "block text-sm font-medium text-orange-800 dark:text-orange-200 mb-2",
                                children: ["Switch Base Power: ", c, "W"],
                            }),
                            _jsx("input", {
                                type: "range",
                                min: "0",
                                max: "200",
                                step: "10",
                                value: c,
                                onChange: (e) => m(Number(e.target.value) || 0),
                                className: "w-full accent-orange-500",
                            }),
                            _jsxs("div", {
                                className: "flex justify-between text-xs text-orange-600 mt-1",
                                children: [
                                    _jsx("span", { children: "0W" }),
                                    _jsx("span", { children: "50W" }),
                                    _jsx("span", { children: "100W" }),
                                    _jsx("span", { children: "150W" }),
                                    _jsx("span", { children: "200W" }),
                                ],
                            }),
                            _jsx("p", {
                                className: "text-xs text-orange-700 mt-2",
                                children:
                                    "Power consumed by the switch itself (not PoE). Typical: 20-80W for managed switches, 50-150W for enterprise.",
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "mt-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",
                        children: [
                            _jsx("label", {
                                className: "block text-sm font-medium text-purple-800 dark:text-purple-200 mb-3",
                                children: "Average Cable Run Length",
                            }),
                            _jsxs("div", {
                                className: "flex items-center gap-3 mb-3",
                                children: [
                                    _jsxs("div", {
                                        className: "flex-1",
                                        children: [
                                            _jsxs("div", {
                                                className: "flex items-center gap-2 mb-2",
                                                children: [
                                                    _jsx("input", {
                                                        type: "number",
                                                        min: "1",
                                                        max: lengthUnit === "m" ? "100" : "328",
                                                        value: cableLength,
                                                        onChange: (ev) => {
                                                            const val = parseInt(ev.target.value) || 0;
                                                            const max = lengthUnit === "m" ? 100 : 328;
                                                            setCableLength(Math.min(Math.max(1, val), max));
                                                        },
                                                        className: "w-24 px-3 py-2 border rounded-lg text-lg font-medium dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                    }),
                                                    _jsxs("select", {
                                                        value: lengthUnit,
                                                        onChange: (ev) => {
                                                            const newUnit = ev.target.value;
                                                            if (newUnit !== lengthUnit) {
                                                                // Convert the value
                                                                if (newUnit === "ft") {
                                                                    setCableLength(Math.round(cableLength * 3.28084));
                                                                } else {
                                                                    setCableLength(Math.round(cableLength / 3.28084));
                                                                }
                                                                setLengthUnit(newUnit);
                                                            }
                                                        },
                                                        className: "px-3 py-2 border rounded-lg bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600",
                                                        children: [
                                                            _jsx("option", { value: "m", children: "meters" }),
                                                            _jsx("option", { value: "ft", children: "feet" }),
                                                        ],
                                                    }),
                                                    _jsx("span", {
                                                        className: "text-sm text-purple-600",
                                                        children: lengthUnit === "m" 
                                                            ? `(${displayLengthFt} ft)` 
                                                            : `(${displayLengthM} m)`,
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "flex gap-2 flex-wrap",
                                                children: [
                                                    _jsx("button", {
                                                        onClick: () => { setCableLength(lengthUnit === "m" ? 30 : 98); },
                                                        className: "px-3 py-1 text-xs rounded-full border border-purple-300 hover:bg-purple-100 transition-colors " + 
                                                            ((lengthUnit === "m" && cableLength === 30) || (lengthUnit === "ft" && cableLength === 98) ? "bg-purple-200" : "bg-white dark:bg-gray-800"),
                                                        children: "30m / 98ft",
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () => { setCableLength(lengthUnit === "m" ? 50 : 164); },
                                                        className: "px-3 py-1 text-xs rounded-full border border-purple-300 hover:bg-purple-100 transition-colors " +
                                                            ((lengthUnit === "m" && cableLength === 50) || (lengthUnit === "ft" && cableLength === 164) ? "bg-purple-200" : "bg-white dark:bg-gray-800"),
                                                        children: "50m / 164ft",
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () => { setCableLength(lengthUnit === "m" ? 75 : 246); },
                                                        className: "px-3 py-1 text-xs rounded-full border border-purple-300 hover:bg-purple-100 transition-colors " +
                                                            ((lengthUnit === "m" && cableLength === 75) || (lengthUnit === "ft" && cableLength === 246) ? "bg-purple-200" : "bg-white dark:bg-gray-800"),
                                                        children: "75m / 246ft",
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () => { setCableLength(lengthUnit === "m" ? 100 : 328); },
                                                        className: "px-3 py-1 text-xs rounded-full border border-purple-300 hover:bg-purple-100 transition-colors " +
                                                            ((lengthUnit === "m" && cableLength === 100) || (lengthUnit === "ft" && cableLength === 328) ? "bg-purple-200" : "bg-white dark:bg-gray-800"),
                                                        children: "100m / 328ft (max)",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "flex items-center gap-3",
                                children: [
                                    _jsx("label", {
                                        className: "text-sm font-medium text-purple-800 dark:text-purple-200",
                                        children: "Cable Type:",
                                    }),
                                    _jsxs("select", {
                                        value: cableType,
                                        onChange: (ev) => setCableType(ev.target.value),
                                        className: "px-3 py-2 border rounded-lg bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600",
                                        children: [
                                            _jsx("option", { value: "cat5e", children: "Cat5e (24 AWG)" }),
                                            _jsx("option", { value: "cat6", children: "Cat6 (23 AWG)" }),
                                            _jsx("option", { value: "cat6a", children: "Cat6A (22 AWG)" }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsx("p", {
                                className: "text-xs text-purple-700 mt-2",
                                children:
                                    "Cable length affects power loss (IEEE 802.3). Longer runs and thinner cables result in more power dissipation. Max Ethernet distance: 100m (328ft).",
                            }),
                        ],
                    }),
                    _jsx("button", {
                        type: "button",
                        onClick: () => u(_0x78d92f({ poe: e, poePlus: s, poePlusPlus: r, fourPPOE: i }, o, c, cableLengthM, cableType)),
                        className:
                            "w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg cursor-pointer",
                        children: "Calculate POE Budget",
                    }),
                ],
            }),
            x &&
                _jsxs("div", {
                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                    children: [
                        _jsx("h2", { className: "text-xl font-semibold mb-6", children: "Results" }),
                        _jsxs("div", {
                            className: "grid md:grid-cols-4 gap-4 mb-6",
                            children: [
                                _jsxs("div", {
                                    className: "bg-blue-50 dark:bg-blue-900/20 p-5 rounded-lg border-2 border-blue-200 dark:border-blue-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: "PSE Power Required",
                                        }),
                                        _jsxs("div", {
                                            className: "text-2xl font-bold text-blue-700",
                                            children: [x.totalWatts, " W"],
                                        }),
                                        _jsxs("div", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: [
                                                "Incl. cable loss",
                                                x.cableLoss && x.cableLoss.totalLossWatts > 0 
                                                    ? ` (+${x.cableLoss.totalLossWatts}W)` 
                                                    : "",
                                                ` + ${x.headroomPercent}% headroom`
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-orange-50 dark:bg-orange-900/20 p-5 rounded-lg border-2 border-orange-200 dark:border-orange-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: "Switch Base Power",
                                        }),
                                        _jsxs("div", {
                                            className: "text-2xl font-bold text-orange-700",
                                            children: [x.switchBasePower, " W"],
                                        }),
                                        _jsx("div", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: "Switch operating power",
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-purple-50 dark:bg-purple-900/20 p-5 rounded-lg border-2 border-purple-200 dark:border-purple-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: "Total System Power",
                                        }),
                                        _jsxs("div", {
                                            className: "text-2xl font-bold text-purple-700",
                                            children: [x.totalSystemPower, " W"],
                                        }),
                                        _jsx("div", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: "PSE + Switch power",
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-green-50 dark:bg-green-900/20 p-5 rounded-lg border-2 border-green-200 dark:border-green-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: "Minimum PoE Standard",
                                        }),
                                        _jsx("div", {
                                            className: "text-lg font-bold text-green-700",
                                            children: x.minStandardShort,
                                        }),
                                        _jsx("div", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: x.minStandardIEEE,
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        x.cableLoss && x.cableLoss.totalLossWatts > 0 && _jsxs("div", {
                            className: "bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg border-2 border-purple-200 dark:border-purple-800 mb-6",
                            children: [
                                _jsx("h3", {
                                    className: "text-sm font-semibold text-purple-800 dark:text-purple-200 mb-3",
                                    children: "‚ö° Cable Power Loss Analysis (IEEE 802.3)",
                                }),
                                _jsx("div", {
                                    className: "bg-white dark:bg-gray-800/80 rounded-lg p-3 mb-3 text-xs text-center",
                                    children: _jsxs("div", {
                                        className: "flex items-center justify-center gap-2 flex-wrap",
                                        children: [
                                            _jsxs("span", {
                                                className: "font-semibold text-blue-700",
                                                children: ["PD: ", x.cableLoss.powerAtDevices, "W"]
                                            }),
                                            _jsx("span", { className: "text-gray-400", children: "+" }),
                                            _jsxs("span", {
                                                className: "font-semibold " + (x.cableLoss.lossPercent > 15 ? "text-red-600" : x.cableLoss.lossPercent > 10 ? "text-orange-600" : "text-green-600"),
                                                children: ["Cable Loss: ", x.cableLoss.totalLossWatts, "W"]
                                            }),
                                            _jsx("span", { className: "text-gray-400", children: "=" }),
                                            _jsxs("span", {
                                                className: "font-semibold text-purple-700",
                                                children: ["PSE Output: ", x.subtotalWatts, "W"]
                                            }),
                                            _jsx("span", { className: "text-gray-400", children: "+" }),
                                            _jsxs("span", {
                                                className: "font-semibold text-gray-600 dark:text-gray-300",
                                                children: [x.headroomPercent, "% Headroom"]
                                            }),
                                            _jsx("span", { className: "text-gray-400", children: "=" }),
                                            _jsxs("span", {
                                                className: "font-bold text-green-700 bg-green-100 px-2 py-0.5 rounded",
                                                children: ["Budget: ", x.totalWatts, "W"]
                                            }),
                                        ],
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "grid grid-cols-2 md:grid-cols-4 gap-3 text-center mb-3",
                                    children: [
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsxs("div", {
                                                    className: "text-xl font-bold text-purple-600",
                                                    children: [x.cableLoss.cableLengthM, "m"],
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: ["Cable Length (", x.cableLoss.cableLengthFt, " ft)"],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-xl font-bold text-orange-600",
                                                    children: x.cableLoss.cableType.toUpperCase(),
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "Cable Type",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsxs("div", {
                                                    className: "text-xl font-bold " + (x.cableLoss.lossPercent > 15 ? "text-red-600" : x.cableLoss.lossPercent > 10 ? "text-orange-600" : "text-green-600"),
                                                    children: [x.cableLoss.totalLossWatts, "W"],
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: ["Total Cable Loss (", x.cableLoss.lossPercent, "%)"],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsxs("div", {
                                                    className: "text-xl font-bold text-blue-600",
                                                    children: [x.cableLoss.powerAtDevices, "W"],
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "Power at Devices (PD)",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800/70 rounded-lg p-3",
                                    children: [
                                        _jsx("div", {
                                            className: "text-xs font-medium text-purple-800 dark:text-purple-200 mb-2",
                                            children: "Loss per PoE Type:",
                                        }),
                                        _jsxs("div", {
                                            className: "grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "PoE (802.3af):" }),
                                                        _jsxs("span", { className: "font-medium", children: [x.cableLoss.perType.poe.lossWatts, "W (", x.cableLoss.perType.poe.lossPercent, "%)"] }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "PoE+ (802.3at):" }),
                                                        _jsxs("span", { className: "font-medium", children: [x.cableLoss.perType.poePlus.lossWatts, "W (", x.cableLoss.perType.poePlus.lossPercent, "%)"] }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "PoE++ Type 3:" }),
                                                        _jsxs("span", { className: "font-medium", children: [x.cableLoss.perType.poePlusPlus.lossWatts, "W (", x.cableLoss.perType.poePlusPlus.lossPercent, "%)"] }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "PoE++ Type 4:" }),
                                                        _jsxs("span", { className: "font-medium", children: [x.cableLoss.perType.fourPPOE.lossWatts, "W (", x.cableLoss.perType.fourPPOE.lossPercent, "%)"] }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "grid md:grid-cols-2 gap-4 mb-6",
                            children: [
                                _jsxs("div", {
                                    className: "bg-gray-50 dark:bg-gray-900/50 p-5 rounded-lg border",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: "Switch Configuration",
                                        }),
                                        _jsx("div", {
                                            className: "text-lg font-bold text-gray-800",
                                            children: x.switchRequirement,
                                        }),
                                        _jsxs("div", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                            children: [x.recommendedPorts, " total ports (", x.unusedPorts, " spare)"],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className:
                                "bg-gradient-to-r from-gray-50 to-gray-100 p-4 rounded-lg border-2 border-gray-300 dark:border-gray-600 mb-6",
                            children: [
                                _jsx("h3", {
                                    className: "text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                    children: "üîå Switch Requirements Summary",
                                }),
                                _jsxs("div", {
                                    className: "grid grid-cols-2 md:grid-cols-4 gap-3 text-center",
                                    children: [
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-blue-600",
                                                    children: x.numSwitches,
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "Switch(es) Needed",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-green-600",
                                                    children: x.minStandardShort,
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "PoE Standard",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsxs("div", {
                                                    className: "text-2xl font-bold text-purple-600",
                                                    children: [x.totalWatts, "W"],
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "PSE Budget Required",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg shadow-sm dark:shadow-gray-950/10",
                                            children: [
                                                _jsxs("div", {
                                                    className: "text-2xl font-bold text-orange-600",
                                                    children: [x.switchSize, "-port"],
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-300",
                                                    children: "Switch Size",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "grid md:grid-cols-2 gap-4 mb-6",
                            children: [
                                _jsxs("div", {
                                    className: "bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg border border-orange-200 dark:border-orange-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm font-medium text-orange-800 dark:text-orange-200 mb-1",
                                            children: "üîå UPS Sizing",
                                        }),
                                        _jsxs("div", {
                                            className: "text-lg font-bold text-orange-700",
                                            children: [x.upsVA, " VA minimum"],
                                        }),
                                        _jsx("div", {
                                            className: "text-xs text-orange-600",
                                            children: "For PoE switch + 25% headroom",
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",
                                    children: [
                                        _jsx("div", {
                                            className: "text-sm font-medium text-red-800 dark:text-red-200 mb-1",
                                            children: "üå°Ô∏è Heat Output",
                                        }),
                                        _jsxs("div", {
                                            className: "text-lg font-bold text-red-700",
                                            children: [x.btuPerHour, " BTU/hr"],
                                        }),
                                        _jsx("div", {
                                            className: "text-xs text-red-600",
                                            children: "Consider rack cooling requirements",
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-indigo-50 dark:bg-indigo-900/20 p-4 rounded-lg border border-indigo-200 dark:border-indigo-800 mb-6",
                            children: [
                                _jsx("div", {
                                    className: "text-sm font-medium text-indigo-800 dark:text-indigo-200 mb-2",
                                    children: "üìã Suggested Switch Brands",
                                }),
                                _jsx("div", { className: "text-sm text-indigo-700", children: x.recommendedBrands }),
                                _jsxs("div", {
                                    className: "text-xs text-indigo-600 mt-1",
                                    children: ["Cable: ", x.cableRecommendation],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg mb-4",
                            children: [
                                _jsx("h3", {
                                    className: "font-semibold mb-2",
                                    children: "Power Breakdown (IEEE Standards):",
                                }),
                                _jsxs("div", {
                                    className: "space-y-1 text-sm",
                                    children: [
                                        x.deviceCounts.poe > 0 &&
                                            _jsxs("p", {
                                                children: [
                                                    "‚Ä¢ PoE 802.3af (",
                                                    x.deviceCounts.poe,
                                                    " √ó 15.4W): ",
                                                    _jsxs("strong", { children: [x.breakdown.poe, "W"] }),
                                                ],
                                            }),
                                        x.deviceCounts.poePlus > 0 &&
                                            _jsxs("p", {
                                                children: [
                                                    "‚Ä¢ PoE+ 802.3at (",
                                                    x.deviceCounts.poePlus,
                                                    " √ó 30W): ",
                                                    _jsxs("strong", { children: [x.breakdown.poePlus, "W"] }),
                                                ],
                                            }),
                                        x.deviceCounts.poePlusPlus > 0 &&
                                            _jsxs("p", {
                                                children: [
                                                    "‚Ä¢ PoE++ 802.3bt Type 3 (",
                                                    x.deviceCounts.poePlusPlus,
                                                    " √ó 60W): ",
                                                    _jsxs("strong", { children: [x.breakdown.poePlusPlus, "W"] }),
                                                ],
                                            }),
                                        x.deviceCounts.fourPPOE > 0 &&
                                            _jsxs("p", {
                                                children: [
                                                    "‚Ä¢ PoE++ 802.3bt Type 4 (",
                                                    x.deviceCounts.fourPPOE,
                                                    " √ó 90W): ",
                                                    _jsxs("strong", { children: [x.breakdown.fourPPOE, "W"] }),
                                                ],
                                            }),
                                        _jsx("hr", { className: "my-2" }),
                                        _jsxs("p", {
                                            children: [
                                                "Subtotal: ",
                                                _jsxs("strong", { children: [x.subtotalWatts, "W"] }),
                                            ],
                                        }),
                                        _jsxs("p", {
                                            children: [
                                                "+ Headroom (",
                                                x.headroomPercent,
                                                "%): ",
                                                _jsxs("strong", { children: [x.headroomWatts, "W"] }),
                                            ],
                                        }),
                                        _jsxs("p", {
                                            className: "text-lg text-blue-700 font-bold",
                                            children: ["Total Required: ", x.totalWatts, "W"],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        x.recommendations &&
                            x.recommendations.length > 0 &&
                            _jsxs("div", {
                                className: "mt-6",
                                children: [
                                    _jsx("h3", {
                                        className: "font-semibold mb-3 text-gray-800",
                                        children: "üí° Professional Recommendations",
                                    }),
                                    _jsx("div", {
                                        className: "space-y-3",
                                        children: x.recommendations.map((e, t) =>
                                            _jsxs(
                                                "div",
                                                {
                                                    className:
                                                        "p-3 rounded-lg border " +
                                                        ("success" === e.type
                                                            ? "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"
                                                            : "warning" === e.type
                                                              ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"
                                                              : "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),
                                                    children: [
                                                        _jsx("div", {
                                                            className:
                                                                "font-medium text-sm " +
                                                                ("success" === e.type
                                                                    ? "text-green-800 dark:text-green-200"
                                                                    : "warning" === e.type
                                                                      ? "text-yellow-800 dark:text-yellow-200"
                                                                      : "text-blue-800 dark:text-blue-200"),
                                                            children: e.title,
                                                        }),
                                                        _jsx("div", {
                                                            className:
                                                                "text-sm " +
                                                                ("success" === e.type
                                                                    ? "text-green-700"
                                                                    : "warning" === e.type
                                                                      ? "text-yellow-700"
                                                                      : "text-blue-700"),
                                                            children: e.text,
                                                        }),
                                                    ],
                                                },
                                                t
                                            )
                                        ),
                                    }),
                                ],
                            }),
                    ],
                }),
        ],
    });
}
function CoolingCalculator() {
    const [e, t] = useState(10),
        [s, a] = useState(20),
        [r, l] = useState(9),
        [i, n] = useState("ft"),
        [o, d] = useState(1500),
        [c, m] = useState(1),
        [x, u] = useState(100),
        [h, p] = useState(1.25),
        [g, b] = useState(null),
        [f, y] = useState(!1);
    return _jsxs("div", {
        className: "max-w-5xl mx-auto px-4 sm:px-6 py-6 sm:py-8",
        children: [
            _jsxs("div", {
                className: "flex items-center justify-between mb-4 sm:mb-6",
                children: [
                    _jsx("h1", {
                        className: "text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",
                        children: "Rack Cooling Calculator",
                    }),
                    g !== null &&
                        _jsx("button", {
                            onClick: () => y(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: f,
                onConfirm: () => {
                    t(10), a(20), l(9), n("ft"), d(1500), m(1), u(100), p(1.25), b(null), y(!1);
                },
                onCancel: () => y(!1),
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Calculates cooling requirements (BTU/hr and tons) based on your equipment's power consumption. Simply enter the total wattage of all equipment ‚Äî the heat output equals the power consumed. Room size is only used for heat density analysis.",
                    ],
                }),
            }),
            _jsxs("div", {
                className: "bg-blue-50 dark:bg-blue-900/20 rounded-xl p-4 sm:p-5 mb-6 border border-blue-200 dark:border-blue-800",
                children: [
                    _jsx("h2", {
                        className: "text-base sm:text-lg font-semibold text-blue-800 dark:text-blue-200 mb-2 sm:mb-3",
                        children: "ASHRAE Thermal Guidelines",
                    }),
                    _jsx("p", {
                        className: "text-xs sm:text-sm text-blue-700 mb-3",
                        children:
                            "All electrical power consumed by equipment is converted to heat. ASHRAE provides thermal guidelines to ensure equipment reliability.",
                    }),
                    _jsxs("div", {
                        className: "grid grid-cols-2 sm:grid-cols-4 gap-2 text-xs",
                        children: [
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-2 rounded border border-blue-200 dark:border-blue-800 text-center",
                                children: [
                                    _jsx("div", {
                                        className: "font-bold text-blue-700",
                                        children: "1W = 3.412 BTU/hr",
                                    }),
                                    _jsx("div", { className: "text-blue-600", children: "Conversion Factor" }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-2 rounded border border-blue-200 dark:border-blue-800 text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-blue-700", children: "64-80¬∞F" }),
                                    _jsx("div", { className: "text-blue-600", children: "Inlet Temp Range" }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-2 rounded border border-blue-200 dark:border-blue-800 text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-blue-700", children: "40-60%" }),
                                    _jsx("div", { className: "text-blue-600", children: "Humidity Range" }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-2 rounded border border-blue-200 dark:border-blue-800 text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-blue-700", children: "12,000 BTU/hr" }),
                                    _jsx("div", { className: "text-blue-600", children: "= 1 Ton Cooling" }),
                                ],
                            }),
                        ],
                    }),
                ],
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 mb-6 border",
                children: [
                    _jsx("h2", {
                        className: "text-lg sm:text-xl font-semibold text-gray-800 mb-4",
                        children: "Equipment Heat Load",
                    }),
                    _jsxs("div", {
                        className: "bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 mb-6 border border-blue-200 dark:border-blue-800",
                        children: [
                            _jsx("h3", {
                                className: "text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",
                                children: "ASHRAE/Industry Standard Formula",
                            }),
                            _jsx("p", {
                                className: "text-xs text-blue-700 font-mono mb-2",
                                children:
                                    "Total BTU/hr = (Equipment Watts √ó 3.412) + (People √ó 400) + (Lighting Watts √ó 3.412)",
                            }),
                            _jsx("p", {
                                className: "text-xs text-blue-600",
                                children:
                                    "Room size does NOT add heat ‚Äî it's only used to calculate heat density (W/ft¬≤) for cooling system type recommendations.",
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "grid md:grid-cols-2 gap-4 sm:gap-6",
                        children: [
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Equipment Power (Watts)",
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        min: "0",
                                        value: o,
                                        onChange: (e) => d("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsx("div", {
                                        className: "flex flex-wrap gap-1 mt-2",
                                        children: [
                                            { label: "Small AV Rack (500W)", watts: 500 },
                                            { label: "Medium AV Rack (1.5kW)", watts: 1500 },
                                            { label: "Large AV Rack (3kW)", watts: 3e3 },
                                            { label: "Server Rack (5kW)", watts: 5e3 },
                                            { label: "High-Density Rack (10kW)", watts: 1e4 },
                                            { label: "AV Processor (150W)", watts: 150 },
                                            { label: "Amplifier 1000W Class AB", watts: 1500 },
                                            { label: "Amplifier 1000W Class D", watts: 400 },
                                            { label: "Video Wall Controller", watts: 400 },
                                            { label: "Matrix Switcher", watts: 200 },
                                            { label: "DSP Processor", watts: 100 },
                                            { label: "Network Switch 24-port", watts: 50 },
                                        ]
                                            .slice(0, 6)
                                            .map((e) =>
                                                _jsx(
                                                    "button",
                                                    {
                                                        onClick: () => d(e.watts),
                                                        className:
                                                            "px-2 py-1 text-xs rounded border transition-colors cursor-pointer " +
                                                            (o === e.watts
                                                                ? "bg-blue-600 text-white border-blue-600"
                                                                : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-blue-50 dark:bg-blue-900/20"),
                                                        children: e.label,
                                                    },
                                                    e.label
                                                )
                                            ),
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-2",
                                        children:
                                            "Sum total wattage of all equipment (servers, amps, processors, etc.)",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Active People in Room",
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        min: "0",
                                        value: c,
                                        onChange: (e) => m("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "ASHRAE: 400 BTU/hr per person (sedentary office work)",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Lighting Power (Watts)",
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        min: "0",
                                        value: x,
                                        onChange: (e) => u("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsxs("div", {
                                        className: "mt-2 p-2 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",
                                        children: [
                                            _jsx("p", {
                                                className: "text-xs text-yellow-800 dark:text-yellow-200 font-medium mb-1",
                                                children: "üí° How to calculate lighting watts:",
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-yellow-700",
                                                children:
                                                    "Count fixtures √ó Watts per bulb. Example: 4 LED tubes √ó 18W = 72W total. Check bulb labels or: LED (8-18W), Fluorescent (32-40W), Incandescent (60-100W per bulb).",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Safety Factor",
                                    }),
                                    _jsxs("select", {
                                        value: h,
                                        onChange: (e) => p(Number(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        children: [
                                            _jsx("option", { value: 1, children: "1.0√ó (No margin)" }),
                                            _jsx("option", { value: 1.15, children: "1.15√ó (15% margin)" }),
                                            _jsx("option", {
                                                value: 1.25,
                                                children: "1.25√ó (25% margin - Recommended)",
                                            }),
                                            _jsx("option", {
                                                value: 1.5,
                                                children: "1.5√ó (50% margin - Future expansion)",
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "HVAC consultants typically recommend 1.25-1.5√ó for growth",
                                    }),
                                ],
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "mt-6 pt-4 border-t",
                        children: [
                            _jsx("h3", {
                                className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",
                                children: "Room Dimensions (for heat density calculation only)",
                            }),
                            _jsxs("div", {
                                className: "grid grid-cols-2 md:grid-cols-4 gap-4",
                                children: [
                                    _jsxs("div", {
                                        children: [
                                            _jsx("label", {
                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                children: "Unit",
                                            }),
                                            _jsxs("select", {
                                                value: i,
                                                onChange: (e) => n(e.target.value),
                                                className:
                                                    "w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500",
                                                children: [
                                                    _jsx("option", { value: "ft", children: "Feet (ft)" }),
                                                    _jsx("option", { value: "m", children: "Meters (m)" }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        children: [
                                            _jsxs("label", {
                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                children: ["Width (", i, ")"],
                                            }),
                                            _jsx("input", {
                                                type: "number",
                                                min: "0.1",
                                                step: "0.1",
                                                value: e,
                                                onChange: (e) =>
                                                    t("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                className:
                                                    "w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        children: [
                                            _jsxs("label", {
                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                children: ["Length (", i, ")"],
                                            }),
                                            _jsx("input", {
                                                type: "number",
                                                min: "0.1",
                                                step: "0.1",
                                                value: s,
                                                onChange: (e) =>
                                                    a("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                className:
                                                    "w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        children: [
                                            _jsxs("label", {
                                                className: "block text-xs text-gray-600 dark:text-gray-300 mb-1",
                                                children: ["Height (", i, ")"],
                                            }),
                                            _jsx("input", {
                                                type: "number",
                                                min: "0.1",
                                                step: "0.1",
                                                value: r,
                                                onChange: (e) =>
                                                    l("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                className:
                                                    "w-full px-3 py-2 border rounded-lg text-sm focus:ring-2 focus:ring-blue-500",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "mt-3 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg border border-gray-200 dark:border-gray-700",
                                children: [
                                    _jsxs("div", {
                                        className: "flex flex-wrap gap-4 text-sm",
                                        children: [
                                            _jsxs("span", {
                                                className: "text-gray-600 dark:text-gray-300",
                                                children: [
                                                    "Floor Area: ",
                                                    _jsx("span", {
                                                        className: "font-semibold text-gray-800",
                                                        children:
                                                            "m" === i
                                                                ? `${(e * s).toFixed(1)} m¬≤ (${(e * s * 10.764).toFixed(1)} ft¬≤)`
                                                                : `${(e * s).toFixed(1)} ft¬≤ (${((e * s) / 10.764).toFixed(1)} m¬≤)`,
                                                    }),
                                                ],
                                            }),
                                            _jsxs("span", {
                                                className: "text-gray-600 dark:text-gray-300",
                                                children: [
                                                    "Volume: ",
                                                    _jsx("span", {
                                                        className: "font-semibold text-gray-800",
                                                        children:
                                                            "m" === i
                                                                ? `${(e * s * r).toFixed(1)} m¬≥ (${(e * s * r * 35.315).toFixed(0)} ft¬≥)`
                                                                : `${(e * s * r).toFixed(0)} ft¬≥ (${((e * s * r) / 35.315).toFixed(1)} m¬≥)`,
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsx("p", {
                                className: "text-xs text-gray-500 dark:text-gray-400 mt-2",
                                children:
                                    "Room dimensions are used to calculate W/ft¬≤ and W/ft¬≥ density to determine cooling system type needed ‚Äî they do NOT add to the heat load.",
                            }),
                        ],
                    }),
                    _jsx("button", {
                        onClick: () => {
                            const t = e > 0 ? e : 1,
                                a = s > 0 ? s : 1,
                                l = r > 0 ? r : 1,
                                n = o >= 0 ? o : 0,
                                d = t * a,
                                m = d * l,
                                u = "m" === i ? 10.764 * d : d,
                                p = "m" === i ? 35.315 * m : m,
                                g = 3.412 * n,
                                f = 400 * (c >= 0 ? c : 0),
                                y = 3.412 * (x >= 0 ? x : 0),
                                j = g + f + y,
                                _ = j * h,
                                v = _ / 12e3,
                                N = 3.517 * v,
                                w = Math.round(_ / (1.08 * 15)),
                                C = Math.round(450 * v),
                                M = _ / (1.08 * Math.max(w, C)),
                                k = n / u,
                                S = _ / u,
                                R = n / p,
                                P = [],
                                A = [];
                            k > 100
                                ? A.push({
                                      type: "error",
                                      title: "Very High Heat Density",
                                      text: `At ${k.toFixed(1)} W/ft¬≤, this exceeds typical high-density thresholds. Consider in-row cooling, hot/cold aisle containment, or liquid cooling per ASHRAE guidelines.`,
                                  })
                                : k > 50
                                  ? A.push({
                                        type: "warning",
                                        title: "High Heat Density",
                                        text: `Heat density of ${k.toFixed(1)} W/ft¬≤ is above average. Ensure adequate airflow management and consider supplemental cooling.`,
                                    })
                                  : k < 10 &&
                                    u > 100 &&
                                    P.push({
                                        type: "info",
                                        title: "Low Heat Density",
                                        text: `Heat density of ${k.toFixed(1)} W/ft¬≤ is low. Standard room ventilation may be adequate, but dedicated cooling is still recommended for reliability.`,
                                    }),
                                C < w &&
                                    P.push({
                                        type: "info",
                                        title: "Airflow Sizing",
                                        text: `Standard 450 CFM/ton provides ${C} CFM. For optimal 15¬∞F delta, ${w} CFM is recommended.`,
                                    }),
                                P.push({
                                    type: "info",
                                    title: "ASHRAE Temperature Guidelines",
                                    text: "ASHRAE recommends inlet air temperature of 64-80¬∞F (18-27¬∞C) with 40-60% relative humidity for IT/AV equipment.",
                                }),
                                v < 0.5
                                    ? P.push({
                                          type: "info",
                                          title: "Small Space Cooling",
                                          text: "For small heat loads, consider a mini-split AC, portable AC unit, or enhanced ventilation with exhaust fans.",
                                      })
                                    : v >= 2 &&
                                      P.push({
                                          type: "info",
                                          title: "Redundancy Recommendation",
                                          text: `For ${v.toFixed(1)} tons of cooling, ASHRAE recommends N+1 redundancy for critical spaces. Consider two ${(v / 2).toFixed(1)}-ton units.`,
                                      }),
                                P.push({
                                    type: "info",
                                    title: "Airflow Management",
                                    text: "Per EIA-310 and ASHRAE, use blank panels in all unused rack positions to prevent hot air recirculation.",
                                }),
                                b({
                                    totalBTU: Math.round(_),
                                    subtotalBTU: Math.round(j),
                                    equipmentBTU: Math.round(g),
                                    peopleBTU: Math.round(f),
                                    lightingBTU: Math.round(y),
                                    safetyFactor: h,
                                    coolingTons: Math.round(100 * v) / 100,
                                    coolingKW: Math.round(100 * N) / 100,
                                    cfmRequired: Math.round(w),
                                    actualCFM: Math.round(C),
                                    tempRise: Math.round(10 * M) / 10,
                                    wattsPerSqFt: Math.round(10 * k) / 10,
                                    btuPerSqFt: Math.round(10 * S) / 10,
                                    wattsPerCuFt: Math.round(100 * R) / 100,
                                    areaInSqFt: Math.round(100 * u) / 100,
                                    areaInSqM: Math.round((u / 10.764) * 100) / 100,
                                    volumeCuFt: Math.round(100 * p) / 100,
                                    volumeCuM: Math.round((p / 35.315) * 100) / 100,
                                    roomWidth: t,
                                    roomLength: a,
                                    roomHeight: l,
                                    dimensionUnit: i,
                                    equipmentWatts: n,
                                    tips: P,
                                    warnings: A,
                                });
                        },
                        className:
                            "w-full mt-6 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition-colors cursor-pointer",
                        children: "Calculate Cooling Requirements",
                    }),
                ],
            }),
            g &&
                _jsxs("div", {
                    className: "space-y-6",
                    children: [
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg sm:text-xl font-semibold text-gray-800 mb-4",
                                    children: "Cooling Requirements",
                                }),
                                _jsxs("div", {
                                    className: "grid sm:grid-cols-3 gap-4 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-2 border-blue-300 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-xs text-blue-600 font-medium",
                                                    children: "Total Heat Load",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-blue-700",
                                                    children: g.totalBTU.toLocaleString(),
                                                }),
                                                _jsx("div", { className: "text-xs text-blue-600", children: "BTU/h" }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-300 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-xs text-green-600 font-medium",
                                                    children: "Cooling Required",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-green-700",
                                                    children: g.coolingTons,
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-green-600",
                                                    children: ["Tons (", g.coolingKW, " kW)"],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border-2 border-purple-300 text-center",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-xs text-purple-600 font-medium",
                                                    children: "Airflow Required",
                                                }),
                                                _jsx("div", {
                                                    className: "text-2xl font-bold text-purple-700",
                                                    children: g.cfmRequired.toLocaleString(),
                                                }),
                                                _jsx("div", { className: "text-xs text-purple-600", children: "CFM" }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "grid sm:grid-cols-2 gap-4 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            className:
                                                "p-4 rounded-lg border " +
                                                (g.wattsPerSqFt < 50
                                                    ? "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"
                                                    : g.wattsPerSqFt < 100
                                                      ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"
                                                      : "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"),
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between items-center",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                            children: "Heat Density",
                                                        }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold " +
                                                                (g.wattsPerSqFt < 50
                                                                    ? "text-green-700"
                                                                    : g.wattsPerSqFt < 100
                                                                      ? "text-yellow-700"
                                                                      : "text-red-700"),
                                                            children: [g.wattsPerSqFt, " W/ft¬≤"],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children:
                                                        g.wattsPerSqFt < 50
                                                            ? "Standard density - conventional cooling adequate"
                                                            : g.wattsPerSqFt < 100
                                                              ? "Medium density - ensure good airflow"
                                                              : "High density - specialized cooling recommended",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "p-4 rounded-lg border bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between items-center",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                            children: "Equipment Power",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold text-gray-700 dark:text-gray-300",
                                                            children: [g.equipmentWatts.toLocaleString(), " W"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: [
                                                        "= ",
                                                        g.equipmentBTU.toLocaleString(),
                                                        " BTU/hr (√ó3.412 conversion)",
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg mb-4",
                                    children: [
                                        _jsx("h3", {
                                            className: "font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                            children: "Heat Load Breakdown",
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between text-sm",
                                                    children: [
                                                        _jsxs("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: ["Equipment (", g.equipmentWatts, "W √ó 3.412):"],
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-medium text-blue-600",
                                                            children: [g.equipmentBTU.toLocaleString(), " BTU/hr"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between text-sm",
                                                    children: [
                                                        _jsxs("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: ["People (", c, " √ó 400 BTU):"],
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-medium",
                                                            children: [g.peopleBTU.toLocaleString(), " BTU/hr"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between text-sm",
                                                    children: [
                                                        _jsxs("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: ["Lighting (", x, "W √ó 3.412):"],
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-medium",
                                                            children: [g.lightingBTU.toLocaleString(), " BTU/hr"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between text-sm border-t pt-2",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-700 dark:text-gray-300",
                                                            children: "Subtotal:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-medium",
                                                            children: [g.subtotalBTU.toLocaleString(), " BTU/hr"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between text-sm",
                                                    children: [
                                                        _jsxs("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: ["Safety Factor (√ó", g.safetyFactor, "):"],
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-medium",
                                                            children: [
                                                                "+",
                                                                Math.round(
                                                                    g.subtotalBTU * (g.safetyFactor - 1)
                                                                ).toLocaleString(),
                                                                " BTU/hr",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className:
                                                        "flex justify-between text-sm border-t pt-2 font-semibold",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-800",
                                                            children: "Total Heat Load:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "text-blue-700",
                                                            children: [g.totalBTU.toLocaleString(), " BTU/hr"],
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg text-sm",
                                    children: _jsxs("div", {
                                        className: "grid sm:grid-cols-3 gap-2",
                                        children: [
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: "Room Area:",
                                                    }),
                                                    " ",
                                                    _jsxs("strong", {
                                                        children: [g.areaInSqFt, " ft¬≤ (", g.areaInSqM, " m¬≤)"],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: "Cooling Capacity:",
                                                    }),
                                                    " ",
                                                    _jsx("strong", { children: "1 ton = 12,000 BTU/h" }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-gray-500 dark:text-gray-400",
                                                        children: "Estimated CFM:",
                                                    }),
                                                    " ",
                                                    _jsxs("strong", { children: [g.actualCFM, " (at 400 CFM/ton)"] }),
                                                ],
                                            }),
                                        ],
                                    }),
                                }),
                            ],
                        }),
                        g.warnings.length > 0 &&
                            _jsxs("div", {
                                className: "bg-red-50 dark:bg-red-900/20 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border border-red-300",
                                children: [
                                    _jsxs("h2", {
                                        className: "text-lg font-semibold text-red-800 dark:text-red-200 mb-3 flex items-center gap-2",
                                        children: [_jsx("span", { children: "‚ö†Ô∏è" }), " Warnings"],
                                    }),
                                    _jsx("div", {
                                        className: "space-y-3",
                                        children: g.warnings.map((e, t) =>
                                            _jsxs(
                                                "div",
                                                {
                                                    className:
                                                        "p-3 bg-white dark:bg-gray-800 rounded-lg border " +
                                                        ("error" === e.type ? "border-red-200 dark:border-red-800" : "border-yellow-200 dark:border-yellow-800"),
                                                    children: [
                                                        _jsx("h3", {
                                                            className:
                                                                "font-semibold mb-1 " +
                                                                ("error" === e.type
                                                                    ? "text-red-700"
                                                                    : "text-yellow-700"),
                                                            children: e.title,
                                                        }),
                                                        _jsx("p", {
                                                            className:
                                                                "text-sm " +
                                                                ("error" === e.type
                                                                    ? "text-red-600"
                                                                    : "text-yellow-600"),
                                                            children: e.text,
                                                        }),
                                                    ],
                                                },
                                                t
                                            )
                                        ),
                                    }),
                                ],
                            }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg sm:text-xl font-semibold text-gray-800 mb-4",
                                    children: "ASHRAE/AVIXA Tips & Recommendations",
                                }),
                                _jsx("div", {
                                    className: "space-y-3",
                                    children: g.tips.map((e, t) =>
                                        _jsxs(
                                            "div",
                                            {
                                                className:
                                                    "p-3 rounded-lg border " +
                                                    ("success" === e.type
                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"
                                                        : "warning" === e.type
                                                          ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800"
                                                          : "error" === e.type
                                                            ? "bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800"
                                                            : "bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"),
                                                children: [
                                                    _jsxs("h3", {
                                                        className:
                                                            "font-semibold mb-1 " +
                                                            ("success" === e.type
                                                                ? "text-green-800 dark:text-green-200"
                                                                : "warning" === e.type
                                                                  ? "text-yellow-800 dark:text-yellow-200"
                                                                  : "error" === e.type
                                                                    ? "text-red-800 dark:text-red-200"
                                                                    : "text-blue-800 dark:text-blue-200"),
                                                        children: [
                                                            "success" === e.type
                                                                ? "‚úÖ"
                                                                : "warning" === e.type
                                                                  ? "‚ö†Ô∏è"
                                                                  : "error" === e.type
                                                                    ? "‚ùå"
                                                                    : "‚ÑπÔ∏è",
                                                            " ",
                                                            e.title,
                                                        ],
                                                    }),
                                                    _jsx("p", {
                                                        className:
                                                            "text-sm " +
                                                            ("success" === e.type
                                                                ? "text-green-700"
                                                                : "warning" === e.type
                                                                  ? "text-yellow-700"
                                                                  : "error" === e.type
                                                                    ? "text-red-700"
                                                                    : "text-blue-700"),
                                                        children: e.text,
                                                    }),
                                                ],
                                            },
                                            t
                                        )
                                    ),
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 sm:p-6 border",
                            children: [
                                _jsx("h2", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: "ASHRAE Temperature Guidelines",
                                }),
                                _jsx("div", {
                                    className: "overflow-x-auto",
                                    children: _jsxs("table", {
                                        className: "w-full text-sm",
                                        children: [
                                            _jsx("thead", {
                                                children: _jsxs("tr", {
                                                    className: "bg-gray-100 dark:bg-gray-700",
                                                    children: [
                                                        _jsx("th", {
                                                            className: "px-3 py-2 text-left",
                                                            children: "Class",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-3 py-2 text-left",
                                                            children: "Inlet Temp (Recommended)",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-3 py-2 text-left",
                                                            children: "Inlet Temp (Allowable)",
                                                        }),
                                                        _jsx("th", {
                                                            className: "px-3 py-2 text-left",
                                                            children: "Humidity Range",
                                                        }),
                                                    ],
                                                }),
                                            }),
                                            _jsx("tbody", {
                                                children: [
                                                    {
                                                        class: "A1 (Recommended)",
                                                        recTemp: "64-75¬∞F (18-24¬∞C)",
                                                        allowTemp: "59-90¬∞F (15-32¬∞C)",
                                                        humidity: "40-60%",
                                                    },
                                                    {
                                                        class: "A2 (Standard)",
                                                        recTemp: "64-75¬∞F (18-24¬∞C)",
                                                        allowTemp: "50-95¬∞F (10-35¬∞C)",
                                                        humidity: "20-80%",
                                                    },
                                                    {
                                                        class: "A3 (Relaxed)",
                                                        recTemp: "64-75¬∞F (18-24¬∞C)",
                                                        allowTemp: "41-104¬∞F (5-40¬∞C)",
                                                        humidity: "8-85%",
                                                    },
                                                    {
                                                        class: "A4 (Extended)",
                                                        recTemp: "64-75¬∞F (18-24¬∞C)",
                                                        allowTemp: "41-113¬∞F (5-45¬∞C)",
                                                        humidity: "8-90%",
                                                    },
                                                ].map((e, t) =>
                                                    _jsxs(
                                                        "tr",
                                                        {
                                                            className: "border-b " + (0 === t ? "bg-blue-50 dark:bg-blue-900/20" : ""),
                                                            children: [
                                                                _jsx("td", {
                                                                    className: "px-3 py-2 font-medium",
                                                                    children: e.class,
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-3 py-2",
                                                                    children: e.recTemp,
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-3 py-2",
                                                                    children: e.allowTemp,
                                                                }),
                                                                _jsx("td", {
                                                                    className: "px-3 py-2",
                                                                    children: e.humidity,
                                                                }),
                                                            ],
                                                        },
                                                        t
                                                    )
                                                ),
                                            }),
                                        ],
                                    }),
                                }),
                                _jsx("p", {
                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-3",
                                    children:
                                        "Source: ASHRAE TC 9.9 - Thermal Guidelines for Data Processing Environments",
                                }),
                            ],
                        }),
                    ],
                }),
        ],
    });
}
function SpeakerCalculator() {
    const [e, t] = useState(75),
        [s, a] = useState(10),
        [r, l] = useState(90),
        [i, n] = useState(3),
        [o, d] = useState("m"),
        [c, m] = useState(!1),
        [x, u] = useState(10),
        [h, p] = useState(4),
        [g, b] = useState(90),
        [f, y] = useState("minimal"),
        [j, _] = useState("ft"),
        [v, N] = useState(40),
        [w, C] = useState(30),
        [M, k] = useState("ft"),
        [S, R] = useState(null),
        [P, A] = useState(!1),
        D = (e) => {
            const t = j,
                s = M,
                a = o,
                r = 0.3048,
                l = 3.28084;
            t !== e &&
                ("ft" === t && "m" === e
                    ? (u((e) => Math.round(e * r * 100) / 100), p((e) => Math.round(e * r * 100) / 100))
                    : "m" === t &&
                      "ft" === e &&
                      (u((e) => Math.round(e * l * 100) / 100), p((e) => Math.round(e * l * 100) / 100)),
                _(e)),
                s !== e &&
                    ("ft" === s && "m" === e
                        ? (N((e) => Math.round(e * r * 100) / 100), C((e) => Math.round(e * r * 100) / 100))
                        : "m" === s &&
                          "ft" === e &&
                          (N((e) => Math.round(e * l * 100) / 100), C((e) => Math.round(e * l * 100) / 100)),
                    k(e)),
                a !== e &&
                    ("ft" === a && "m" === e
                        ? n((e) => Math.round(e * r * 100) / 100)
                        : "m" === a && "ft" === e && n((e) => Math.round(e * l * 100) / 100),
                    d(e));
        };
    return _jsxs("div", {
        className: "max-w-5xl mx-auto px-6 py-8",
        children: [
            _jsx("div", {
                className: "mb-4",
                children: _jsxs("span", {
                    className:
                        "inline-flex items-center gap-2 px-3 py-1.5 bg-purple-100 text-purple-800 dark:text-purple-200 text-sm font-semibold rounded-full border border-purple-200 dark:border-purple-800",
                    children: [_jsx("span", { className: "text-purple-600", children: "‚ö°" }), " Advanced Tool"],
                }),
            }),
            _jsxs("div", {
                className: "flex items-center justify-between mb-2",
                children: [
                    _jsx("h1", {
                        className: "text-3xl font-bold text-gray-900 dark:text-gray-100",
                        children: "Speaker Design Calculator",
                    }),
                    S !== null &&
                        _jsx("button", {
                            onClick: () => A(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: P,
                onConfirm: () => {
                    t(75),
                        a(10),
                        l(90),
                        n(3),
                        d("m"),
                        m(!1),
                        u(10),
                        p(4),
                        b(90),
                        y("minimal"),
                        _("ft"),
                        N(40),
                        C(30),
                        k("ft"),
                        R(null),
                        A(!1);
                },
                onCancel: () => A(!1),
            }),
            _jsx("p", {
                className: "text-gray-600 dark:text-gray-300 mb-4",
                children:
                    "Professional speaker system design tool based on AVIXA CTS-D standards and industry practices",
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Calculates electrical power required (EPR) per speaker using the AVIXA formula, determines amplifier sizing, and designs ceiling speaker layouts with proper coverage spacing based on mounting height and coverage angle.",
                    ],
                }),
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                children: [
                    _jsxs("h2", {
                        className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                        children: [
                            _jsx("span", { className: "text-blue-600", children: "üîä" }),
                            " EPR (Electrical Power Required) Calculator",
                        ],
                    }),
                    _jsx("p", {
                        className: "text-sm text-gray-600 dark:text-gray-300 mb-4",
                        children:
                            "Calculate the electrical power required per speaker using the AVIXA standard formula.",
                    }),
                    _jsxs("div", {
                        className: "mb-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",
                        children: [
                            _jsxs("p", {
                                className: "text-sm text-blue-800 dark:text-blue-200 font-mono",
                                children: [
                                    _jsx("strong", { children: "AVIXA Formula:" }),
                                    " EPR = 10",
                                    _jsx("sup", { children: "((Lp + H - Ls + 20√ólog‚ÇÅ‚ÇÄ(D/1m)) / 10)" }),
                                    " √ó 1W",
                                ],
                            }),
                            _jsx("p", {
                                className: "text-xs text-blue-600 mt-1",
                                children:
                                    "Where: Lp = Target SPL, H = Headroom, Ls = Sensitivity (dB @ 1W/1m), D = Distance to listener",
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "grid md:grid-cols-2 gap-6",
                        children: [
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Distance Unit",
                                    }),
                                    _jsxs("select", {
                                        value: o,
                                        onChange: (e) => {
                                            return (t = e.target.value), void D(t);
                                            var t;
                                        },
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        children: [
                                            _jsx("option", { value: "m", children: "Meters (m)" }),
                                            _jsx("option", { value: "ft", children: "Feet (ft)" }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsxs("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: ["Distance to Listener (", o, ")"],
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        step: "0.1",
                                        min: "0.1",
                                        value: i,
                                        onChange: (e) => n("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "D‚ÇÇ in AVIXA formula",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Target SPL at Listener (dB)",
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        value: e,
                                        onChange: (e) => t("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "Lp in AVIXA formula - desired sound level at listener position",
                                    }),
                                    _jsx("div", {
                                        className: "flex flex-wrap gap-2 mt-2",
                                        children: [
                                            { spl: 65, label: "65 dB", color: "green" },
                                            { spl: 70, label: "70 dB", color: "green" },
                                            { spl: 75, label: "75 dB", color: "blue" },
                                            { spl: 80, label: "80 dB", color: "blue" },
                                            { spl: 85, label: "85 dB", color: "yellow" },
                                            { spl: 90, label: "90 dB", color: "orange" },
                                            { spl: 95, label: "95 dB", color: "red" },
                                        ].map((s) =>
                                            _jsx(
                                                "button",
                                                {
                                                    onClick: () => t(s.spl),
                                                    className:
                                                        "px-3 py-1 text-xs rounded transition-colors " +
                                                        (e === s.spl
                                                            ? "bg-blue-600 text-white"
                                                            : "bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-blue-50 dark:bg-blue-900/20"),
                                                    children: s.label,
                                                },
                                                s.spl
                                            )
                                        ),
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Headroom (dB)",
                                    }),
                                    _jsxs("select", {
                                        value: s,
                                        onChange: (e) => a("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                        children: [
                                            _jsx("option", { value: "6", children: "6 dB (Paging Only)" }),
                                            _jsx("option", { value: "10", children: "10 dB (Speech / Paging)" }),
                                            _jsx("option", { value: "15", children: "15 dB (Speech + Music)" }),
                                            _jsx("option", { value: "20", children: "20 dB (Background Music)" }),
                                            _jsx("option", { value: "25", children: "25 dB (Foreground Music)" }),
                                            _jsx("option", { value: "40", children: "40 dB (Live Performance)" }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children: "H in AVIXA formula - headroom for peaks",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "md:col-span-2",
                                children: [
                                    _jsx("label", {
                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                        children: "Speaker Sensitivity (dB @ 1W/1m)",
                                    }),
                                    _jsx("input", {
                                        type: "number",
                                        value: r,
                                        onChange: (e) => l("" === e.target.value ? "" : parseFloat(e.target.value)),
                                        className:
                                            "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                        children:
                                            "Ls in AVIXA formula - from speaker specifications (typical: 84-97 dB)",
                                    }),
                                ],
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className:
                            "mt-6 p-4 bg-gradient-to-r from-blue-50 to-green-50 rounded-lg border border-blue-200 dark:border-blue-800",
                        children: [
                            _jsx("h3", {
                                className: "text-sm font-semibold text-gray-800 mb-3",
                                children: "üìä Target SPL Reference Guide (AVIXA/Industry Standards)",
                            }),
                            _jsx("p", {
                                className: "text-xs text-gray-600 dark:text-gray-300 mb-4",
                                children:
                                    "Target SPL is the desired sound pressure level at the listener position. Choose based on ambient noise level (system should be 10-25 dB above ambient for intelligibility) and application requirements.",
                            }),
                            _jsxs("div", {
                                className: "grid md:grid-cols-2 gap-4",
                                children: [
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-green-200 dark:border-green-800",
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "text-xs font-semibold text-green-700 mb-2 flex items-center gap-1",
                                                children: [_jsx("span", { children: "üü¢" }), " Low Level (60-70 dB)"],
                                            }),
                                            _jsxs("ul", {
                                                className: "text-xs text-gray-600 dark:text-gray-300 space-y-1",
                                                children: [
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "60-65 dB:" }),
                                                            " Quiet BGM, libraries, spas, waiting rooms",
                                                        ],
                                                    }),
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "65-70 dB:" }),
                                                            " Retail BGM, restaurants, hotel lobbies, offices",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-green-600 mt-2 italic",
                                                children: "Ambient: 40-50 dB (quiet spaces)",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-800",
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "text-xs font-semibold text-blue-700 mb-2 flex items-center gap-1",
                                                children: [
                                                    _jsx("span", { children: "üîµ" }),
                                                    " Medium Level (70-80 dB)",
                                                ],
                                            }),
                                            _jsxs("ul", {
                                                className: "text-xs text-gray-600 dark:text-gray-300 space-y-1",
                                                children: [
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "70-75 dB:" }),
                                                            " Paging, announcements, airports, transit",
                                                        ],
                                                    }),
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "75-80 dB:" }),
                                                            " Speech/presentations, classrooms, conference rooms",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-blue-600 mt-2 italic",
                                                children: "Ambient: 50-65 dB (moderate noise)",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "text-xs font-semibold text-yellow-700 mb-2 flex items-center gap-1",
                                                children: [_jsx("span", { children: "üü°" }), " High Level (80-90 dB)"],
                                            }),
                                            _jsxs("ul", {
                                                className: "text-xs text-gray-600 dark:text-gray-300 space-y-1",
                                                children: [
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "80-85 dB:" }),
                                                            " Foreground music, bars, fitness centers, worship",
                                                        ],
                                                    }),
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "85-90 dB:" }),
                                                            " Dance clubs, performance venues, cinema",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-yellow-600 mt-2 italic",
                                                children: "Ambient: 65-75 dB (noisy environments)",
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-red-200 dark:border-red-800",
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "text-xs font-semibold text-red-700 mb-2 flex items-center gap-1",
                                                children: [
                                                    _jsx("span", { children: "üî¥" }),
                                                    " Very High Level (90-105 dB)",
                                                ],
                                            }),
                                            _jsxs("ul", {
                                                className: "text-xs text-gray-600 dark:text-gray-300 space-y-1",
                                                children: [
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "90-95 dB:" }),
                                                            " Live music, DJ events, concerts",
                                                        ],
                                                    }),
                                                    _jsxs("li", {
                                                        children: [
                                                            _jsx("strong", { children: "95-105 dB:" }),
                                                            " Stadiums, large arenas, outdoor festivals",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className: "text-xs text-red-600 mt-2 italic",
                                                children: "‚ö†Ô∏è Hearing protection recommended >85 dB",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsx("div", {
                                className: "mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",
                                children: _jsxs("p", {
                                    className: "text-xs text-yellow-800 dark:text-yellow-200",
                                    children: [
                                        _jsx("strong", { children: "üí° AVIXA Tip:" }),
                                        " For speech intelligibility, target SPL should be at least ",
                                        _jsx("strong", { children: "10 dB above ambient noise" }),
                                        ". For excellent intelligibility (STI > 0.6), aim for ",
                                        _jsx("strong", { children: "15-25 dB above ambient" }),
                                        ". AVIXA recommends not exceeding 85 dB for extended periods without hearing protection considerations.",
                                    ],
                                }),
                            }),
                        ],
                    }),
                ],
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 mb-8 border",
                children: [
                    _jsxs("div", {
                        className: "flex items-center justify-between mb-4",
                        children: [
                            _jsxs("h2", {
                                className: "text-xl font-semibold text-gray-800 flex items-center gap-2",
                                children: [
                                    _jsx("span", { className: "text-purple-600", children: "üìç" }),
                                    " Ceiling Speaker Layout",
                                ],
                            }),
                            _jsxs("label", {
                                className: "flex items-center gap-3 cursor-pointer",
                                children: [
                                    _jsx("span", {
                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                        children: "Enable ceiling mount calculations",
                                    }),
                                    _jsx("input", {
                                        type: "checkbox",
                                        checked: c,
                                        onChange: (e) => m(e.target.checked),
                                        className:
                                            "w-5 h-5 text-blue-600 bg-gray-100 dark:bg-gray-700 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500 focus:ring-2 cursor-pointer",
                                    }),
                                ],
                            }),
                        ],
                    }),
                    c &&
                        _jsxs(_Fragment, {
                            children: [
                                _jsx("p", {
                                    className: "text-sm text-gray-600 dark:text-gray-300 mb-6",
                                    children:
                                        "Calculate speaker coverage pattern and optimal spacing for ceiling-mounted speakers.",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Unit",
                                                }),
                                                _jsxs("select", {
                                                    value: j,
                                                    onChange: (e) => {
                                                        return (t = e.target.value), void D(t);
                                                        var t;
                                                    },
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                                    children: [
                                                        _jsx("option", { value: "ft", children: "Feet (ft)" }),
                                                        _jsx("option", { value: "m", children: "Meters (m)" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: ["Ceiling Height (", j, ")"],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.5",
                                                    min: "1",
                                                    value: x,
                                                    onChange: (e) =>
                                                        u("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: ["Listener Ear Height (", j, ")"],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.5",
                                                    min: "0",
                                                    value: h,
                                                    onChange: (e) =>
                                                        p("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children:
                                                        "ft" === j
                                                            ? "Typically 4ft seated, 5ft standing"
                                                            : "Typically 1.2m seated, 1.5m standing",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Speaker Coverage Angle (¬∞)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "0",
                                                    max: "999",
                                                    value: g,
                                                    onChange: (e) =>
                                                        b(
                                                            "" === e.target.value
                                                                ? ""
                                                                : Math.min(999, Number(e.target.value) || "")
                                                        ),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                                    placeholder: "90",
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children:
                                                        "From speaker specifications (-6dB point). Common: 60¬∞-180¬∞",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                    children: "Spacing Pattern",
                                                }),
                                                _jsxs("select", {
                                                    value: f,
                                                    onChange: (e) => y(e.target.value),
                                                    className:
                                                        "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
                                                    children: [
                                                        _jsx("option", {
                                                            value: "edge",
                                                            children: "Edge-to-Edge (1.0D) - Minimum speakers",
                                                        }),
                                                        _jsx("option", {
                                                            value: "minimal",
                                                            children: "Partial Overlap (0.75D) - Good uniformity ‚òÖ",
                                                        }),
                                                        _jsx("option", {
                                                            value: "center",
                                                            children: "Edge-to-Center (0.52D) - Maximum uniformity",
                                                        }),
                                                    ],
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "‚òÖ Recommended for most applications",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-3 gap-4 mb-4",
                                    children: [
                                        _jsxs("div", {
                                            className:
                                                "p-4 rounded-lg border-2 cursor-pointer transition-all " +
                                                ("edge" === f
                                                    ? "border-orange-500 bg-orange-50 dark:bg-orange-900/20"
                                                    : "border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:border-gray-600"),
                                            onClick: () => y("edge"),
                                            children: [
                                                _jsx("div", {
                                                    className: "flex justify-center mb-2",
                                                    children: _jsxs("div", {
                                                        className: "flex items-center",
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-orange-400 bg-orange-100",
                                                            }),
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-orange-400 bg-orange-100 -ml-0",
                                                            }),
                                                        ],
                                                    }),
                                                }),
                                                _jsx("div", {
                                                    className: "text-sm font-medium text-center",
                                                    children: "Edge-to-Edge",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 text-center",
                                                    children: "1.0D spacing",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-orange-600 text-center font-medium",
                                                    children: "Fewest speakers",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "p-4 rounded-lg border-2 cursor-pointer transition-all " +
                                                ("minimal" === f
                                                    ? "border-green-500 bg-green-50 dark:bg-green-900/20"
                                                    : "border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:border-gray-600"),
                                            onClick: () => y("minimal"),
                                            children: [
                                                _jsx("div", {
                                                    className: "flex justify-center mb-2",
                                                    children: _jsxs("div", {
                                                        className: "flex items-center",
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-green-400 bg-green-100",
                                                            }),
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-green-400 bg-green-100 -ml-3",
                                                            }),
                                                        ],
                                                    }),
                                                }),
                                                _jsx("div", {
                                                    className: "text-sm font-medium text-center",
                                                    children: "Partial Overlap ‚òÖ",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 text-center",
                                                    children: "0.75D spacing",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-green-600 text-center font-medium",
                                                    children: "Good uniformity",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className:
                                                "p-4 rounded-lg border-2 cursor-pointer transition-all " +
                                                ("center" === f
                                                    ? "border-blue-500 bg-blue-50 dark:bg-blue-900/20"
                                                    : "border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:border-gray-600"),
                                            onClick: () => y("center"),
                                            children: [
                                                _jsx("div", {
                                                    className: "flex justify-center mb-2",
                                                    children: _jsxs("div", {
                                                        className: "flex items-center",
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-blue-400 bg-blue-100",
                                                            }),
                                                            _jsx("div", {
                                                                className:
                                                                    "w-8 h-8 rounded-full border-2 border-blue-400 bg-blue-100 -ml-5",
                                                            }),
                                                        ],
                                                    }),
                                                }),
                                                _jsx("div", {
                                                    className: "text-sm font-medium text-center",
                                                    children: "Edge-to-Center",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 text-center",
                                                    children: "0.52D spacing",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xs text-blue-600 text-center font-medium",
                                                    children: "Best uniformity",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "mt-6 p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",
                                    children: [
                                        _jsxs("h3", {
                                            className:
                                                "text-md font-semibold text-green-800 dark:text-green-200 mb-3 flex items-center gap-2",
                                            children: [
                                                _jsx("span", { children: "üìê" }),
                                                " Room Size (for Speaker Count Recommendation)",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "grid md:grid-cols-3 gap-4",
                                            children: [
                                                _jsxs("div", {
                                                    children: [
                                                        _jsx("label", {
                                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                            children: "Unit",
                                                        }),
                                                        _jsxs("select", {
                                                            value: M,
                                                            onChange: (e) => {
                                                                return (t = e.target.value), void D(t);
                                                                var t;
                                                            },
                                                            className:
                                                                "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",
                                                            children: [
                                                                _jsx("option", { value: "ft", children: "Feet (ft)" }),
                                                                _jsx("option", { value: "m", children: "Meters (m)" }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    children: [
                                                        _jsxs("label", {
                                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                            children: ["Room Length (", M, ")"],
                                                        }),
                                                        _jsx("input", {
                                                            type: "number",
                                                            step: "1",
                                                            min: "1",
                                                            value: v,
                                                            onChange: (e) =>
                                                                N(
                                                                    "" === e.target.value
                                                                        ? ""
                                                                        : parseFloat(e.target.value)
                                                                ),
                                                            className:
                                                                "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    children: [
                                                        _jsxs("label", {
                                                            className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                            children: ["Room Width (", M, ")"],
                                                        }),
                                                        _jsx("input", {
                                                            type: "number",
                                                            step: "1",
                                                            min: "1",
                                                            value: w,
                                                            onChange: (e) =>
                                                                C(
                                                                    "" === e.target.value
                                                                        ? ""
                                                                        : parseFloat(e.target.value)
                                                                ),
                                                            className:
                                                                "w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsx("p", {
                                            className: "text-xs text-green-700 mt-2",
                                            children:
                                                "Enter room dimensions to get speaker count and layout recommendations based on the ceiling speaker coverage pattern above.",
                                        }),
                                    ],
                                }),
                            ],
                        }),
                    !c &&
                        _jsx("p", {
                            className: "text-sm text-gray-500 dark:text-gray-400 italic",
                            children: "Enable the checkbox above to calculate ceiling speaker coverage and spacing.",
                        }),
                ],
            }),
            _jsx("button", {
                onClick: () => {
                    const t = ((e, t) => {
                            switch (t) {
                                case "ft":
                                    return 0.3048 * e;
                                case "in":
                                    return 0.0254 * e;
                                default:
                                    return e;
                            }
                        })(i, o),
                        a = t / 1,
                        l = 20 * Math.log10(a),
                        n = (e + s - r + l) / 10,
                        d = 1 * Math.pow(10, n),
                        m = {
                            requiredWatts: d < 0.01 ? 0.01 : Math.round(100 * d) / 100,
                            distanceLoss: Math.round(100 * l) / 100,
                            distanceM: Math.round(100 * t) / 100,
                            exponent: Math.round(1e3 * n) / 1e3,
                        };
                    let u = null,
                        p = null;
                    if (c) {
                        const e = x - h,
                            t = e <= 0.5,
                            s = "m" === j ? 1.2 : 4,
                            a = Math.max(s, e),
                            r = e < s && e > 0,
                            l = (Math.min(170, Math.max(10, g)) / 2) * (Math.PI / 180),
                            i = 2 * a * Math.tan(l),
                            n = i / 2;
                        let o, d, c, m;
                        switch (f) {
                            case "edge":
                                (o = i),
                                    (d = "Edge to Edge"),
                                    (c = "Coverage circles touch at edges (¬±4.4dB). Suitable for BGM/paging only."),
                                    (m = "¬±4.4 dB");
                                break;
                            case "minimal":
                            default:
                                (o = n * Math.sqrt(2)),
                                    (d = "Minimum Overlap"),
                                    (c = "AVIXA recommended (~29% overlap, ¬±2dB). Best balance of coverage and cost."),
                                    (m = "¬±2.0 dB");
                                break;
                            case "center":
                                (o = n),
                                    (d = "Full Overlap (Center-to-Center)"),
                                    (c =
                                        "Maximum uniformity (50% overlap, ¬±1.4dB). For critical listening applications."),
                                    (m = "¬±1.4 dB");
                        }
                        const u = Math.PI * Math.pow(n, 2),
                            b = "m" === j ? "m¬≤" : "ft¬≤";
                        p = {
                            effectiveHeight: Math.round(100 * a) / 100,
                            rawEffectiveHeight: Math.round(100 * e) / 100,
                            effectiveHeightWarning: t,
                            lowCeilingWarning: r,
                            coverageEfficiency: 1,
                            coverageDiameter: Math.round(100 * i) / 100,
                            rawCoverageDiameter: Math.round(100 * i) / 100,
                            coverageRadius: Math.round(100 * n) / 100,
                            coverageArea: Math.round(100 * u) / 100,
                            speakerSpacing: Math.round(100 * o) / 100,
                            spacingLabel: d,
                            spacingDescription: c,
                            dbVariation: m,
                            unit: j,
                            areaUnit: b,
                            coverageAdjusted: !1,
                        };
                    }
                    let b = null;
                    if (c && v > 0 && w > 0) {
                        const e =
                                M === j
                                    ? v
                                    : "ft" === M && "m" === j
                                      ? 0.3048 * v
                                      : "m" === M && "ft" === j
                                        ? 3.28084 * v
                                        : v,
                            t =
                                M === j
                                    ? w
                                    : "ft" === M && "m" === j
                                      ? 0.3048 * w
                                      : "m" === M && "ft" === j
                                        ? 3.28084 * w
                                        : w,
                            s = e * t,
                            a = p.coverageDiameter,
                            r = (p.coverageRadius, p.coverageArea),
                            l = { edge: 1, minimal: 0.75, center: 0.52 },
                            i = a * l[f],
                            n = Math.max(1, Math.round(e / i)),
                            o = Math.max(1, Math.round(t / i)),
                            d = n * o,
                            c = e / n,
                            x = t / o,
                            h = d * r,
                            g = Math.min(100, (h / s) * 100),
                            y = [],
                            _ = {
                                name:
                                    "edge" === f
                                        ? "Edge-to-Edge"
                                        : "minimal" === f
                                          ? "Partial Overlap"
                                          : "Edge-to-Center",
                                rows: o,
                                cols: n,
                                total: d,
                                spacingL: Math.round(100 * c) / 100,
                                spacingW: Math.round(100 * x) / 100,
                                coverage: Math.round(g),
                                description:
                                    "edge" === f
                                        ? "Coverage circles touch at edges (1.0D)"
                                        : "minimal" === f
                                          ? "Partial overlap for good uniformity (0.75D)"
                                          : "Maximum uniformity - edge to center (0.52D)",
                                isSelected: !0,
                                isAVIXA: !1,
                            };
                        y.push(_);
                        const N = a * l.edge,
                            C = a * l.minimal,
                            k = a * l.center,
                            S = Math.max(1, Math.round(e / N)),
                            R = Math.max(1, Math.round(t / N)),
                            P = S * R,
                            A = Math.max(1, Math.round(e / C)),
                            D = Math.max(1, Math.round(t / C)),
                            I = A * D,
                            E = Math.max(1, Math.round(e / k)),
                            F = Math.max(1, Math.round(t / k)),
                            B = E * F;
                        "edge" !== f &&
                            P !== d &&
                            y.push({
                                name: "Edge-to-Edge",
                                rows: R,
                                cols: S,
                                total: P,
                                spacingL: Math.round((e / S) * 100) / 100,
                                spacingW: Math.round((t / R) * 100) / 100,
                                coverage: Math.round(Math.min(100, ((P * r) / s) * 100)),
                                description: "Economy option - circles touch (1.0D)",
                                isSelected: !1,
                                isAVIXA: !1,
                            }),
                            "minimal" !== f &&
                                I !== d &&
                                y.push({
                                    name: "Partial Overlap",
                                    rows: D,
                                    cols: A,
                                    total: I,
                                    spacingL: Math.round((e / A) * 100) / 100,
                                    spacingW: Math.round((t / D) * 100) / 100,
                                    coverage: Math.round(Math.min(100, ((I * r) / s) * 100)),
                                    description: "Good uniformity (0.75D)",
                                    isSelected: !1,
                                    isAVIXA: !1,
                                }),
                            "center" !== f &&
                                B !== d &&
                                y.push({
                                    name: "Edge-to-Center",
                                    rows: F,
                                    cols: E,
                                    total: B,
                                    spacingL: Math.round((e / E) * 100) / 100,
                                    spacingW: Math.round((t / F) * 100) / 100,
                                    coverage: Math.round(Math.min(100, ((B * r) / s) * 100)),
                                    description: "Maximum uniformity (0.52D)",
                                    isSelected: !1,
                                    isAVIXA: !1,
                                }),
                            y.sort((e, t) => (e.isSelected ? -1 : t.isSelected ? 1 : e.total - t.total));
                        const T = M !== j,
                            L = s / d,
                            H = p.coverageDiameter,
                            U = H - c,
                            q = H - x,
                            $ = Math.round((U / H) * 100),
                            W = Math.round((q / H) * 100),
                            V = Math.round(($ + W) / 2),
                            O =
                                "m" === j
                                    ? { critical: 10, speech: 25, background: 50 }
                                    : { critical: 100, speech: 250, background: 500 };
                        let z, G, X, J, Q;
                        L <= O.critical
                            ? ((z = "High Density"),
                              (G = "blue"),
                              (X = [
                                  "Recording studios",
                                  "Performance venues",
                                  "Executive boardrooms",
                                  "Critical listening rooms",
                              ]),
                              (J =
                                  "Maximum uniformity with potential phase interaction. Best for applications requiring precise SPL control."))
                            : L <= O.speech
                              ? ((z = "Medium Density"),
                                (G = "green"),
                                (X = [
                                    "Conference rooms",
                                    "Classrooms",
                                    "Training facilities",
                                    "Houses of worship",
                                    "Retail spaces",
                                ]),
                                (J =
                                    "Optimal balance of coverage and cost. Suitable for speech intelligibility and general audio."))
                              : L <= O.background
                                ? ((z = "Standard Density"),
                                  (G = "yellow"),
                                  (X = ["Open offices", "Restaurants", "Lobbies", "Background music systems"]),
                                  (J =
                                      "Cost-effective coverage for background audio. May have minor SPL variations in overlap zones."))
                                : ((z = "Low Density"),
                                  (G = "orange"),
                                  (X = ["Warehouses", "Paging systems", "Large open areas", "Basic announcements"]),
                                  (J =
                                      "Minimum coverage configuration. Expect noticeable SPL drops between speakers. Not recommended for speech clarity."));
                        const K = y.find((e) => "Partial Overlap" === e.name);
                        Q =
                            "edge" === f
                                ? {
                                      verdict: V < 0 ? "Coverage gaps likely" : "Minimal redundancy",
                                      consideration:
                                          "Edge-to-edge provides minimum speaker count but may have audible gaps. Consider for paging/announcement systems only.",
                                      alternative: K
                                          ? `For better uniformity, partial overlap would use ${K.total} speakers.`
                                          : null,
                                  }
                                : "minimal" === f
                                  ? {
                                        verdict: "Recommended",
                                        consideration:
                                            "Partial overlap (0.75D) provides good uniformity with cost efficiency. Standard for most commercial applications.",
                                        alternative: null,
                                    }
                                  : {
                                        verdict: "Maximum Uniformity",
                                        consideration:
                                            "Edge-to-center provides best SPL uniformity for critical listening applications like boardrooms, courtrooms, and performance spaces.",
                                        alternative: K
                                            ? `Partial overlap would achieve adequate coverage with ${K.total} speakers.`
                                            : null,
                                    };
                        const Y = "m" === j ? p.effectiveHeight : 0.3048 * p.effectiveHeight,
                            Z = 20 * Math.log10(Math.max(1, Y) / 1);
                        let ee = null;
                        Z > 14
                            ? (ee = {
                                  level: "high",
                                  color: "red",
                                  title: "High SPL Loss",
                                  message: `At ${p.effectiveHeight}${j} effective height, SPL drops ${Z.toFixed(1)}dB. Consider higher-powered speakers or additional units for speech intelligibility.`,
                                  recommendation:
                                      "Increase amplifier power or consider adding more speakers for critical listening applications.",
                              })
                            : Z > 11
                              ? (ee = {
                                    level: "moderate",
                                    color: "yellow",
                                    title: "Moderate SPL Loss",
                                    message: `At ${p.effectiveHeight}${j} effective height, SPL drops ${Z.toFixed(1)}dB. Standard for commercial spaces.`,
                                    recommendation: "Ensure adequate amplifier headroom for speech applications.",
                                })
                              : Z > 8 &&
                                (ee = {
                                    level: "normal",
                                    color: "green",
                                    title: "Normal SPL Loss",
                                    message: `SPL loss of ${Z.toFixed(1)}dB is within normal range for ceiling speakers.`,
                                    recommendation: null,
                                }),
                            (b = {
                                inputLength: v,
                                inputWidth: w,
                                inputUnit: M,
                                roomLength: e,
                                roomWidth: t,
                                roomArea: Math.round(100 * s) / 100,
                                roomUnit: j,
                                areaUnit: "m" === j ? "m¬≤" : "ft¬≤",
                                recommendedTotal: d,
                                rows: o,
                                cols: n,
                                actualSpacingLength: Math.round(100 * c) / 100,
                                actualSpacingWidth: Math.round(100 * x) / 100,
                                coveragePercent: Math.round(g),
                                layouts: y,
                                unitsConverted: T,
                                sqPerSpeaker: Math.round(10 * L) / 10,
                                overlapPercentL: $,
                                overlapPercentW: W,
                                avgOverlap: V,
                                densityRating: z,
                                densityColor: G,
                                suitableApplications: X,
                                densityNote: J,
                                patternRecommendation: Q,
                                splLossFromHeight: Math.round(10 * Z) / 10,
                                splWarning: ee,
                            });
                        const te = d,
                            se = m.requiredWatts * te * 1.5;
                        u = {
                            speakerCount: te,
                            totalSpeakerPower: Math.round(m.requiredWatts * te * 100) / 100,
                            requiredAmpPower: Math.round(100 * se) / 100,
                            eprPerSpeaker: m.requiredWatts,
                        };
                    }
                    R({ ...m, ceilingCalcs: p, roomRecommendation: b, amplifierCalcs: u });
                },
                className:
                    "w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-4 rounded-lg transition-colors text-lg mb-8 cursor-pointer",
                children: "Calculate Speaker Design",
            }),
            S &&
                _jsxs("div", {
                    className: "space-y-6",
                    children: [
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                            children: [
                                _jsx("h3", {
                                    className: "text-lg font-semibold text-gray-800 mb-4",
                                    children: "EPR Calculation Results (AVIXA Standard)",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6",
                                    children: [
                                        _jsxs("div", {
                                            className: "bg-blue-50 dark:bg-blue-900/20 p-6 rounded-lg border-2 border-blue-200 dark:border-blue-800",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300",
                                                    children: "Required Power per Speaker (EPR)",
                                                }),
                                                _jsxs("div", {
                                                    className: "text-4xl font-bold text-blue-700",
                                                    children: [S.requiredWatts, " W"],
                                                }),
                                                _jsx("div", {
                                                    className: "text-sm text-gray-500 dark:text-gray-400 mt-2",
                                                    children: "Electrical Power Required",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "bg-gray-50 dark:bg-gray-900/50 p-6 rounded-lg border",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-sm text-gray-600 dark:text-gray-300 mb-3",
                                                    children: "AVIXA Formula Breakdown",
                                                }),
                                                _jsxs("div", {
                                                    className: "text-xs text-gray-600 dark:text-gray-300 space-y-2 font-mono",
                                                    children: [
                                                        _jsxs("p", {
                                                            children: [
                                                                "Target SPL (Lp): ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [e, " dB"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            children: [
                                                                "Headroom (H): ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [s, " dB"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            children: [
                                                                "Sensitivity (Ls): ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [r, " dB @ 1W/1m"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            children: [
                                                                "Distance: ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [i, " ", o],
                                                                }),
                                                                " = ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [S.distanceM, " m"],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            children: [
                                                                "Distance Loss: ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [
                                                                        "20√ólog‚ÇÅ‚ÇÄ(",
                                                                        S.distanceM,
                                                                        "/1) = ",
                                                                        S.distanceLoss,
                                                                        " dB",
                                                                    ],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            className: "pt-2 border-t",
                                                            children: [
                                                                "Exponent: (",
                                                                e,
                                                                " + ",
                                                                s,
                                                                " - ",
                                                                r,
                                                                " + ",
                                                                S.distanceLoss,
                                                                ") / 10 = ",
                                                                _jsx("span", {
                                                                    className: "font-bold truncate",
                                                                    children: S.exponent,
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("p", {
                                                            children: [
                                                                "EPR = 10",
                                                                _jsx("sup", { children: S.exponent }),
                                                                " √ó 1W = ",
                                                                _jsxs("span", {
                                                                    className: "font-bold truncate",
                                                                    children: [S.requiredWatts, " W"],
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        S.ceilingCalcs &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsx("h3", {
                                        className: "text-lg font-semibold text-gray-800 mb-4",
                                        children: "Ceiling Speaker Layout Results (AVIXA Standards)",
                                    }),
                                    S.ceilingCalcs.effectiveHeightWarning &&
                                        _jsxs("div", {
                                            className: "mb-4 p-4 bg-red-50 dark:bg-red-900/20 border-2 border-red-300 rounded-lg",
                                            children: [
                                                _jsx("div", {
                                                    className: "font-semibold text-red-700 flex items-center gap-2",
                                                    children: "‚ö†Ô∏è Warning: Invalid Configuration",
                                                }),
                                                _jsxs("p", {
                                                    className: "text-sm text-red-600 mt-1",
                                                    children: [
                                                        "Listener ear height (",
                                                        h,
                                                        " ",
                                                        j,
                                                        ") is too close to or exceeds ceiling height (",
                                                        x,
                                                        " ",
                                                        j,
                                                        "). This results in unrealistic coverage calculations.",
                                                    ],
                                                }),
                                                _jsxs("p", {
                                                    className: "text-sm text-red-600 mt-1",
                                                    children: [
                                                        "Effective height: ",
                                                        S.ceilingCalcs.rawEffectiveHeight,
                                                        " ",
                                                        j,
                                                        " ‚Üí Minimum of 0.1 ",
                                                        j,
                                                        " used.",
                                                    ],
                                                }),
                                                _jsx("p", {
                                                    className: "text-sm text-red-700 font-medium mt-2",
                                                    children:
                                                        "m" === j
                                                            ? "Typical ear height: 1.2m (seated) or 1.5m (standing)"
                                                            : "Typical ear height: 4ft (seated) or 5ft (standing)",
                                                }),
                                            ],
                                        }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-3 gap-6 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className: "bg-purple-50 dark:bg-purple-900/20 p-6 rounded-lg border-2 border-purple-200 dark:border-purple-800",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Coverage Diameter",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-3xl font-bold text-purple-700",
                                                        children: [
                                                            S.ceilingCalcs.coverageDiameter,
                                                            " ",
                                                            S.ceilingCalcs.unit,
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-500 dark:text-gray-400 mt-1",
                                                        children: "at ear level",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-indigo-50 dark:bg-indigo-900/20 p-6 rounded-lg border-2 border-indigo-200 dark:border-indigo-800",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Coverage Radius (r)",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-3xl font-bold text-indigo-700",
                                                        children: [
                                                            S.ceilingCalcs.coverageRadius,
                                                            " ",
                                                            S.ceilingCalcs.unit,
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-pink-50 p-6 rounded-lg border-2 border-pink-200",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Coverage Area",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-3xl font-bold text-pink-700",
                                                        children: [
                                                            S.ceilingCalcs.coverageArea,
                                                            " ",
                                                            S.ceilingCalcs.areaUnit,
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-500 dark:text-gray-400 mt-1",
                                                        children: "per speaker",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className:
                                            "bg-gradient-to-r from-blue-50 to-cyan-50 p-6 rounded-lg border-2 border-blue-200 dark:border-blue-800 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className: "flex items-center justify-between mb-2",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: [
                                                            "Speaker Spacing (",
                                                            S.ceilingCalcs.spacingLabel,
                                                            ")",
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex gap-2",
                                                        children: [
                                                            _jsxs("span", {
                                                                className:
                                                                    "text-xs bg-yellow-100 text-yellow-700 px-2 py-1 rounded-full",
                                                                children: [S.ceilingCalcs.dbVariation, " variation"],
                                                            }),
                                                            _jsx("span", {
                                                                className:
                                                                    "text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full",
                                                                children:
                                                                    "minimal" === f
                                                                        ? "AVIXA Recommended"
                                                                        : "edge" === f
                                                                          ? "Economy"
                                                                          : "Premium",
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "text-5xl font-bold text-blue-700 mb-2",
                                                children: [S.ceilingCalcs.speakerSpacing, " ", S.ceilingCalcs.unit],
                                            }),
                                            _jsx("p", {
                                                className: "text-sm text-gray-600 dark:text-gray-300",
                                                children: S.ceilingCalcs.spacingDescription,
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg mb-6",
                                        children: [
                                            _jsx("h4", {
                                                className: "font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                                children: "AVIXA Spacing Options Comparison",
                                            }),
                                            _jsx("div", {
                                                className: "overflow-x-auto",
                                                children: _jsxs("table", {
                                                    className: "w-full text-sm",
                                                    children: [
                                                        _jsx("thead", {
                                                            children: _jsxs("tr", {
                                                                className: "border-b border-gray-300 dark:border-gray-600",
                                                                children: [
                                                                    _jsx("th", {
                                                                        className: "text-left py-2 px-2",
                                                                        children: "Pattern",
                                                                    }),
                                                                    _jsx("th", {
                                                                        className: "text-left py-2 px-2",
                                                                        children: "Formula",
                                                                    }),
                                                                    _jsx("th", {
                                                                        className: "text-left py-2 px-2",
                                                                        children: "Spacing",
                                                                    }),
                                                                    _jsx("th", {
                                                                        className: "text-left py-2 px-2",
                                                                        children: "SPL Variation",
                                                                    }),
                                                                    _jsx("th", {
                                                                        className: "text-left py-2 px-2",
                                                                        children: "Use Case",
                                                                    }),
                                                                ],
                                                            }),
                                                        }),
                                                        _jsxs("tbody", {
                                                            children: [
                                                                _jsxs("tr", {
                                                                    className:
                                                                        "border-b " +
                                                                        ("edge" === f ? "bg-blue-100" : ""),
                                                                    children: [
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-medium",
                                                                            children: "Edge-to-Edge",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-mono text-xs",
                                                                            children: "D = 2r",
                                                                        }),
                                                                        _jsxs("td", {
                                                                            className: "py-2 px-2",
                                                                            children: [
                                                                                (
                                                                                    2 * S.ceilingCalcs.coverageRadius
                                                                                ).toFixed(2),
                                                                                " ",
                                                                                S.ceilingCalcs.unit,
                                                                            ],
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-orange-600",
                                                                            children: "¬±4.35 dB",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-xs",
                                                                            children: "Paging, BGM",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsxs("tr", {
                                                                    className:
                                                                        "border-b " +
                                                                        ("minimal" === f ? "bg-blue-100" : ""),
                                                                    children: [
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-medium",
                                                                            children: "Minimum Overlap",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-mono text-xs",
                                                                            children: "D = r‚àö2",
                                                                        }),
                                                                        _jsxs("td", {
                                                                            className: "py-2 px-2",
                                                                            children: [
                                                                                (
                                                                                    S.ceilingCalcs.coverageRadius *
                                                                                    Math.sqrt(2)
                                                                                ).toFixed(2),
                                                                                " ",
                                                                                S.ceilingCalcs.unit,
                                                                            ],
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-green-600",
                                                                            children: "¬±2 dB",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-xs",
                                                                            children: "Speech, Music",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsxs("tr", {
                                                                    className: "center" === f ? "bg-blue-100" : "",
                                                                    children: [
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-medium",
                                                                            children: "Full Overlap",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 font-mono text-xs",
                                                                            children: "D = r",
                                                                        }),
                                                                        _jsxs("td", {
                                                                            className: "py-2 px-2",
                                                                            children: [
                                                                                S.ceilingCalcs.coverageRadius,
                                                                                " ",
                                                                                S.ceilingCalcs.unit,
                                                                            ],
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-blue-600",
                                                                            children: "¬±1.2 dB",
                                                                        }),
                                                                        _jsx("td", {
                                                                            className: "py-2 px-2 text-xs",
                                                                            children: "Critical Listening",
                                                                        }),
                                                                    ],
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "p-4 bg-gray-50 dark:bg-gray-900/50 rounded-lg overflow-hidden",
                                        children: [
                                            _jsx("h4", {
                                                className: "font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                                children: "Calculation Details",
                                            }),
                                            _jsxs("div", {
                                                className: "grid md:grid-cols-2 gap-4 text-sm",
                                                children: [
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-500 dark:text-gray-400",
                                                                children: "Effective Height (H - h):",
                                                            }),
                                                            _jsxs("p", {
                                                                className: "font-mono text-gray-700 dark:text-gray-300",
                                                                children: [
                                                                    x,
                                                                    " - ",
                                                                    h,
                                                                    " = ",
                                                                    S.ceilingCalcs.effectiveHeight,
                                                                    " ",
                                                                    S.ceilingCalcs.unit,
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-500 dark:text-gray-400",
                                                                children: "Coverage Angle (C‚à†):",
                                                            }),
                                                            _jsxs("p", {
                                                                className: "font-mono text-gray-700 dark:text-gray-300",
                                                                children: [g, "¬∞ (nominal)"],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "mt-3 pt-3 border-t border-gray-200 dark:border-gray-700 space-y-2",
                                                children: [
                                                    _jsxs("p", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            _jsx("strong", {
                                                                children: "AVIXA Coverage Diameter Formula:",
                                                            }),
                                                            " D = 2 √ó (H - h) √ó tan(C‚à† √∑ 2)",
                                                        ],
                                                    }),
                                                    _jsxs("p", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            _jsx("strong", { children: "Note:" }),
                                                            " Effective coverage angle is typically 70-80% of nominal. For critical applications, consider using 80% of the specified angle.",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                        S.roomRecommendation &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsxs("h3", {
                                        className: "text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                        children: [
                                            _jsx("span", { className: "text-green-600", children: "üìê" }),
                                            " Speaker Count Recommendation",
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-4 gap-4 mb-6",
                                        children: [
                                            _jsxs("div", {
                                                className: "bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Room Dimensions",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xl font-bold text-gray-800",
                                                        children: [
                                                            S.roomRecommendation.roomLength,
                                                            " √ó ",
                                                            S.roomRecommendation.roomWidth,
                                                            " ",
                                                            S.roomRecommendation.roomUnit,
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-sm text-gray-500 dark:text-gray-400",
                                                        children: [
                                                            "Area: ",
                                                            S.roomRecommendation.roomArea,
                                                            " ",
                                                            S.roomRecommendation.areaUnit,
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-300",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-green-700 font-medium",
                                                        children: "Recommended Speakers",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-4xl font-bold text-green-700",
                                                        children: S.roomRecommendation.recommendedTotal,
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-sm text-green-600",
                                                        children: [
                                                            S.roomRecommendation.rows,
                                                            " rows √ó ",
                                                            S.roomRecommendation.cols,
                                                            " columns",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Actual Spacing",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xl font-bold text-blue-700",
                                                        children: [
                                                            S.roomRecommendation.actualSpacingLength,
                                                            " √ó ",
                                                            S.roomRecommendation.actualSpacingWidth,
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-sm text-gray-500 dark:text-gray-400",
                                                        children: ["L √ó W (", S.roomRecommendation.roomUnit, ")"],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg border",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Est. Coverage",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xl font-bold text-purple-700",
                                                        children: [S.roomRecommendation.coveragePercent, "%"],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-500 dark:text-gray-400",
                                                        children: "of room area",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    S.roomRecommendation.layouts &&
                                        S.roomRecommendation.layouts.length > 1 &&
                                        _jsxs("div", {
                                            className: "mb-6",
                                            children: [
                                                _jsx("h4", {
                                                    className: "font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                                    children: "Layout Options Comparison",
                                                }),
                                                _jsx("div", {
                                                    className: "grid md:grid-cols-3 gap-4",
                                                    children: S.roomRecommendation.layouts.map((e, t) =>
                                                        _jsxs(
                                                            "div",
                                                            {
                                                                className:
                                                                    "p-4 rounded-lg border-2 " +
                                                                    (e.isSelected
                                                                        ? "bg-green-50 dark:bg-green-900/20 border-green-400"
                                                                        : e.isAVIXA
                                                                          ? "bg-blue-50 dark:bg-blue-900/20 border-blue-300"
                                                                          : "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700"),
                                                                children: [
                                                                    e.isSelected &&
                                                                        _jsx("div", {
                                                                            className:
                                                                                "text-xs font-bold text-green-700 mb-1",
                                                                            children: "‚úì YOUR SELECTION",
                                                                        }),
                                                                    !e.isSelected &&
                                                                        e.isAVIXA &&
                                                                        _jsx("div", {
                                                                            className:
                                                                                "text-xs font-bold text-blue-600 mb-1",
                                                                            children: "‚òÖ AVIXA STANDARD",
                                                                        }),
                                                                    !e.isSelected &&
                                                                        !e.isAVIXA &&
                                                                        _jsx("div", {
                                                                            className:
                                                                                "text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",
                                                                            children: "ALTERNATIVE",
                                                                        }),
                                                                    _jsx("div", {
                                                                        className:
                                                                            "font-semibold " +
                                                                            (e.isSelected
                                                                                ? "text-green-800 dark:text-green-200"
                                                                                : e.isAVIXA
                                                                                  ? "text-blue-800 dark:text-blue-200"
                                                                                  : "text-gray-800"),
                                                                        children: e.name,
                                                                    }),
                                                                    _jsxs("div", {
                                                                        className:
                                                                            "text-3xl font-bold my-2 " +
                                                                            (e.isSelected
                                                                                ? "text-green-700"
                                                                                : e.isAVIXA
                                                                                  ? "text-blue-700"
                                                                                  : "text-gray-800"),
                                                                        children: [e.total, " speakers"],
                                                                    }),
                                                                    _jsxs("div", {
                                                                        className: "text-sm text-gray-600 dark:text-gray-300 space-y-1",
                                                                        children: [
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Grid: ",
                                                                                    e.rows,
                                                                                    " √ó ",
                                                                                    e.cols,
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Spacing: ",
                                                                                    e.spacingL,
                                                                                    " √ó ",
                                                                                    e.spacingW,
                                                                                    " ",
                                                                                    S.roomRecommendation.roomUnit,
                                                                                ],
                                                                            }),
                                                                            _jsxs("div", {
                                                                                children: [
                                                                                    "Coverage: ~",
                                                                                    e.coverage,
                                                                                    "%",
                                                                                ],
                                                                            }),
                                                                        ],
                                                                    }),
                                                                    _jsx("div", {
                                                                        className:
                                                                            "text-xs mt-2 " +
                                                                            (e.isSelected
                                                                                ? "text-green-600"
                                                                                : e.isAVIXA
                                                                                  ? "text-blue-600"
                                                                                  : "text-gray-500 dark:text-gray-400"),
                                                                        children: e.description,
                                                                    }),
                                                                ],
                                                            },
                                                            t
                                                        )
                                                    ),
                                                }),
                                            ],
                                        }),
                                    _jsxs("div", {
                                        className: "p-3 sm:p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "font-semibold text-yellow-800 dark:text-yellow-200 mb-2 flex items-center gap-2 text-sm sm:text-base",
                                                children: ["üìã Layout - ", S.ceilingCalcs.spacingLabel],
                                            }),
                                            _jsx("div", {
                                                className: "bg-white dark:bg-gray-800 p-2 sm:p-4 rounded border overflow-x-auto",
                                                children: (() => {
                                                    const e = S.roomRecommendation.roomLength,
                                                        t = S.roomRecommendation.roomWidth,
                                                        s = e / t,
                                                        a = "undefined" != typeof window && window.innerWidth < 640,
                                                        r = a ? Math.min(280, window.innerWidth - 80) : 400,
                                                        l = a ? 220 : 300;
                                                    let i, n;
                                                    s > r / l ? ((i = r), (n = r / s)) : ((n = l), (i = l * s)),
                                                        (i = Math.max(i, a ? 100 : 120)),
                                                        (n = Math.max(n, a ? 60 : 80));
                                                    const o = S.roomRecommendation.rows,
                                                        d = S.roomRecommendation.cols,
                                                        c = S.roomRecommendation.recommendedTotal,
                                                        m = i / e,
                                                        x = n / t,
                                                        u = e / d,
                                                        h = t / o,
                                                        p = u / 2,
                                                        g = h / 2,
                                                        b = S.ceilingCalcs.coverageDiameter,
                                                        y = a ? 6 : 8,
                                                        j = a ? 18 : 28,
                                                        _ = Math.min(0.15 * b, 0.3 * u, 0.3 * h),
                                                        v = Math.max(y, Math.min(j, _ * Math.min(m, x))),
                                                        N = b * m,
                                                        w = c <= (a ? 20 : 50) && v >= 12;
                                                    let C, M;
                                                    "edge" === f
                                                        ? ((C = 0.08), (M = 0.4))
                                                        : "minimal" === f
                                                          ? ((C = 0.06), (M = 0.3))
                                                          : ((C = 0.04), (M = 0.25));
                                                    const k = [];
                                                    for (let e = 0; e < o; e++)
                                                        for (let t = 0; t < d; t++) {
                                                            const s = p + t * u,
                                                                a = g + e * h,
                                                                r = s * m,
                                                                l = a * x;
                                                            k.push({
                                                                roomX: s,
                                                                roomY: a,
                                                                pixelX: r,
                                                                pixelY: l,
                                                                index: e * d + t,
                                                            });
                                                        }
                                                    const R = a ? "9px" : "11px";
                                                    return _jsxs("div", {
                                                        style: {
                                                            position: "relative",
                                                            width: i + "px",
                                                            height: n + "px",
                                                            backgroundColor: "#f8fafc",
                                                            border: a ? "2px solid #64748b" : "3px solid #64748b",
                                                            borderRadius: "4px",
                                                            marginLeft: (a ? 28 : 40) + "px",
                                                            marginTop: (a ? 22 : 30) + "px",
                                                            marginBottom: "8px",
                                                            boxShadow: "inset 0 2px 6px rgba(0,0,0,0.08)",
                                                        },
                                                        children: [
                                                            _jsxs("div", {
                                                                style: {
                                                                    position: "absolute",
                                                                    top: a ? "-18px" : "-24px",
                                                                    left: "50%",
                                                                    transform: "translateX(-50%)",
                                                                    fontSize: R,
                                                                    fontWeight: "bold",
                                                                    color: "#475569",
                                                                    backgroundColor: "#f1f5f9",
                                                                    padding: a ? "1px 4px" : "2px 8px",
                                                                    borderRadius: "4px",
                                                                    whiteSpace: "nowrap",
                                                                },
                                                                children: [e, " ", S.roomRecommendation.roomUnit],
                                                            }),
                                                            _jsxs("div", {
                                                                style: {
                                                                    position: "absolute",
                                                                    left: a ? "-24px" : "-36px",
                                                                    top: "50%",
                                                                    transform: "translateY(-50%) rotate(-90deg)",
                                                                    fontSize: R,
                                                                    fontWeight: "bold",
                                                                    color: "#475569",
                                                                    backgroundColor: "#f1f5f9",
                                                                    padding: a ? "1px 4px" : "2px 8px",
                                                                    borderRadius: "4px",
                                                                    whiteSpace: "nowrap",
                                                                },
                                                                children: [t, " ", S.roomRecommendation.roomUnit],
                                                            }),
                                                            ...k.map((e, t) =>
                                                                _jsx(
                                                                    "div",
                                                                    {
                                                                        style: {
                                                                            position: "absolute",
                                                                            left: e.pixelX - N / 2 + "px",
                                                                            top: e.pixelY - N / 2 + "px",
                                                                            width: N + "px",
                                                                            height: N + "px",
                                                                            borderRadius: "50%",
                                                                            border: `${a ? "1px" : "1.5px"} dashed rgba(34, 197, 94, ${M})`,
                                                                            backgroundColor: `rgba(34, 197, 94, ${C})`,
                                                                            pointerEvents: "none",
                                                                            zIndex: 1,
                                                                        },
                                                                    },
                                                                    "cov-" + t
                                                                )
                                                            ),
                                                            ...k.map((e, t) =>
                                                                _jsx(
                                                                    "div",
                                                                    {
                                                                        style: {
                                                                            position: "absolute",
                                                                            left: e.pixelX - v / 2 + "px",
                                                                            top: e.pixelY - v / 2 + "px",
                                                                            width: v + "px",
                                                                            height: v + "px",
                                                                            borderRadius: "50%",
                                                                            backgroundColor: "#10b981",
                                                                            border:
                                                                                (a ? "1px" : "2px") + " solid #047857",
                                                                            display: "flex",
                                                                            alignItems: "center",
                                                                            justifyContent: "center",
                                                                            fontSize: v > 14 ? "7px" : "5px",
                                                                            color: "white",
                                                                            fontWeight: "bold",
                                                                            boxShadow: "0 1px 2px rgba(0,0,0,0.3)",
                                                                            zIndex: 2,
                                                                        },
                                                                        children: w ? t + 1 : "",
                                                                    },
                                                                    "spk-" + t
                                                                )
                                                            ),
                                                        ],
                                                    });
                                                })(),
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "flex flex-wrap items-center justify-center gap-2 sm:gap-4 mt-2 sm:mt-3 text-xs text-gray-600 dark:text-gray-300",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                style: {
                                                                    width: "10px",
                                                                    height: "10px",
                                                                    borderRadius: "50%",
                                                                    backgroundColor: "#10b981",
                                                                    border: "1px solid #047857",
                                                                },
                                                            }),
                                                            _jsx("span", { className: "text-xs", children: "Speaker" }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                style: {
                                                                    width: "16px",
                                                                    height: "16px",
                                                                    borderRadius: "50%",
                                                                    border: "1px dashed rgba(34,197,94,0.5)",
                                                                    backgroundColor: "rgba(34,197,94,0.1)",
                                                                },
                                                            }),
                                                            _jsxs("span", {
                                                                className: "text-xs hidden sm:inline",
                                                                children: [
                                                                    "Coverage (",
                                                                    S.ceilingCalcs.coverageDiameter,
                                                                    " ",
                                                                    S.ceilingCalcs.unit,
                                                                    ")",
                                                                ],
                                                            }),
                                                            _jsx("span", {
                                                                className: "text-xs sm:hidden",
                                                                children: "Coverage",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1 text-gray-500 dark:text-gray-400",
                                                        children: [
                                                            _jsx("span", {
                                                                className:
                                                                    "edge" === f
                                                                        ? "text-orange-600 font-medium"
                                                                        : "minimal" === f
                                                                          ? "text-green-600 font-medium"
                                                                          : "text-blue-600 font-medium",
                                                                children: S.ceilingCalcs.dbVariation,
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("p", {
                                                className: "text-xs text-yellow-700 mt-2 text-center",
                                                children: [
                                                    S.roomRecommendation.rows,
                                                    "√ó",
                                                    S.roomRecommendation.cols,
                                                    " = ",
                                                    S.roomRecommendation.recommendedTotal,
                                                    " speakers",
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",
                                        children: [
                                            _jsx("h4", {
                                                className: "font-semibold text-blue-800 dark:text-blue-200 mb-2",
                                                children: "üí° Installation Best Practices",
                                            }),
                                            _jsxs("ul", {
                                                className: "text-sm text-blue-700 space-y-1",
                                                children: [
                                                    _jsx("li", {
                                                        children:
                                                            "‚Ä¢ Position first row at half the calculated spacing from the front wall",
                                                    }),
                                                    _jsx("li", {
                                                        children:
                                                            "‚Ä¢ Maintain consistent spacing throughout the grid pattern",
                                                    }),
                                                    _jsx("li", {
                                                        children:
                                                            "‚Ä¢ Adjust layout for obstacles (columns, light fixtures, HVAC)",
                                                    }),
                                                    _jsx("li", {
                                                        children:
                                                            "‚Ä¢ Consider asymmetric layouts for non-rectangular rooms",
                                                    }),
                                                    _jsx("li", {
                                                        children:
                                                            "‚Ä¢ Verify acoustic modeling for critical applications",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className:
                                            "mt-4 p-4 rounded-lg border-2 " +
                                            ("blue" === S.roomRecommendation.densityColor
                                                ? "bg-blue-50 dark:bg-blue-900/20 border-blue-300"
                                                : "green" === S.roomRecommendation.densityColor
                                                  ? "bg-green-50 dark:bg-green-900/20 border-green-300"
                                                  : "yellow" === S.roomRecommendation.densityColor
                                                    ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300"
                                                    : "bg-orange-50 dark:bg-orange-900/20 border-orange-300"),
                                        children: [
                                            _jsxs("h4", {
                                                className:
                                                    "font-semibold mb-3 flex items-center gap-2 " +
                                                    ("blue" === S.roomRecommendation.densityColor
                                                        ? "text-blue-800 dark:text-blue-200"
                                                        : "green" === S.roomRecommendation.densityColor
                                                          ? "text-green-800 dark:text-green-200"
                                                          : "yellow" === S.roomRecommendation.densityColor
                                                            ? "text-yellow-800 dark:text-yellow-200"
                                                            : "text-orange-800 dark:text-orange-200"),
                                                children: ["üìã Professional Assessment"],
                                            }),
                                            _jsxs("div", {
                                                className: "grid md:grid-cols-2 gap-4 mb-4",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "space-y-2",
                                                        children: [
                                                            _jsxs("div", {
                                                                className: "flex items-center gap-2",
                                                                children: [
                                                                    _jsx("span", {
                                                                        className:
                                                                            "inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium " +
                                                                            ("blue" ===
                                                                            S.roomRecommendation.densityColor
                                                                                ? "bg-blue-200 text-blue-800 dark:text-blue-200"
                                                                                : "green" ===
                                                                                    S.roomRecommendation.densityColor
                                                                                  ? "bg-green-200 text-green-800 dark:text-green-200"
                                                                                  : "yellow" ===
                                                                                      S.roomRecommendation.densityColor
                                                                                    ? "bg-yellow-200 text-yellow-800 dark:text-yellow-200"
                                                                                    : "bg-orange-200 text-orange-800 dark:text-orange-200"),
                                                                        children: S.roomRecommendation.densityRating,
                                                                    }),
                                                                    _jsxs("span", {
                                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                                        children: [
                                                                            S.roomRecommendation.sqPerSpeaker,
                                                                            " ",
                                                                            S.roomRecommendation.areaUnit,
                                                                            "/speaker",
                                                                        ],
                                                                    }),
                                                                ],
                                                            }),
                                                            _jsxs("div", {
                                                                className: "text-sm text-gray-600 dark:text-gray-300",
                                                                children: [
                                                                    _jsx("span", {
                                                                        className: "font-medium",
                                                                        children: "Overlap: ",
                                                                    }),
                                                                    S.roomRecommendation.avgOverlap,
                                                                    "% average (",
                                                                    S.roomRecommendation.overlapPercentL,
                                                                    "% √ó ",
                                                                    S.roomRecommendation.overlapPercentW,
                                                                    "%)",
                                                                ],
                                                            }),
                                                            _jsxs("div", {
                                                                className: "text-sm text-gray-600 dark:text-gray-300",
                                                                children: [
                                                                    _jsx("span", {
                                                                        className: "font-medium",
                                                                        children: "Pattern: ",
                                                                    }),
                                                                    S.roomRecommendation.patternRecommendation.verdict,
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("div", {
                                                                className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                                children: "Suitable Applications:",
                                                            }),
                                                            _jsx("div", {
                                                                className: "flex flex-wrap gap-1",
                                                                children: S.roomRecommendation.suitableApplications.map(
                                                                    (e, t) =>
                                                                        _jsx(
                                                                            "span",
                                                                            {
                                                                                className:
                                                                                    "inline-flex items-center px-2 py-0.5 rounded text-xs bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300",
                                                                                children: e,
                                                                            },
                                                                            t
                                                                        )
                                                                ),
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsx("p", {
                                                className:
                                                    "text-sm " +
                                                    ("blue" === S.roomRecommendation.densityColor
                                                        ? "text-blue-700"
                                                        : "green" === S.roomRecommendation.densityColor
                                                          ? "text-green-700"
                                                          : "yellow" === S.roomRecommendation.densityColor
                                                            ? "text-yellow-700"
                                                            : "text-orange-700"),
                                                children: S.roomRecommendation.densityNote,
                                            }),
                                            S.roomRecommendation.patternRecommendation.consideration &&
                                                _jsxs("p", {
                                                    className:
                                                        "text-sm text-gray-600 dark:text-gray-300 mt-2 pt-2 border-t border-gray-200 dark:border-gray-700",
                                                    children: [
                                                        _jsx("span", { className: "font-medium", children: "Note: " }),
                                                        S.roomRecommendation.patternRecommendation.consideration,
                                                    ],
                                                }),
                                            S.roomRecommendation.patternRecommendation.alternative &&
                                                _jsxs("p", {
                                                    className:
                                                        "text-sm text-amber-700 mt-2 font-semibold bg-amber-50 dark:bg-amber-900/20 px-3 py-2 rounded-lg border border-amber-200 dark:border-amber-800",
                                                    children: [
                                                        "üí° ",
                                                        S.roomRecommendation.patternRecommendation.alternative,
                                                    ],
                                                }),
                                            S.roomRecommendation.splWarning &&
                                                _jsxs("div", {
                                                    className:
                                                        "mt-4 p-4 rounded-lg border-2 " +
                                                        ("high" === S.roomRecommendation.splWarning.level
                                                            ? "bg-red-50 dark:bg-red-900/20 border-red-300"
                                                            : "moderate" === S.roomRecommendation.splWarning.level
                                                              ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-300"
                                                              : "bg-green-50 dark:bg-green-900/20 border-green-300"),
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2 mb-2",
                                                            children: [
                                                                _jsx("span", {
                                                                    className: "text-lg",
                                                                    children:
                                                                        "high" === S.roomRecommendation.splWarning.level
                                                                            ? "‚ö†Ô∏è"
                                                                            : "moderate" ===
                                                                                S.roomRecommendation.splWarning.level
                                                                              ? "üì¢"
                                                                              : "‚úì",
                                                                }),
                                                                _jsx("span", {
                                                                    className:
                                                                        "font-bold " +
                                                                        ("high" ===
                                                                        S.roomRecommendation.splWarning.level
                                                                            ? "text-red-700"
                                                                            : "moderate" ===
                                                                                S.roomRecommendation.splWarning.level
                                                                              ? "text-yellow-700"
                                                                              : "text-green-700"),
                                                                    children: S.roomRecommendation.splWarning.title,
                                                                }),
                                                                _jsxs("span", {
                                                                    className: "text-sm text-gray-600 dark:text-gray-300 ml-2",
                                                                    children: [
                                                                        "(Inverse Square Law: -",
                                                                        S.roomRecommendation.splLossFromHeight,
                                                                        "dB)",
                                                                    ],
                                                                }),
                                                            ],
                                                        }),
                                                        _jsx("p", {
                                                            className:
                                                                "text-sm " +
                                                                ("high" === S.roomRecommendation.splWarning.level
                                                                    ? "text-red-700"
                                                                    : "moderate" ===
                                                                        S.roomRecommendation.splWarning.level
                                                                      ? "text-yellow-700"
                                                                      : "text-green-700"),
                                                            children: S.roomRecommendation.splWarning.message,
                                                        }),
                                                        S.roomRecommendation.splWarning.recommendation &&
                                                            _jsx("p", {
                                                                className: "text-sm text-gray-600 dark:text-gray-300 mt-2 font-medium",
                                                                children:
                                                                    S.roomRecommendation.splWarning.recommendation,
                                                            }),
                                                    ],
                                                }),
                                        ],
                                    }),
                                ],
                            }),
                        S.amplifierCalcs &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-8 border",
                                children: [
                                    _jsxs("h3", {
                                        className: "text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                        children: [
                                            _jsx("span", { className: "text-green-600", children: "‚ö°" }),
                                            " Amplifier Power Requirements",
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-sm text-gray-600 dark:text-gray-300 mb-4",
                                        children: "Based on the recommended speaker count and EPR calculation above.",
                                    }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-4 gap-4 mb-4",
                                        children: [
                                            _jsxs("div", {
                                                className: "bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg border",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Speakers",
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-2xl font-bold text-gray-800",
                                                        children: S.amplifierCalcs.speakerCount,
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: "from layout above",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg border-2 border-blue-200 dark:border-blue-800",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Total Speaker Power",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-blue-700",
                                                        children: [S.amplifierCalcs.totalSpeakerPower, " W"],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            S.amplifierCalcs.eprPerSpeaker,
                                                            "W √ó ",
                                                            S.amplifierCalcs.speakerCount,
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-green-50 dark:bg-green-900/20 p-4 rounded-lg border-2 border-green-200 dark:border-green-800",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Required Amp Power",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-green-700",
                                                        children: [S.amplifierCalcs.requiredAmpPower, " W"],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [S.amplifierCalcs.totalSpeakerPower, "W √ó 1.5"],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg border-2 border-yellow-300",
                                                children: [
                                                    _jsx("div", {
                                                        className: "text-sm text-gray-600 dark:text-gray-300",
                                                        children: "Recommended Size",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-2xl font-bold text-yellow-700",
                                                        children: [
                                                            ((I = S.amplifierCalcs.requiredAmpPower),
                                                            [60, 120, 240, 500, 1e3, 2e3, 4e3, 8e3].find(
                                                                (e) => e >= I
                                                            ) || 1e3 * Math.ceil(I / 1e3) + "+"),
                                                            " W",
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: "next standard size",
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsx("div", {
                                        className: "p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg",
                                        children: _jsxs("p", {
                                            className: "text-sm text-gray-600 dark:text-gray-300",
                                            children: [
                                                _jsx("strong", { children: "Calculation:" }),
                                                " ",
                                                S.amplifierCalcs.eprPerSpeaker,
                                                "W (EPR) √ó ",
                                                S.amplifierCalcs.speakerCount,
                                                " speakers √ó 1.5 (headroom) = ",
                                                _jsxs("strong", { children: [S.amplifierCalcs.requiredAmpPower, "W"] }),
                                            ],
                                        }),
                                    }),
                                ],
                            }),
                    ],
                }),
        ],
    });
    var I;
}
function DSPCalculator() {
    const [e, t] = useState("metric"),
        [s, a] = useState("medium_conference"),
        r = {
            huddle: {
                name: "Huddle Room (2-4 people)",
                lengthM: 3,
                widthM: 3,
                heightM: 2.7,
                rt60: 0.4,
                noiseFloor: 30,
                micCount: 1,
                talkerToMic: 0.4,
                talkerToFarthest: 3,
                speakerToListener: 1.5,
                micToSpeaker: 2,
                description: "~100 sq ft / 9 m¬≤ - Quick meetings, 1-on-1s",
            },
            small_conference: {
                name: "Small Conference (4-6 people)",
                lengthM: 5,
                widthM: 4,
                heightM: 2.7,
                rt60: 0.5,
                noiseFloor: 32,
                micCount: 2,
                talkerToMic: 0.5,
                talkerToFarthest: 4,
                speakerToListener: 1.5,
                micToSpeaker: 2.5,
                description: "~150 sq ft / 14 m¬≤ - Team meetings",
            },
            medium_conference: {
                name: "Medium Conference (8-12 people)",
                lengthM: 8,
                widthM: 6,
                heightM: 3,
                rt60: 0.5,
                noiseFloor: 35,
                micCount: 4,
                talkerToMic: 0.5,
                talkerToFarthest: 7,
                speakerToListener: 2,
                micToSpeaker: 3,
                description: "~300 sq ft / 28 m¬≤ - Department meetings",
            },
            large_boardroom: {
                name: "Large Boardroom (12-20 people)",
                lengthM: 12,
                widthM: 8,
                heightM: 3,
                rt60: 0.6,
                noiseFloor: 35,
                micCount: 8,
                talkerToMic: 0.6,
                talkerToFarthest: 10,
                speakerToListener: 2.5,
                micToSpeaker: 4,
                description: "~500 sq ft / 46 m¬≤ - Board meetings, presentations",
            },
            training_room: {
                name: "Training Room (20-30 people)",
                lengthM: 15,
                widthM: 10,
                heightM: 3.5,
                rt60: 0.7,
                noiseFloor: 38,
                micCount: 2,
                talkerToMic: 0.4,
                talkerToFarthest: 14,
                speakerToListener: 3,
                micToSpeaker: 5,
                description: "~750 sq ft / 70 m¬≤ - Training, workshops",
            },
            auditorium: {
                name: "Auditorium (50+ people)",
                lengthM: 25,
                widthM: 15,
                heightM: 5,
                rt60: 1,
                noiseFloor: 40,
                micCount: 4,
                talkerToMic: 0.3,
                talkerToFarthest: 22,
                speakerToListener: 4,
                micToSpeaker: 8,
                description: "~2000 sq ft / 185 m¬≤ - Large presentations, lectures",
            },
            custom: {
                name: "Custom (Manual Entry)",
                lengthM: 10,
                widthM: 8,
                heightM: 3,
                rt60: 0.6,
                noiseFloor: 35,
                micCount: 4,
                talkerToMic: 0.5,
                talkerToFarthest: 8,
                speakerToListener: 2,
                micToSpeaker: 2.5,
                description: "Enter your own room specifications",
            },
        },
        l = (t) => ("" === t || null == t ? "" : "imperial" === e ? Math.round(10 * ((e) => 3.28084 * e)(t)) / 10 : t),
        i = (t, s) => {
            if ("" === t || null == t) return void s("");
            const a = parseFloat(t);
            isNaN(a) ? s("") : s("imperial" === e ? a / 3.28084 : a);
        },
        [n, o] = useState(4),
        [d, c] = useState(-50),
        [m, x] = useState(4),
        [u, h] = useState(24),
        [p, g] = useState(24),
        [b, f] = useState(0.5),
        [y, j] = useState(3),
        [_, v] = useState(3),
        [N, w] = useState("presentation"),
        [C, M] = useState(2),
        [k, S] = useState(35),
        [R, P] = useState(8),
        [A, D] = useState(6),
        [I, E] = useState(3),
        [F, B] = useState(0.5),
        [T, L] = useState(7),
        [H, U] = useState(2),
        [q, $] = useState("cardioid"),
        [W, V] = useState(!1),
        [O, z] = useState(78),
        [G, X] = useState(74),
        [J, Q] = useState(["aec", "eq", "compressor", "matrix", "delay"]),
        [K, Y] = useState(48e3),
        [Z, ee] = useState(24),
        [te, se] = useState(16),
        [ae, re] = useState("dante"),
        [le, ie] = useState({ mics: 4, programAudio: 2, usbVoip: 2, playback: 1, wireless: 2, hdmiAudio: 2 }),
        [ne, oe] = useState({ loudspeakers: 4, amplifiers: 2, ucCodec: 1, overflow: 2, recording: 2 }),
        [de, ce] = useState(1),
        [me, xe] = useState(1),
        [ue, he] = useState(null),
        [pe, ge] = useState("input"),
        [be, fe] = useState(!1),
        ye = (e, t) => {
            ie("" !== t ? (s) => ({ ...s, [e]: Math.max(0, parseInt(t) || 0) }) : (t) => ({ ...t, [e]: "" }));
        },
        je = (e, t) => {
            oe("" !== t ? (s) => ({ ...s, [e]: Math.max(0, parseInt(t) || 0) }) : (t) => ({ ...t, [e]: "" }));
        },
        _e = (e, t, s = !1) =>
            _jsxs("span", {
                className:
                    "inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium " +
                    (e
                        ? "bg-green-100 text-green-700"
                        : s
                          ? "bg-orange-100 text-orange-700"
                          : "bg-red-100 text-red-700"),
                children: [e ? "‚úÖ" : s ? "‚ö†Ô∏è" : "‚ùå", " ", t],
            });
    return _jsxs("div", {
        className: "max-w-7xl mx-auto px-6 py-8",
        children: [
            _jsx("div", {
                className: "mb-4",
                children: _jsxs("span", {
                    className:
                        "inline-flex items-center gap-2 px-3 py-1.5 bg-purple-100 text-purple-800 dark:text-purple-200 text-sm font-semibold rounded-full border border-purple-200 dark:border-purple-800",
                    children: [_jsx("span", { className: "text-purple-600", children: "‚ö°" }), " Advanced Tool"],
                }),
            }),
            _jsxs("div", {
                className: "flex items-center justify-between mb-2",
                children: [
                    _jsx("h1", { className: "text-3xl font-bold text-gray-900 dark:text-gray-100", children: "DSP System Calculator" }),
                    ue !== null &&
                        _jsx("button", {
                            onClick: () => fe(!0),
                            className:
                                "px-3 py-1.5 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                            children: "‚ü≤ Reset Tool",
                        }),
                ],
            }),
            _jsx(ResetConfirmModal, {
                isOpen: be,
                onConfirm: () => {
                    t("metric"),
                        a("medium_conference"),
                        v(3),
                        w("presentation"),
                        M(2),
                        S(35),
                        P(8),
                        D(6),
                        E(3),
                        B(0.5),
                        L(7),
                        U(2),
                        $("cardioid"),
                        V(!1),
                        z(78),
                        X(74),
                        Q(["aec", "eq", "compressor", "matrix", "delay"]),
                        Y(48e3),
                        ee(24),
                        se(16),
                        re("dante"),
                        ie({ mics: 4, programAudio: 2, usbVoip: 2, playback: 1, wireless: 2, hdmiAudio: 2 }),
                        oe({ loudspeakers: 4, amplifiers: 2, ucCodec: 1, overflow: 2, recording: 2 }),
                        ce(1),
                        xe(1),
                        he(null),
                        ge("input"),
                        fe(!1);
                },
                onCancel: () => fe(!1),
            }),
            _jsx("p", {
                className: "text-gray-600 dark:text-gray-300 mb-4",
                children: "Professional DSP design tool based on AVIXA standards, IEC 60268, and industry practices",
            }),
            _jsx("div", {
                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-4 mb-6 border border-gray-200 dark:border-gray-700",
                children: _jsxs("p", {
                    className: "text-sm text-gray-600 dark:text-gray-300",
                    children: [
                        _jsx("span", { className: "font-semibold text-gray-700 dark:text-gray-300", children: "What this tool does:" }),
                        " Comprehensive DSP system design tool covering gain structure analysis, I/O matrix routing, AEC (acoustic echo cancellation) configuration, system latency calculation, and network audio requirements. Navigate sections using the tabs below.",
                    ],
                }),
            }),
            _jsx("div", {
                className: "bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-900/20 dark:to-purple-900/20 rounded-xl p-4 mb-6 border border-blue-200 dark:border-blue-800",
                children: _jsxs("div", {
                    className: "grid md:grid-cols-4 gap-4 text-xs",
                    children: [
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-blue-200 dark:border-blue-800",
                            children: [
                                _jsx("div", { className: "font-semibold text-blue-700 dark:text-blue-400", children: "AVIXA ACR" }),
                                _jsx("div", { className: "text-gray-600 dark:text-gray-300", children: "Coverage ‚â§ 6 dB" }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-green-200 dark:border-green-800",
                            children: [
                                _jsx("div", { className: "font-semibold text-green-700 dark:text-green-400", children: "Headroom" }),
                                _jsx("div", { className: "text-gray-600 dark:text-gray-300", children: "‚â• 20 dB (best practice)" }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-purple-200 dark:border-purple-800",
                            children: [
                                _jsx("div", { className: "font-semibold text-purple-700 dark:text-purple-400", children: "Latency" }),
                                _jsx("div", { className: "text-gray-600 dark:text-gray-300", children: "< 20 ms (live sound)" }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-white dark:bg-gray-800 p-3 rounded-lg border border-orange-200 dark:border-orange-800",
                            children: [
                                _jsx("div", { className: "font-semibold text-orange-700 dark:text-orange-400", children: "SNR Target" }),
                                _jsx("div", { className: "text-gray-600 dark:text-gray-300", children: "‚â• 25 dB (optimal)" }),
                            ],
                        }),
                    ],
                }),
            }),

            _jsx("div", {
                className: "flex flex-wrap gap-2 mb-6",
                children: [
                    { id: "input", name: "Input/Gain", icon: "üé§" },
                    { id: "room", name: "Room/SPL", icon: "üè†" },
                    { id: "feedback", name: "PAG/NAG", icon: "üîä" },
                    { id: "dsp", name: "DSP Blocks", icon: "üéõÔ∏è" },
                    { id: "io", name: "I/O Matrix", icon: "üîÄ" },
                    { id: "network", name: "Network", icon: "üåê" },
                ].map((e) =>
                    _jsxs(
                        "button",
                        {
                            onClick: () => ge(e.id),
                            className:
                                "px-4 py-2 rounded-lg font-medium transition-all flex items-center gap-2 " +
                                (pe === e.id
                                    ? "bg-blue-600 text-white shadow-md dark:shadow-gray-950/20"
                                    : "bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:bg-blue-50 dark:hover:bg-blue-900/20"),

                            children: [_jsx("span", { children: e.icon }), e.name],
                        },
                        e.id
                    )
                ),
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-6 mb-6 border",
                children: [
                    "input" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üé§" }), " Input & Gain Structure"],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 lg:grid-cols-3 gap-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Mic Count",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "1",
                                                    max: "64",
                                                    value: n,
                                                    onChange: (e) =>
                                                        o(
                                                            "" === e.target.value || "" === e.target.value
                                                                ? ""
                                                                : parseInt(e.target.value)
                                                        ),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Mic Level (dBV)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: d,
                                                    onChange: (e) =>
                                                        c("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Typical: -60 to -40 dBV",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Nominal System Level (dBu)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: m,
                                                    onChange: (e) =>
                                                        x("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Pro audio: +4 dBu",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Max Input Level (dBu)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: u,
                                                    onChange: (e) =>
                                                        h("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Max Output Level (dBu)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: p,
                                                    onChange: (e) =>
                                                        g("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",
                                    children: _jsxs("p", {
                                        className: "text-xs text-blue-700",
                                        children: [
                                            _jsx("strong", { children: "IEC 60268:" }),
                                            " Voltage Gain (dB) = 20 √ó log‚ÇÅ‚ÇÄ(V_out / V_in) | Power Gain (dB) = 10 √ó log‚ÇÅ‚ÇÄ(P_out / P_in)",
                                        ],
                                    }),
                                }),
                            ],
                        }),
                    "room" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üè†" }), " Room Acoustics & SPL"],
                                }),
                                _jsxs("div", {
                                    className: "flex flex-wrap gap-4 mb-6 items-end",
                                    children: [
                                        _jsxs("div", {
                                            className: "flex-1 min-w-[200px]",
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Room Type Preset",
                                                }),
                                                _jsxs("select", {
                                                    value: s,
                                                    onChange: (e) =>
                                                        ((e) => {
                                                            const t = r[e];
                                                            t &&
                                                                "custom" !== e &&
                                                                (P(t.lengthM),
                                                                D(t.widthM),
                                                                E(t.heightM),
                                                                f(t.rt60),
                                                                S(t.noiseFloor),
                                                                o(t.micCount),
                                                                B(t.talkerToMic),
                                                                L(t.talkerToFarthest),
                                                                U(t.speakerToListener),
                                                                v(t.micToSpeaker),
                                                                j(0.8 * t.talkerToFarthest),
                                                                ie((e) => ({ ...e, mics: t.micCount }))),
                                                                a(e);
                                                        })(e.target.value),
                                                    className:
                                                        "w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", {
                                                            value: "huddle",
                                                            children: "Huddle Room (2-4 people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "small_conference",
                                                            children: "Small Conference (4-6 people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "medium_conference",
                                                            children: "Medium Conference (8-12 people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "large_boardroom",
                                                            children: "Large Boardroom (12-20 people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "training_room",
                                                            children: "Training Room (20-30 people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "auditorium",
                                                            children: "Auditorium (50+ people)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "custom",
                                                            children: "Custom (Manual Entry)",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "flex items-center gap-2 bg-gray-100 dark:bg-gray-700 px-3 py-2 rounded-lg",
                                            children: [
                                                _jsx("span", {
                                                    className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                    children: "Units:",
                                                }),
                                                _jsx("button", {
                                                    onClick: () => t("metric"),
                                                    className:
                                                        "px-3 py-1 rounded text-sm font-medium transition-all " +
                                                        ("metric" === e
                                                            ? "bg-blue-600 text-white"
                                                            : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                                                    children: "Meters",
                                                }),
                                                _jsx("button", {
                                                    onClick: () => t("imperial"),
                                                    className:
                                                        "px-3 py-1 rounded text-sm font-medium transition-all " +
                                                        ("imperial" === e
                                                            ? "bg-blue-600 text-white"
                                                            : "bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:bg-gray-700"),
                                                    children: "Feet",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                "custom" !== s &&
                                    _jsx("div", {
                                        className: "mb-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",
                                        children: _jsxs("p", {
                                            className: "text-sm text-green-700",
                                            children: [
                                                _jsx("strong", { children: "Preset Applied: " }),
                                                r[s].description,
                                                " ‚Ä¢ Values auto-populated based on industry standards (Biamp, AVIXA).",
                                            ],
                                        }),
                                    }),
                                _jsxs("h3", {
                                    className: "text-md font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                    children: ["Room Dimensions ", "imperial" === e ? "(feet)" : "(meters)"],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-3 gap-4 mb-6 bg-gray-50 dark:bg-gray-900/50 p-4 rounded-lg",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: ["Room Length (", "imperial" === e ? "ft" : "m", ")"],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "6" : "2",
                                                    max: "imperial" === e ? "330" : "100",
                                                    value: l(R),
                                                    onChange: (e) => {
                                                        i(e.target.value, P), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: ["Room Width (", "imperial" === e ? "ft" : "m", ")"],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "6" : "2",
                                                    max: "imperial" === e ? "330" : "100",
                                                    value: l(A),
                                                    onChange: (e) => {
                                                        i(e.target.value, D), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: ["Room Height (", "imperial" === e ? "ft" : "m", ")"],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "0.5" : "0.1",
                                                    min: "imperial" === e ? "7" : "2",
                                                    max: "imperial" === e ? "65" : "20",
                                                    value: l(I),
                                                    onChange: (e) => {
                                                        i(e.target.value, E), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("h3", {
                                    className: "text-md font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                    children: "Acoustic Parameters",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 lg:grid-cols-3 gap-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "RT60 (seconds)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.1",
                                                    min: "0.1",
                                                    max: "5",
                                                    value: b,
                                                    onChange: (e) => {
                                                        f("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                            a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Conference: 0.4-0.6s | Worship: 1.0-2.0s",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: [
                                                        "Listener Distance (",
                                                        "imperial" === e ? "ft" : "m",
                                                        ")",
                                                    ],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "2" : "0.5",
                                                    value: l(y),
                                                    onChange: (e) => {
                                                        i(e.target.value, j), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Speaker to farthest listener",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: [
                                                        "Mic-to-Speaker Distance (",
                                                        "imperial" === e ? "ft" : "m",
                                                        ")",
                                                    ],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "2" : "0.5",
                                                    max: "imperial" === e ? "65" : "20",
                                                    value: l(_),
                                                    onChange: (e) => {
                                                        i(e.target.value, v), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "For ERL: Closer = worse echo",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Target SPL Application",
                                                }),
                                                _jsxs("select", {
                                                    value: N,
                                                    onChange: (e) => w(e.target.value),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", {
                                                            value: "voice",
                                                            children: "Voice/Conferencing (65 dBA)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "presentation",
                                                            children: "Presentation (75 dBA)",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Room Absorption Loss (dB)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.5",
                                                    min: "0",
                                                    max: "10",
                                                    value: C,
                                                    onChange: (e) =>
                                                        M("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Noise Floor (dBA)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: k,
                                                    onChange: (e) =>
                                                        S("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "NC-25: ~35 dBA | NC-35: ~45 dBA",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "SPL 95th Percentile (dB)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: O,
                                                    onChange: (e) =>
                                                        z("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "SPL 5th Percentile (dB)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "1",
                                                    value: G,
                                                    onChange: (e) =>
                                                        X("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",
                                    children: _jsxs("p", {
                                        className: "text-xs text-green-700",
                                        children: [
                                            _jsx("strong", { children: "AVIXA ACR:" }),
                                            " ACR = SPL_95% - SPL_5% | Pass: ACR ‚â§ 6 dB",
                                        ],
                                    }),
                                }),
                            ],
                        }),
                    "feedback" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üîä" }), " PAG/NAG Feedback Analysis"],
                                }),
                                _jsx("div", {
                                    className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4 border border-blue-200 dark:border-blue-800",
                                    children: _jsxs("p", {
                                        className: "text-sm text-blue-800 dark:text-blue-200",
                                        children: [
                                            _jsx("strong", { children: "Shure PAG/NAG:" }),
                                            " PAG (Potential Acoustic Gain) must exceed NAG (Needed Acoustic Gain) to avoid feedback. Formula: PAG = 20log(D1) - 20log(D2) + 20log(D0) - 20log(Ds) - 10log(NOM) - 6dB FSM",
                                        ],
                                    }),
                                }),
                                _jsx("h3", {
                                    className: "text-md font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                    children: "Microphone Configuration",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-3 gap-4 mb-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Microphone Pattern",
                                                }),
                                                _jsxs("select", {
                                                    value: q,
                                                    onChange: (e) => $(e.target.value),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", {
                                                            value: "omni",
                                                            children: "Omnidirectional (+0 dB)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "cardioid",
                                                            children: "Cardioid (+4.8 dB)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "supercardioid",
                                                            children: "Supercardioid (+5.7 dB)",
                                                        }),
                                                        _jsx("option", {
                                                            value: "hypercardioid",
                                                            children: "Hypercardioid (+6 dB)",
                                                        }),
                                                    ],
                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Directivity bonus improves PAG",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: [
                                                        "Talker to Mic Distance (",
                                                        "imperial" === e ? "ft" : "m",
                                                        ")",
                                                    ],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "0.5" : "0.1",
                                                    min: "imperial" === e ? "0.5" : "0.1",
                                                    max: "imperial" === e ? "16" : "5",
                                                    value: l(F),
                                                    onChange: (e) => {
                                                        i(e.target.value, B), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Ds: Closer = better gain",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "flex items-center gap-3 pt-6",
                                            children: [
                                                _jsx("input", {
                                                    type: "checkbox",
                                                    id: "useAutomixer",
                                                    checked: W,
                                                    onChange: (e) => {
                                                        const t = e.target.checked;
                                                        V(t),
                                                            t && !J.includes("automixer")
                                                                ? Q((e) => [...e, "automixer"])
                                                                : !t &&
                                                                  J.includes("automixer") &&
                                                                  Q((e) => e.filter((e) => "automixer" !== e));
                                                    },
                                                    className: "w-4 h-4 text-blue-600 rounded focus:ring-blue-500",
                                                }),
                                                _jsxs("label", {
                                                    htmlFor: "useAutomixer",
                                                    className: "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                    children: [
                                                        "Use Automixer ",
                                                        _jsx("span", {
                                                            className: "text-green-600",
                                                            children: "(NOM=1)",
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("h3", {
                                    className: "text-md font-semibold text-gray-700 dark:text-gray-300 mb-3",
                                    children: ["System Distances (PAG/NAG) ", "imperial" === e ? "- feet" : "- meters"],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-4 mb-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: [
                                                        "Talker to Farthest Listener (",
                                                        "imperial" === e ? "ft" : "m",
                                                        ")",
                                                    ],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "3" : "1",
                                                    max: "imperial" === e ? "165" : "50",
                                                    value: l(T),
                                                    onChange: (e) => {
                                                        i(e.target.value, L), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "D0: Distance without reinforcement",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: [
                                                        "Nearest Listener to Speaker (",
                                                        "imperial" === e ? "ft" : "m",
                                                        ")",
                                                    ],
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "imperial" === e ? "1" : "0.5",
                                                    min: "imperial" === e ? "2" : "0.5",
                                                    max: "imperial" === e ? "65" : "20",
                                                    value: l(H),
                                                    onChange: (e) => {
                                                        i(e.target.value, U), a("custom");
                                                    },
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "D2: Speaker to audience front row",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",
                                    children: _jsxs("p", {
                                        className: "text-xs text-orange-700",
                                        children: [
                                            _jsx("strong", { children: "Feedback Stability Margin (FSM):" }),
                                            " A 6 dB margin is automatically included in PAG calculation. PAG - NAG should be ‚â• 0 for stable operation.",
                                        ],
                                    }),
                                }),
                            ],
                        }),
                    "dsp" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üéõÔ∏è" }), " DSP Processing Blocks"],
                                }),
                                _jsx("div", {
                                    className: "grid md:grid-cols-2 lg:grid-cols-3 gap-3 mb-4",
                                    children: [
                                        {
                                            id: "aec",
                                            name: "AEC (Echo Cancellation)",
                                            mips: "Variable",
                                            perChannel: 2,
                                            note: "base 5 + 2/ch + 0.02/ms tail",
                                        },
                                        { id: "eq", name: "Parametric EQ", mips: "1.5", perChannel: 1.5 },
                                        { id: "compressor", name: "Compressor", mips: "0.8", perChannel: 0.8 },
                                        { id: "limiter", name: "Limiter", mips: "0.5", perChannel: 0.5 },
                                        { id: "gate", name: "Noise Gate", mips: "0.4", perChannel: 0.4 },
                                        { id: "delay", name: "Delay", mips: "0.3", isBase: !0 },
                                        { id: "matrix", name: "Matrix Router", mips: "Variable", perCrosspoint: 0.005 },
                                        { id: "filter", name: "Crossover/Filter", mips: "0.2", perChannel: 0.2 },
                                        { id: "agc", name: "AGC", mips: "1.2", perChannel: 1.2 },
                                        {
                                            id: "feedback_suppressor",
                                            name: "Feedback Suppressor",
                                            mips: "3.0",
                                            perChannel: 3,
                                        },
                                        { id: "noise_reduction", name: "Noise Reduction", mips: "2.0", perChannel: 2 },
                                        { id: "automixer", name: "Automixer", mips: "Variable", perChannel: 1 },
                                    ].map((e) => {
                                        let t = e.mips,
                                            s = !1,
                                            a = 0;
                                        try {
                                            const r = Object.values(le).reduce((e, t) => e + (Number(t) || 0), 0),
                                                l = Object.values(ne).reduce((e, t) => e + (Number(t) || 0), 0),
                                                i = r + l;
                                            if ("aec" === e.id) {
                                                const e = Math.min(
                                                    400,
                                                    Math.max(100, 50 * Math.ceil((1e3 * (b || 0.5) * 1.5) / 50))
                                                );
                                                (a = 5 + 2 * (n || 4) + 0.02 * e), (t = a.toFixed(1)), (s = !0);
                                            } else
                                                "matrix" === e.id
                                                    ? ((a = 0.005 * r * l), (t = a.toFixed(1)), (s = !0))
                                                    : "automixer" === e.id
                                                      ? ((a = 1 * (n || 4)), (t = a.toFixed(1)), (s = !0))
                                                      : e.isBase
                                                        ? (t = e.mips)
                                                        : e.perChannel &&
                                                          ((a = e.perChannel * i), (t = a.toFixed(1)), (s = !0));
                                        } catch (s) {
                                            t = e.mips;
                                        }
                                        return _jsxs(
                                            "button",
                                            {
                                                onClick: () =>
                                                    ((e) => {
                                                        const t = !J.includes(e);
                                                        Q((t) =>
                                                            t.includes(e) ? t.filter((t) => t !== e) : [...t, e]
                                                        ),
                                                            "automixer" === e && V(t);
                                                    })(e.id),
                                                className:
                                                    "p-3 rounded-lg border text-left transition-all " +
                                                    (J.includes(e.id)
                                                        ? "bg-blue-50 dark:bg-blue-900/20 border-blue-300 text-blue-800 dark:text-blue-200"
                                                        : "bg-gray-50 dark:bg-gray-900/50 border-gray-200 dark:border-gray-700 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:bg-gray-700"),
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex items-center justify-between",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "font-medium text-sm",
                                                                children: e.name,
                                                            }),
                                                            _jsx("span", {
                                                                className:
                                                                    "w-5 h-5 rounded flex items-center justify-center text-xs " +
                                                                    (J.includes(e.id)
                                                                        ? "bg-blue-600 text-white"
                                                                        : "bg-gray-300 text-gray-600 dark:text-gray-300"),
                                                                children: J.includes(e.id) ? "‚úì" : "",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className:
                                                            "text-xs mt-1 " + (s ? "text-blue-500" : "text-gray-500 dark:text-gray-400"),
                                                        children: ["~", t, " MIPS", s ? "" : "/ch"],
                                                    }),
                                                ],
                                            },
                                            e.id
                                        );
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-4 mt-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Sample Rate",
                                                }),
                                                _jsxs("select", {
                                                    value: K,
                                                    onChange: (e) => Y(Number(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", { value: "44100", children: "44.1 kHz" }),
                                                        _jsx("option", {
                                                            value: "48000",
                                                            children: "48 kHz (Standard)",
                                                        }),
                                                        _jsx("option", { value: "96000", children: "96 kHz" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Bit Depth",
                                                }),
                                                _jsxs("select", {
                                                    value: Z,
                                                    onChange: (e) =>
                                                        ee("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", { value: "16", children: "16-bit" }),
                                                        _jsx("option", { value: "24", children: "24-bit (Standard)" }),
                                                        _jsx("option", { value: "32", children: "32-bit float" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                    "io" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üîÄ" }), " I/O Matrix Configuration"],
                                }),
                                _jsx("div", {
                                    className: "bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4 border border-blue-200 dark:border-blue-800",
                                    children: _jsxs("p", {
                                        className: "text-sm text-blue-800 dark:text-blue-200",
                                        children: [
                                            _jsx("strong", { children: "About I/O Matrix:" }),
                                            " Define all audio inputs and outputs for your DSP system. The matrix size (inputs √ó outputs) determines routing complexity and DSP resource requirements. Each input can potentially be routed to any output.",
                                        ],
                                    }),
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-6",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("h3", {
                                                    className:
                                                        "font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",
                                                    children: [
                                                        _jsx("span", { className: "text-green-600", children: "üì•" }),
                                                        " Inputs",
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "space-y-3",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Microphones",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children:
                                                                                "Wired mics (table, ceiling, handheld)",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.mics,
                                                                    onChange: (e) => ye("mics", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Program Audio",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children:
                                                                                "Background music, paging sources",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.programAudio,
                                                                    onChange: (e) => ye("programAudio", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "USB/VoIP",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Soft codec, Teams/Zoom inputs",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.usbVoip,
                                                                    onChange: (e) => ye("usbVoip", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Playback",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Media players, Blu-ray, signage",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.playback,
                                                                    onChange: (e) => ye("playback", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Wireless Mics",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Bodypack, handheld receivers",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.wireless,
                                                                    onChange: (e) => ye("wireless", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "HDMI Audio",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "De-embedded from video sources",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: le.hdmiAudio,
                                                                    onChange: (e) => ye("hdmiAudio", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "mt-3 p-2 bg-green-50 dark:bg-green-900/20 rounded text-sm text-green-700",
                                                    children: [
                                                        "Total Inputs: ",
                                                        Object.values(le).reduce((e, t) => e + t, 0),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("h3", {
                                                    className:
                                                        "font-semibold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",
                                                    children: [
                                                        _jsx("span", { className: "text-blue-600", children: "üì§" }),
                                                        " Outputs",
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "space-y-3",
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Loudspeakers",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Ceiling, wall, floor monitors",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: ne.loudspeakers,
                                                                    onChange: (e) => je("loudspeakers", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Amplifier Channels",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Feeds to external power amps",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: ne.amplifiers,
                                                                    onChange: (e) => je("amplifiers", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "UC Codec",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "USB to Teams/Zoom/WebEx",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: ne.ucCodec,
                                                                    onChange: (e) => je("ucCodec", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Overflow/Lobby",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Adjacent rooms, lobby feeds",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: ne.overflow,
                                                                    onChange: (e) => je("overflow", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-3",
                                                            children: [
                                                                _jsxs("div", {
                                                                    className: "w-40",
                                                                    children: [
                                                                        _jsx("label", {
                                                                            className:
                                                                                "text-sm font-medium text-gray-700 dark:text-gray-300",
                                                                            children: "Recording",
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-500 dark:text-gray-300",
                                                                            children: "Archive, broadcast, streaming",
                                                                        }),
                                                                    ],
                                                                }),
                                                                _jsx("input", {
                                                                    type: "number",
                                                                    min: "0",
                                                                    max: "64",
                                                                    value: ne.recording,
                                                                    onChange: (e) => je("recording", e.target.value),
                                                                    className:
                                                                        "w-20 px-2 py-1 border rounded text-center",
                                                                }),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "mt-3 p-2 bg-blue-50 dark:bg-blue-900/20 rounded text-sm text-blue-700",
                                                    children: [
                                                        "Total Outputs: ",
                                                        Object.values(ne).reduce((e, t) => e + t, 0),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "mt-4 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",
                                    children: _jsxs("p", {
                                        className: "text-sm text-purple-700",
                                        children: [
                                            _jsx("strong", { children: "Matrix Size:" }),
                                            " ",
                                            Object.values(le).reduce((e, t) => e + t, 0),
                                            " √ó ",
                                            Object.values(ne).reduce((e, t) => e + t, 0),
                                            " = ",
                                            Object.values(le).reduce((e, t) => e + t, 0) *
                                                Object.values(ne).reduce((e, t) => e + t, 0),
                                            " crosspoints",
                                        ],
                                    }),
                                }),
                                _jsx("div", {
                                    className: "mt-3 p-3 bg-gray-50 dark:bg-gray-900/50 rounded-lg border",
                                    children: _jsxs("p", {
                                        className: "text-xs text-gray-600 dark:text-gray-300",
                                        children: [
                                            _jsx("strong", { children: "üí° Tip:" }),
                                            " Count stereo sources as 2 channels. Network audio (Dante/AVB) channels are configured in the Network tab. The matrix size affects DSP resource requirements - larger matrices need more powerful processors.",
                                        ],
                                    }),
                                }),
                            ],
                        }),
                    "network" === pe &&
                        _jsxs("div", {
                            children: [
                                _jsxs("h2", {
                                    className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2",
                                    children: [_jsx("span", { children: "üåê" }), " Network Audio & Latency"],
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 lg:grid-cols-3 gap-4",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Network Type",
                                                }),
                                                _jsxs("select", {
                                                    value: ae,
                                                    onChange: (e) => re(e.target.value),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                    children: [
                                                        _jsx("option", { value: "dante", children: "Dante" }),
                                                        _jsx("option", { value: "avb", children: "AVB/Milan" }),
                                                        _jsx("option", { value: "ndi", children: "NDI" }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Channel Count",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    min: "1",
                                                    max: "512",
                                                    value: te,
                                                    onChange: (e) =>
                                                        se(
                                                            "" === e.target.value || "" === e.target.value
                                                                ? ""
                                                                : parseInt(e.target.value)
                                                        ),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "A/D & D/A Latency (ms)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.1",
                                                    min: "0.1",
                                                    value: de,
                                                    onChange: (e) =>
                                                        ce("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Typical: 0.6-1.4 ms",
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("label", {
                                                    className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                    children: "Network Latency (ms)",
                                                }),
                                                _jsx("input", {
                                                    type: "number",
                                                    step: "0.1",
                                                    min: "0.1",
                                                    value: me,
                                                    onChange: (e) =>
                                                        xe("" === e.target.value ? "" : parseFloat(e.target.value)),
                                                    className:
                                                        "w-full max-w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-white dark:border-gray-600",

                                                }),
                                                _jsx("p", {
                                                    className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                    children: "Dante/AVB: 0.25-2 ms",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsx("div", {
                                    className: "mt-4 p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",
                                    children: _jsxs("p", {
                                        className: "text-xs text-orange-700",
                                        children: [
                                            _jsx("strong", { children: "Dante Bandwidth:" }),
                                            " (Sample Rate √ó Bit Depth √ó Channels √ó 2) √∑ 1,000,000 Mbps",
                                        ],
                                    }),
                                }),
                            ],
                        }),
                ],
            }),
            _jsx("button", {
                onClick: () => {
                    he(
                        calculateDSP({
                            micCount: n,
                            micLevelDbv: d,
                            nominalSystemLevelDbu: m,
                            maxInputLevelDbu: u,
                            maxOutputLevelDbu: p,
                            rt60Seconds: b,
                            listenerDistanceM: y,
                            micToSpeakerDistanceM: _,
                            targetSplType: N,
                            roomAbsorptionLossDb: C,
                            noiseFloorDba: k,
                            roomLengthM: R,
                            roomWidthM: A,
                            roomHeightM: I,
                            talkerToMicM: F,
                            talkerToFarthestListenerM: T,
                            nearestListenerToSpeakerM: H,
                            micPattern: q,
                            useAutomixer: W,
                            spl95Percentile: O,
                            spl5Percentile: G,
                            dspBlocks: J,
                            sampleRate: K,
                            bitDepth: Z,
                            danteChannelCount: te,
                            networkType: ae,
                            inputs: le,
                            outputs: ne,
                            adDaLatencyMs: de,
                            networkLatencyMs: me,
                        })
                    );
                },
                className:
                    "w-full bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-semibold py-4 rounded-xl transition-all shadow-lg dark:shadow-gray-950/30 hover:shadow-xl mb-8",
                children: "üî¨ Calculate DSP System Requirements",
            }),
            ue &&
                _jsxs("div", {
                    className: "space-y-6",
                    children: [
                        _jsxs("div", {
                            className:
                                "rounded-xl p-6 border-2 " +
                                (ue.summary.overallScore >= 80
                                    ? "bg-green-50 dark:bg-green-900/20 border-green-300"
                                    : ue.summary.overallScore >= 60
                                      ? "bg-orange-50 dark:bg-orange-900/20 border-orange-300"
                                      : "bg-red-50 dark:bg-red-900/20 border-red-300"),
                            children: [
                                _jsxs("div", {
                                    className: "flex items-center justify-between",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsxs("h2", {
                                                    className: "text-2xl font-bold text-gray-800",
                                                    children: ["System Score: ", ue.summary.overallScore, "%"],
                                                }),
                                                _jsxs("p", {
                                                    className: "text-gray-600 dark:text-gray-300",
                                                    children: [
                                                        ue.summary.checksPass,
                                                        "/",
                                                        ue.summary.checksTotal,
                                                        " checks passed ‚Ä¢ ",
                                                        ue.summary.overallRating,
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsx("div", {
                                            className: "text-6xl",
                                            children:
                                                ue.summary.overallScore >= 80
                                                    ? "‚úÖ"
                                                    : ue.summary.overallScore >= 60
                                                      ? "‚ö†Ô∏è"
                                                      : "‚ùå",
                                        }),
                                    ],
                                }),
                                ue.errors &&
                                    ue.errors.length > 0 &&
                                    _jsxs("div", {
                                        className: "mt-4 p-4 bg-red-100 rounded-lg border border-red-300",
                                        children: [
                                            _jsx("p", {
                                                className: "text-sm font-semibold text-red-800 dark:text-red-200 mb-3",
                                                children: "‚ùå Critical Issues - Must Resolve:",
                                            }),
                                            _jsx("div", {
                                                className: "space-y-3",
                                                children: ue.errors.map((e, t) => {
                                                    const s = ((e) => {
                                                        const t = e.toLowerCase();
                                                        return (t.includes("pag") && t.includes("nag")) ||
                                                            t.includes("feedback")
                                                            ? {
                                                                  tip: "System will feedback before achieving needed gain. Halve talker-to-mic distance (+6dB), double mic-to-speaker distance (+6dB), use directional mics (+5dB), or enable automixer.",
                                                                  actions: [
                                                                      "Move mics closer to talkers",
                                                                      "Increase speaker-to-mic distance",
                                                                      "Switch to cardioid/supercardioid mics",
                                                                      "Enable automixer/gating",
                                                                  ],
                                                              }
                                                            : t.includes("erl") || t.includes("aec")
                                                              ? {
                                                                    tip: "AEC cannot function with low Echo Return Loss. Increase physical separation between mics and speakers, add acoustic treatment.",
                                                                    actions: [
                                                                        "Increase mic-speaker separation",
                                                                        "Reduce RT60 with acoustic panels",
                                                                        "Use beamforming microphone arrays",
                                                                        "Consider ceiling speakers aimed away from mics",
                                                                    ],
                                                                }
                                                              : t.includes("snr") || t.includes("signal")
                                                                ? {
                                                                      tip: "SNR too low for intelligible speech. Reduce ambient noise or increase signal level.",
                                                                      actions: [
                                                                          "Address HVAC/mechanical noise",
                                                                          "Use higher sensitivity microphones",
                                                                          "Position mics closer to sources",
                                                                          "Add acoustic isolation",
                                                                      ],
                                                                  }
                                                                : t.includes("dsp") ||
                                                                    t.includes("mips") ||
                                                                    t.includes("very heavy")
                                                                  ? {
                                                                        tip: "DSP is overloaded and will cause audio dropouts, glitches, and system instability. Reduce processing or upgrade hardware.",
                                                                        actions: [
                                                                            "Upgrade to enterprise DSP",
                                                                            "Distribute across multiple units",
                                                                            "Remove non-essential processing",
                                                                            "Keep utilization under 70%",
                                                                        ],
                                                                    }
                                                                  : {
                                                                        tip: "This issue must be resolved before the system can function properly.",
                                                                        actions: [
                                                                            "Consult with acoustic engineer",
                                                                            "Review system design parameters",
                                                                        ],
                                                                    };
                                                    })(e);
                                                    return _jsxs(
                                                        "div",
                                                        {
                                                            className: "p-3 bg-white dark:bg-gray-800 rounded-lg border border-red-200 dark:border-red-800",
                                                            children: [
                                                                _jsxs("p", {
                                                                    className: "text-sm text-red-800 dark:text-red-200 font-medium",
                                                                    children: ["‚ùå ", e],
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "mt-2 pl-3 border-l-2 border-red-300",
                                                                    children: [
                                                                        _jsxs("p", {
                                                                            className:
                                                                                "text-xs text-red-700 font-medium mb-1",
                                                                            children: ["üîß Fix: ", s.tip],
                                                                        }),
                                                                        _jsx("div", {
                                                                            className: "flex flex-wrap gap-1 mt-1",
                                                                            children: s.actions.map((e, t) =>
                                                                                _jsx(
                                                                                    "span",
                                                                                    {
                                                                                        className:
                                                                                            "px-2 py-0.5 bg-red-50 dark:bg-red-900/20 text-red-600 text-xs rounded",
                                                                                        children: e,
                                                                                    },
                                                                                    t
                                                                                )
                                                                            ),
                                                                        }),
                                                                    ],
                                                                }),
                                                            ],
                                                        },
                                                        t
                                                    );
                                                }),
                                            }),
                                        ],
                                    }),
                                ue.warnings &&
                                    ue.warnings.length > 0 &&
                                    _jsxs("div", {
                                        className: "mt-4 p-4 bg-white dark:bg-gray-800 rounded-lg",
                                        children: [
                                            _jsx("p", {
                                                className: "text-sm font-semibold text-orange-700 mb-3",
                                                children: "‚ö†Ô∏è Warnings & Recommendations:",
                                            }),
                                            _jsx("div", {
                                                className: "space-y-3",
                                                children: ue.warnings.map((e, t) => {
                                                    const s = ((e) => {
                                                        const t = e.toLowerCase();
                                                        return t.includes("headroom")
                                                            ? {
                                                                  tip: "Increase amplifier power or reduce nominal operating level. Target 10-12dB headroom for speech, 15-20dB for music.",
                                                                  standard: "AVIXA Standard",
                                                              }
                                                            : t.includes("feedback") ||
                                                                t.includes("pag") ||
                                                                t.includes("nag")
                                                              ? {
                                                                    tip: "Move mics closer to talkers, increase mic-to-speaker distance, use directional mics, or enable automixer.",
                                                                    standard: "Industry Best Practice",
                                                                }
                                                              : t.includes("acr") || t.includes("coverage")
                                                                ? {
                                                                      tip: "Add distributed speakers or adjust aiming. Target ‚â§6dB variation per AVIXA A2 category.",
                                                                      standard: "AVIXA A102.01",
                                                                  }
                                                                : t.includes("erl") || t.includes("echo")
                                                                  ? {
                                                                        tip: "Increase mic-speaker separation, add acoustic treatment, or use beamforming microphones.",
                                                                        standard: "AEC Best Practice",
                                                                    }
                                                                  : t.includes("snr") ||
                                                                      t.includes("signal") ||
                                                                      t.includes("noise")
                                                                    ? {
                                                                          tip: "Reduce ambient noise (target NC-30/35dBA), use higher sensitivity mics, or position mics closer to sources.",
                                                                          standard: "ANSI/ASA S12.60",
                                                                      }
                                                                    : t.includes("latency")
                                                                      ? {
                                                                            tip: "Reduce processing blocks, configure network audio for lower latency, minimize conversion stages.",
                                                                            standard: "Live Sound < 20ms",
                                                                        }
                                                                      : t.includes("rt60") || t.includes("reverb")
                                                                        ? {
                                                                              tip: "Install acoustic panels, ceiling clouds, or carpet. Target RT60 of 0.4-0.6s for conferencing.",
                                                                              standard: "AVIXA/ASA",
                                                                          }
                                                                        : t.includes("dsp load") ||
                                                                            t.includes("processing") ||
                                                                            t.includes("heavy") ||
                                                                            t.includes("mips")
                                                                          ? {
                                                                                tip: "Reduce active processing blocks, remove processing from unused channels, or upgrade to higher-capacity DSP. Keep utilization under 70% for stability and headroom.",
                                                                                standard: "DSP Best Practice",
                                                                            }
                                                                          : t.includes("nom") ||
                                                                              t.includes("automixer") ||
                                                                              t.includes("open mic")
                                                                            ? {
                                                                                  tip: "Enable automixer to improve PAG. Each doubling of open mics costs 3dB of gain before feedback.",
                                                                                  standard: "NOM Equation",
                                                                              }
                                                                            : t.includes("distance") ||
                                                                                t.includes("critical")
                                                                              ? {
                                                                                    tip: "Position microphones within the critical distance for best direct-to-reverberant ratio.",
                                                                                    standard: "Acoustic Design",
                                                                                }
                                                                              : {
                                                                                    tip: "Review system design parameters and consult manufacturer specifications.",
                                                                                    standard: "General",
                                                                                };
                                                    })(e);
                                                    return _jsxs(
                                                        "div",
                                                        {
                                                            className:
                                                                "p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",
                                                            children: [
                                                                _jsxs("p", {
                                                                    className: "text-sm text-orange-800 dark:text-orange-200 font-medium",
                                                                    children: ["‚ö†Ô∏è ", e],
                                                                }),
                                                                _jsxs("div", {
                                                                    className: "mt-2 flex items-start gap-2",
                                                                    children: [
                                                                        _jsx("span", {
                                                                            className: "text-blue-500 mt-0.5",
                                                                            children: "üí°",
                                                                        }),
                                                                        _jsxs("div", {
                                                                            children: [
                                                                                _jsx("p", {
                                                                                    className: "text-xs text-gray-700 dark:text-gray-300",
                                                                                    children: s.tip,
                                                                                }),
                                                                                _jsx("p", {
                                                                                    className:
                                                                                        "text-xs text-gray-400 mt-1",
                                                                                    children: s.standard,
                                                                                }),
                                                                            ],
                                                                        }),
                                                                    ],
                                                                }),
                                                            ],
                                                        },
                                                        t
                                                    );
                                                }),
                                            }),
                                        ],
                                    }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "grid md:grid-cols-2 lg:grid-cols-3 gap-4",
                            children: [
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üéöÔ∏è" }), " Gain Structure"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Input Headroom:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.gainStructure.inputHeadroomDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Required Input Gain:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.gainStructure.requiredInputGainDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "System Headroom:",
                                                        }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold truncate " +
                                                                (ue.gainStructure.systemHeadroomDb >=
                                                                ue.gainStructure.headroomTarget
                                                                    ? "text-green-600"
                                                                    : ue.gainStructure.systemHeadroomDb >=
                                                                        ue.gainStructure.headroomTarget - 3
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: [ue.gainStructure.systemHeadroomDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "pt-2 border-t",
                                                    children: _e(
                                                        ue.gainStructure.headroomPass,
                                                        `‚â•${ue.gainStructure.headroomTarget} dB`
                                                    ),
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                ue.nom &&
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                        children: [
                                            _jsxs("h3", {
                                                className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                                children: [_jsx("span", { children: "üé§" }), " NOM (Open Mics)"],
                                            }),
                                            _jsxs("div", {
                                                className: "space-y-2 text-sm",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Mic Count:",
                                                            }),
                                                            _jsx("span", {
                                                                className: "font-bold truncate",
                                                                children: ue.nom.micCount,
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Effective NOM:",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate",
                                                                children: [
                                                                    ue.nom.effectiveNom,
                                                                    ue.nom.useAutomixer ? " (automixer)" : "",
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "NOM Penalty:",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate text-orange-600",
                                                                children: ["-", ue.nom.nomPenaltyDb, " dB"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Mic Pattern:",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate text-green-600",
                                                                children: [
                                                                    ue.nom.micPattern,
                                                                    " (+",
                                                                    ue.nom.micDirectivityBonus,
                                                                    " dB)",
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "pt-2 border-t text-xs text-gray-500 dark:text-gray-400",
                                                        children: ue.nom.recommendation,
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ue.pagNag &&
                                    _jsxs("div", {
                                        className:
                                            "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10 " +
                                            (ue.pagNag.feedbackMarginPass ? "" : "border-red-300 bg-red-50 dark:bg-red-900/20"),
                                        children: [
                                            _jsxs("h3", {
                                                className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                                children: [_jsx("span", { children: "üîä" }), " PAG/NAG (Feedback)"],
                                            }),
                                            _jsxs("div", {
                                                className: "space-y-2 text-sm",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "PAG (w/directivity):",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate",
                                                                children: [ue.pagNag.pagDb, " dB"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "NAG (Needed):",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate",
                                                                children: [ue.pagNag.nagDb, " dB"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300 font-semibold",
                                                                children: "Feedback Margin:",
                                                            }),
                                                            _jsxs("span", {
                                                                className:
                                                                    "font-bold truncate " +
                                                                    (ue.pagNag.feedbackMarginDb >= 6
                                                                        ? "text-green-600"
                                                                        : ue.pagNag.feedbackMarginDb >= 0
                                                                          ? "text-orange-600"
                                                                          : "text-red-600"),
                                                                children: [ue.pagNag.feedbackMarginDb, " dB"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "pt-2 border-t",
                                                        children: _jsxs("span", {
                                                            className:
                                                                "inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-medium " +
                                                                ("Excellent" === ue.pagNag.feedbackRiskRating ||
                                                                "Good" === ue.pagNag.feedbackRiskRating
                                                                    ? "bg-green-100 text-green-700"
                                                                    : "Marginal" === ue.pagNag.feedbackRiskRating ||
                                                                        "At Risk" === ue.pagNag.feedbackRiskRating
                                                                      ? "bg-orange-100 text-orange-700"
                                                                      : "bg-red-100 text-red-700"),
                                                            children: [
                                                                "Excellent" === ue.pagNag.feedbackRiskRating ||
                                                                "Good" === ue.pagNag.feedbackRiskRating
                                                                    ? "‚úÖ"
                                                                    : "Marginal" === ue.pagNag.feedbackRiskRating ||
                                                                        "At Risk" === ue.pagNag.feedbackRiskRating
                                                                      ? "‚ö†Ô∏è"
                                                                      : "‚ùå",
                                                                " ",
                                                                ue.pagNag.feedbackRiskRating,
                                                            ],
                                                        }),
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ue.room &&
                                    _jsxs("div", {
                                        className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                        children: [
                                            _jsxs("h3", {
                                                className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                                children: [_jsx("span", { children: "üè†" }), " Room Analysis"],
                                            }),
                                            _jsxs("div", {
                                                className: "space-y-2 text-sm",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Volume:",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate",
                                                                children: [ue.room.volumeM3, " m¬≥"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Critical Distance:",
                                                            }),
                                                            _jsxs("span", {
                                                                className: "font-bold truncate",
                                                                children: [ue.room.criticalDistanceM, " m"],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex justify-between min-w-0",
                                                        children: [
                                                            _jsx("span", {
                                                                className: "text-gray-600 dark:text-gray-300",
                                                                children: "Dc Rating:",
                                                            }),
                                                            _jsx("span", {
                                                                className:
                                                                    "font-bold truncate " +
                                                                    ("Excellent" === ue.room.roomAcousticsRating ||
                                                                    "Good" === ue.room.roomAcousticsRating
                                                                        ? "text-green-600"
                                                                        : "Acceptable" ===
                                                                                ue.room.roomAcousticsRating ||
                                                                            "Challenging" ===
                                                                                ue.room.roomAcousticsRating
                                                                          ? "text-orange-600"
                                                                          : "text-red-600"),
                                                                children: ue.room.roomAcousticsRating,
                                                            }),
                                                        ],
                                                    }),
                                                    _jsx("div", {
                                                        className: "pt-2 border-t text-xs",
                                                        children: _jsxs("span", {
                                                            className: ue.room.micWithinCriticalDistance
                                                                ? "text-green-600"
                                                                : "text-orange-600",
                                                            children: [
                                                                ue.room.micWithinCriticalDistance ? "‚úÖ" : "‚ö†Ô∏è",
                                                                " Mic ",
                                                                ue.room.micWithinCriticalDistance
                                                                    ? "within"
                                                                    : "outside",
                                                                " critical zone",
                                                            ],
                                                        }),
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üîä" }), " SPL Requirements"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Target SPL:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [
                                                                ue.splCalculation.targetSplDb,
                                                                " dBA (",
                                                                ue.splCalculation.targetSplType,
                                                                ")",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Distance Loss:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.splCalculation.distanceLossDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Room Absorption:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.splCalculation.roomAbsorptionLossDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "pt-2 border-t",
                                                    children: _jsxs("span", {
                                                        className: "text-lg font-bold text-blue-700",
                                                        children: [
                                                            "Required: ",
                                                            ue.splCalculation.requiredSpeakerOutputDb,
                                                            " dB SPL",
                                                        ],
                                                    }),
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üìä" }), " ACR (AVIXA)"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "95th Percentile:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.acr.spl95Percentile, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "5th Percentile:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.acr.spl5Percentile, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "ACR Value:",
                                                        }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold text-lg truncate " +
                                                                (ue.acr.acrDb <= 3
                                                                    ? "text-green-600"
                                                                    : ue.acr.acrDb <= 6
                                                                      ? "text-blue-600"
                                                                      : ue.acr.acrDb <= 10
                                                                        ? "text-orange-600"
                                                                        : "text-red-600"),
                                                            children: [ue.acr.acrDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "pt-2 border-t flex items-center justify-between",
                                                    children: [
                                                        _e(ue.acr.acrPass, "‚â§6 dB"),
                                                        _jsx("span", {
                                                            className:
                                                                "text-xs font-medium " +
                                                                (ue.acr.acrRating.includes("Excellent") ||
                                                                ue.acr.acrRating.includes("Good")
                                                                    ? "text-green-600"
                                                                    : ue.acr.acrRating.includes("Acceptable")
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: ue.acr.acrRating,
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üîá" }), " AEC (Echo Cancellation)"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Mic-to-Speaker:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.aec.micToSpeakerDistanceM, " m"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "RT60:" }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold truncate " +
                                                                (ue.aec.rt60Seconds <= 0.5
                                                                    ? "text-green-600"
                                                                    : ue.aec.rt60Seconds <= 0.8
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: [ue.aec.rt60Seconds, "s"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Recommended Tail:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.aec.aecTailLengthMs, " ms"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "ERL:" }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold " +
                                                                (ue.aec.erlDb >= 10
                                                                    ? "text-green-600"
                                                                    : ue.aec.erlDb >= 6
                                                                      ? "text-blue-600"
                                                                      : ue.aec.erlDb >= 3
                                                                        ? "text-orange-600"
                                                                        : "text-red-600"),
                                                            children: [ue.aec.erlDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "pt-2 border-t flex items-center justify-between",
                                                    children: [
                                                        _e(ue.aec.erlPass, "ERL ‚â•6 dB"),
                                                        _jsx("span", {
                                                            className:
                                                                "text-xs font-medium " +
                                                                ("Excellent" === ue.aec.erlRating ||
                                                                "Good" === ue.aec.erlRating
                                                                    ? "text-green-600"
                                                                    : "Acceptable" === ue.aec.erlRating
                                                                      ? "text-blue-600"
                                                                      : "Poor" === ue.aec.erlRating
                                                                        ? "text-orange-600"
                                                                        : "text-red-600"),
                                                            children: ue.aec.erlRating,
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className:
                                                        "mt-2 p-2 rounded text-xs " +
                                                        (ue.aec.erlPass
                                                            ? "bg-blue-50 dark:bg-blue-900/20 text-blue-700"
                                                            : "bg-red-50 dark:bg-red-900/20 text-red-700"),
                                                    children: ue.aec.erlPass
                                                        ? ue.aec.erlAdvice
                                                        : "üí° To improve: Increase mic-to-speaker distance, reduce RT60, or add acoustic treatment.",
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üìâ" }), " Noise & SNR"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Noise Floor:",
                                                        }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold truncate " +
                                                                (ue.noiseAndSensitivity.noiseFloorDba <= 35
                                                                    ? "text-green-600"
                                                                    : ue.noiseAndSensitivity.noiseFloorDba <= 45
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: [ue.noiseAndSensitivity.noiseFloorDba, " dBA"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", { className: "text-gray-600 dark:text-gray-300", children: "SNR:" }),
                                                        _jsxs("span", {
                                                            className:
                                                                "font-bold text-lg truncate " +
                                                                (ue.noiseAndSensitivity.snrDb >= 25
                                                                    ? "text-green-600"
                                                                    : ue.noiseAndSensitivity.snrDb >= 15
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: [ue.noiseAndSensitivity.snrDb, " dB"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Mic Sensitivity:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [
                                                                ue.noiseAndSensitivity.micSensitivityMvPa,
                                                                " mV/Pa",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "pt-2 border-t flex items-center justify-between",
                                                    children: [
                                                        _e(ue.noiseAndSensitivity.snrPass, "‚â•25 dB"),
                                                        _jsx("span", {
                                                            className:
                                                                "text-xs font-medium " +
                                                                ("Excellent" === ue.noiseAndSensitivity.snrRating ||
                                                                "Good" === ue.noiseAndSensitivity.snrRating
                                                                    ? "text-green-600"
                                                                    : "Acceptable" === ue.noiseAndSensitivity.snrRating
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: ue.noiseAndSensitivity.snrRating,
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üíª" }), " DSP Load"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Total MIPS:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold text-lg truncate",
                                                            children: ue.dspLoad.totalMips,
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Load Rating:",
                                                        }),
                                                        _jsx("span", {
                                                            className:
                                                                "font-bold truncate " +
                                                                ("Light" === ue.dspLoad.loadRating
                                                                    ? "text-green-600"
                                                                    : "Moderate" === ue.dspLoad.loadRating
                                                                      ? "text-blue-600"
                                                                      : "Heavy" === ue.dspLoad.loadRating
                                                                        ? "text-orange-600"
                                                                        : "text-red-600"),
                                                            children: ue.dspLoad.loadRating,
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Active Blocks:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold truncate",
                                                            children: ue.dspLoad.dspBlocks.length,
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "pt-2 border-t",
                                                    children: _jsx("div", {
                                                        className: "w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",
                                                        children: _jsx("div", {
                                                            className:
                                                                "h-2 rounded-full " +
                                                                (ue.dspLoad.totalMips < 100
                                                                    ? "bg-green-50 dark:bg-green-900/200"
                                                                    : ue.dspLoad.totalMips < 500
                                                                      ? "bg-orange-50 dark:bg-orange-900/200"
                                                                      : "bg-red-50 dark:bg-red-900/200"),
                                                            style: {
                                                                width: `${Math.min(100, ue.dspLoad.totalMips / 10)}%`,
                                                            },
                                                        }),
                                                    }),
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üîÄ" }), " Matrix"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Inputs:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold truncate",
                                                            children: ue.matrix.totalInputs,
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Outputs:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold truncate",
                                                            children: ue.matrix.totalOutputs,
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Matrix Size:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold text-lg truncate",
                                                            children: ue.matrix.matrixSize,
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "pt-2 border-t",
                                                    children: _jsxs("span", {
                                                        className:
                                                            "px-2 py-1 rounded text-xs font-medium " +
                                                            ("Small" === ue.matrix.matrixSizeRating
                                                                ? "bg-green-100 text-green-700"
                                                                : "Medium" === ue.matrix.matrixSizeRating
                                                                  ? "bg-blue-100 text-blue-700"
                                                                  : "bg-purple-100 text-purple-700"),
                                                        children: [ue.matrix.matrixSizeRating, " System"],
                                                    }),
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "‚è±Ô∏è" }), " Latency Budget"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "DSP Processing:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.latency.breakdown.dspProcessingMs, " ms"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsxs("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: ["Network (", ue.latency.networkType, "):"],
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [ue.latency.breakdown.networkTransportMs, " ms"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "A/D + D/A:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [
                                                                ue.latency.breakdown.adConversion +
                                                                    ue.latency.breakdown.daConversion,
                                                                " ms",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className:
                                                        "flex justify-between font-bold " +
                                                        (ue.latency.totalLatencyMs <= 10
                                                            ? "text-green-700"
                                                            : ue.latency.totalLatencyMs <= 20
                                                              ? "text-blue-700"
                                                              : ue.latency.totalLatencyMs <= 30
                                                                ? "text-orange-700"
                                                                : "text-red-700"),
                                                    children: [
                                                        _jsx("span", { children: "Total:" }),
                                                        _jsxs("span", {
                                                            className: "text-lg",
                                                            children: [ue.latency.totalLatencyMs, " ms"],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "pt-2 border-t flex items-center justify-between",
                                                    children: [
                                                        _e(ue.latency.latencyPass, "<20 ms"),
                                                        _jsx("span", {
                                                            className:
                                                                "text-xs font-medium " +
                                                                ("Excellent" === ue.latency.latencyRating ||
                                                                "Good" === ue.latency.latencyRating
                                                                    ? "text-green-600"
                                                                    : "Acceptable" === ue.latency.latencyRating
                                                                      ? "text-orange-600"
                                                                      : "text-red-600"),
                                                            children: ue.latency.latencyRating,
                                                        }),
                                                    ],
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl p-5 border shadow-sm dark:shadow-gray-950/10",
                                    children: [
                                        _jsxs("h3", {
                                            className: "font-semibold text-gray-800 mb-3 flex items-center gap-2",
                                            children: [_jsx("span", { children: "üåê" }), " Network Audio"],
                                        }),
                                        _jsxs("div", {
                                            className: "space-y-2 text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Channels:",
                                                        }),
                                                        _jsx("span", {
                                                            className: "font-bold truncate",
                                                            children: ue.networkAudio.channelCount,
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Per Channel:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold truncate",
                                                            children: [
                                                                ue.networkAudio.perChannelBandwidthKbps,
                                                                " Kbps",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "flex justify-between min-w-0",
                                                    children: [
                                                        _jsx("span", {
                                                            className: "text-gray-600 dark:text-gray-300",
                                                            children: "Total Bandwidth:",
                                                        }),
                                                        _jsxs("span", {
                                                            className: "font-bold text-lg truncate",
                                                            children: [ue.networkAudio.totalBandwidthMbps, " Mbps"],
                                                        }),
                                                    ],
                                                }),
                                                _jsx("div", {
                                                    className: "pt-2 border-t",
                                                    children: _jsxs("span", {
                                                        className:
                                                            "px-2 py-1 bg-blue-100 text-blue-700 rounded text-xs font-medium",
                                                        children: [
                                                            "Recommended: ",
                                                            ue.networkAudio.recommendedSwitch,
                                                            " Switch",
                                                        ],
                                                    }),
                                                }),
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        _jsxs("div", {
                            className: "bg-gray-50 dark:bg-gray-900/50 rounded-xl p-6 border",
                            children: [
                                _jsx("h3", {
                                    className: "font-semibold text-gray-800 mb-4",
                                    children: "üìê Formulas Used (AVIXA / IEC 60268)",
                                }),
                                _jsxs("div", {
                                    className: "grid md:grid-cols-2 gap-4 text-xs font-mono text-gray-600 dark:text-gray-300",
                                    children: [
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Input Headroom:" }),
                                                " max_input - nominal_input",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Required Gain:" }),
                                                " nominal_level - mic_level",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "System Headroom:" }),
                                                " max_output - nominal_level",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Required SPL:" }),
                                                " target + 20√ólog‚ÇÅ‚ÇÄ(d/1) + absorption",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [_jsx("strong", { children: "ACR:" }), " SPL_95% - SPL_5%"],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "AEC Tail:" }),
                                                " 2 √ó RT60 √ó 1000 ms",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "SNR:" }),
                                                " desired_speech - noise_floor",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Mic Sensitivity:" }),
                                                " 10^((dBV + 94) / 20) mV/Pa",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Voltage Gain:" }),
                                                " 20 √ó log‚ÇÅ‚ÇÄ(V_out / V_in)",
                                            ],
                                        }),
                                        _jsxs("div", {
                                            children: [
                                                _jsx("strong", { children: "Dante BW:" }),
                                                " SR √ó bits √ó ch √ó 1.25 / 10‚Å∂ Mbps",
                                            ],
                                        }),
                                    ],
                                }),
                            ],
                        }),
                        ue.actionItems &&
                            ue.actionItems.length > 0 &&
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl p-6 border shadow-sm dark:shadow-gray-950/10",
                                children: [
                                    _jsx("h3", {
                                        className: "text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",
                                        children: "üìã Action Items & Recommendations",
                                    }),
                                    _jsx("div", {
                                        className: "space-y-4",
                                        children: ue.actionItems.map((e, t) =>
                                            _jsxs(
                                                "div",
                                                {
                                                    className:
                                                        "p-4 rounded-lg border-l-4 " +
                                                        ("critical" === e.priority
                                                            ? "bg-red-50 dark:bg-red-900/20 border-red-500"
                                                            : "high" === e.priority
                                                              ? "bg-orange-50 dark:bg-orange-900/20 border-orange-500"
                                                              : "medium" === e.priority
                                                                ? "bg-yellow-50 dark:bg-yellow-900/20 border-yellow-400"
                                                                : "bg-blue-50 dark:bg-blue-900/20 border-blue-400"),
                                                    children: [
                                                        _jsxs("div", {
                                                            className: "flex items-center gap-2 mb-2",
                                                            children: [
                                                                _jsx("span", {
                                                                    className:
                                                                        "px-2 py-0.5 rounded text-xs font-bold uppercase " +
                                                                        ("critical" === e.priority
                                                                            ? "bg-red-200 text-red-800 dark:text-red-200"
                                                                            : "high" === e.priority
                                                                              ? "bg-orange-200 text-orange-800 dark:text-orange-200"
                                                                              : "medium" === e.priority
                                                                                ? "bg-yellow-200 text-yellow-800 dark:text-yellow-200"
                                                                                : "bg-blue-200 text-blue-800 dark:text-blue-200"),
                                                                    children: e.priority,
                                                                }),
                                                                _jsx("span", {
                                                                    className: "font-semibold text-gray-700 dark:text-gray-300",
                                                                    children: e.category,
                                                                }),
                                                            ],
                                                        }),
                                                        _jsx("p", {
                                                            className: "text-sm text-gray-700 dark:text-gray-300 font-medium mb-2",
                                                            children: e.issue,
                                                        }),
                                                        _jsx("ul", {
                                                            className: "text-sm text-gray-600 dark:text-gray-300 space-y-1 ml-4",
                                                            children: e.actions.map((e, t) =>
                                                                _jsxs("li", { className: "list-disc", children: e }, t)
                                                            ),
                                                        }),
                                                    ],
                                                },
                                                t
                                            )
                                        ),
                                    }),
                                ],
                            }),
                        ue.dspRecommendation &&
                            _jsxs("div", {
                                className:
                                    "bg-gradient-to-r from-purple-50 to-indigo-50 rounded-xl p-6 border-2 border-purple-200 dark:border-purple-800 shadow-sm dark:shadow-gray-950/10",
                                children: [
                                    _jsxs("h3", {
                                        className: "text-xl font-bold text-purple-800 dark:text-purple-200 mb-4 flex items-center gap-2",
                                        children: [_jsx("span", { children: "üéõÔ∏è" }), " DSP Selection Recommendation"],
                                    }),
                                    _jsxs("div", {
                                        className: "grid md:grid-cols-2 gap-6",
                                        children: [
                                            _jsxs("div", {
                                                children: [
                                                    _jsxs("div", {
                                                        className: "mb-4",
                                                        children: [
                                                            _jsx("p", {
                                                                className: "text-sm text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Recommended DSP Tier",
                                                            }),
                                                            _jsx("p", {
                                                                className:
                                                                    "text-2xl font-bold capitalize " +
                                                                    ("enterprise" === ue.dspRecommendation.tier
                                                                        ? "text-purple-700"
                                                                        : "professional" === ue.dspRecommendation.tier
                                                                          ? "text-indigo-700"
                                                                          : "mid-range" === ue.dspRecommendation.tier
                                                                            ? "text-blue-700"
                                                                            : "text-green-700"),
                                                                children: ue.dspRecommendation.tier,
                                                            }),
                                                            _jsx("p", {
                                                                className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                                children: ue.dspRecommendation.tierReason.join("; "),
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "mb-4",
                                                        children: [
                                                            _jsx("p", {
                                                                className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                                children: "Required Features:",
                                                            }),
                                                            _jsx("div", {
                                                                className: "flex flex-wrap gap-2",
                                                                children: ue.dspRecommendation.featuresNeeded.map(
                                                                    (e, t) =>
                                                                        _jsx(
                                                                            "span",
                                                                            {
                                                                                className:
                                                                                    "px-2 py-1 bg-white dark:bg-gray-800 rounded border text-xs text-gray-700 dark:text-gray-300",
                                                                                children: e,
                                                                            },
                                                                            t
                                                                        )
                                                                ),
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-300",
                                                        children: [
                                                            _jsxs("p", {
                                                                children: [
                                                                    "Room Size: ",
                                                                    _jsx("span", {
                                                                        className: "font-medium capitalize",
                                                                        children: ue.dspRecommendation.roomSizeCategory,
                                                                    }),
                                                                ],
                                                            }),
                                                            _jsxs("p", {
                                                                children: [
                                                                    "I/O Count: ",
                                                                    ue.dspRecommendation.complexityFactors.ioCount,
                                                                    " channels",
                                                                ],
                                                            }),
                                                            _jsxs("p", {
                                                                children: [
                                                                    "Matrix: ",
                                                                    ue.dspRecommendation.complexityFactors.matrixSize,
                                                                    " crosspoints",
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("p", {
                                                        className: "text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",
                                                        children: "Recommended Products:",
                                                    }),
                                                    _jsx("div", {
                                                        className: "space-y-2",
                                                        children: ue.dspRecommendation.options.map((e, t) =>
                                                            _jsxs(
                                                                "div",
                                                                {
                                                                    className:
                                                                        "bg-white dark:bg-gray-800 p-3 rounded-lg border shadow-sm dark:shadow-gray-950/10",
                                                                    children: [
                                                                        _jsxs("div", {
                                                                            className:
                                                                                "flex justify-between items-start",
                                                                            children: [
                                                                                _jsxs("div", {
                                                                                    children: [
                                                                                        _jsx("p", {
                                                                                            className:
                                                                                                "font-semibold text-gray-800 text-sm",
                                                                                            children:
                                                                                                e.brand + " " + e.model,
                                                                                        }),
                                                                                        _jsx("p", {
                                                                                            className:
                                                                                                "text-xs text-gray-500 dark:text-gray-400",
                                                                                            children: e.channels,
                                                                                        }),
                                                                                    ],
                                                                                }),
                                                                            ],
                                                                        }),
                                                                        _jsx("p", {
                                                                            className: "text-xs text-gray-600 dark:text-gray-300 mt-1",
                                                                            children: e.useCase,
                                                                        }),
                                                                    ],
                                                                },
                                                                t
                                                            )
                                                        ),
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                    _jsxs("div", {
                                        className: "mt-4 p-3 bg-white dark:bg-gray-800/50 rounded-lg",
                                        children: [
                                            _jsxs("p", {
                                                className: "text-xs text-gray-600 dark:text-gray-300 mb-3",
                                                children: [
                                                    _jsx("strong", { children: "Note:" }),
                                                    " DSP recommendations are based on your I/O requirements, processing needs, and room characteristics. Always verify specific product capabilities against your exact requirements and consult manufacturer specifications.",
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "border-t pt-3",
                                                children: [
                                                    _jsx("p", {
                                                        className: "text-xs font-semibold text-purple-700 mb-2",
                                                        children: "üí° DSP Selection Best Practices:",
                                                    }),
                                                    _jsxs("ul", {
                                                        className: "text-xs text-gray-600 dark:text-gray-300 space-y-1 ml-4",
                                                        children: [
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Plan for 30% I/O expansion - choose DSP with room to grow",
                                                            }),
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Ensure AEC tail length exceeds RT60 √ó 1.5 for effective echo cancellation",
                                                            }),
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Match network audio protocol (Dante/AES67/AVB) to existing infrastructure",
                                                            }),
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Verify USB audio support if soft codec integration is required",
                                                            }),
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Keep DSP processing load under 70% for stability and future expansion",
                                                            }),
                                                            _jsx("li", {
                                                                className: "list-disc",
                                                                children:
                                                                    "Consider redundancy options for mission-critical applications",
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                    ],
                }),
        ],
    });
}
function RackBuilderCalculator() {
    const [e, t] = useState([]),
        [s, a] = useState(""),
        [r, l] = useState("1"),
        [i, n] = useState("rack"),
        [o, d] = useState("full"),
        [c, m] = useState(25),
        [x, u] = useState(!1),
        [h, p] = useState([]),
        [g, b] = useState(null),
        [f, y] = useState(null),
        [j, _] = useState(null),
        [v, N] = useState({}),
        [w, C] = useState(null),
        [M, k] = useState(""),
        [S, R] = useState(null),
        [P, A] = useState(""),
        [D, I] = useState(null),
        [E, F] = useState(0),
        [B, T] = useState(0),
        [L, H] = useState("auto"),
        [U, q] = useState([]),
        [$, W] = useState(0),
        [V, O] = useState(null),
        [z, G] = useState(null),
        [X, J] = useState(!1),
        [Q, K] = useState(42),
        [Y, Z] = useState(!1),
        [ee, te] = useState(null),
        [se, ae] = useState(""),
        [re, le] = useState("1"),
        [ie, ne] = useState("rack"),
        [oe, de] = useState("full"),
        // Cache for PDF logo to avoid re-fetching on each export
        pdfLogoCacheRef = useRef(null),
        pdfLogoLoadingRef = useRef(false),
        ce = (useRef(null), [8, 12, 15, 18, 22, 25, 27, 32, 37, 42, 45]),
        me = 45,
        xe = [
            { bg: "bg-blue-50 dark:bg-blue-900/200", border: "border-blue-600", text: "text-white" },
            { bg: "bg-emerald-500", border: "border-emerald-600", text: "text-white" },
            { bg: "bg-violet-500", border: "border-violet-600", text: "text-white" },
            { bg: "bg-amber-50 dark:bg-amber-900/200", border: "border-amber-600", text: "text-white" },
            { bg: "bg-rose-500", border: "border-rose-600", text: "text-white" },
            { bg: "bg-cyan-500", border: "border-cyan-600", text: "text-white" },
            { bg: "bg-fuchsia-500", border: "border-fuchsia-600", text: "text-white" },
            { bg: "bg-lime-600", border: "border-lime-700", text: "text-white" },
        ],
        ue = (e) => {
            const t = "rack" === e.type,
                s = e.isHalfWidth || "half" === e.width,
                a = e.ru || 1;
            let r;
            return (
                (r = a <= 2 ? "small" : a <= 4 ? "medium" : "large"),
                t
                    ? s
                        ? "small" === r
                            ? {
                                  bg: "bg-blue-400",
                                  border: "border-blue-500 border-dashed",
                                  text: "text-white",
                                  label: "Rack Half 1-2U",
                              }
                            : "medium" === r
                              ? {
                                    bg: "bg-indigo-400",
                                    border: "border-indigo-500 border-dashed",
                                    text: "text-white",
                                    label: "Rack Half 3-4U",
                                }
                              : {
                                    bg: "bg-violet-400",
                                    border: "border-violet-500 border-dashed",
                                    text: "text-white",
                                    label: "Rack Half 5+U",
                                }
                        : "small" === r
                          ? {
                                bg: "bg-blue-600",
                                border: "border-blue-700",
                                text: "text-white",
                                label: "Rack Full 1-2U",
                            }
                          : "medium" === r
                            ? {
                                  bg: "bg-indigo-600",
                                  border: "border-indigo-700",
                                  text: "text-white",
                                  label: "Rack Full 3-4U",
                              }
                            : {
                                  bg: "bg-violet-600",
                                  border: "border-violet-700",
                                  text: "text-white",
                                  label: "Rack Full 5+U",
                              }
                    : s
                      ? "small" === r
                          ? {
                                bg: "bg-emerald-400",
                                border: "border-emerald-500 border-dashed",
                                text: "text-white",
                                label: "Shelf Half 1-2U",
                            }
                          : "medium" === r
                            ? {
                                  bg: "bg-teal-400",
                                  border: "border-teal-500 border-dashed",
                                  text: "text-white",
                                  label: "Shelf Half 3-4U",
                              }
                            : {
                                  bg: "bg-cyan-400",
                                  border: "border-cyan-500 border-dashed",
                                  text: "text-white",
                                  label: "Shelf Half 5+U",
                              }
                      : "small" === r
                        ? {
                              bg: "bg-emerald-600",
                              border: "border-emerald-700",
                              text: "text-white",
                              label: "Shelf Full 1-2U",
                          }
                        : "medium" === r
                          ? {
                                bg: "bg-teal-600",
                                border: "border-teal-700",
                                text: "text-white",
                                label: "Shelf Full 3-4U",
                            }
                          : {
                                bg: "bg-cyan-600",
                                border: "border-cyan-700",
                                text: "text-white",
                                label: "Shelf Full 5+U",
                            }
            );
        },
        [he, pe] = useState(!1);
    useEffect(() => {
        if (D) {
            F((e) => e + 1);
            const e = setTimeout(() => I(null), 4e3);
            return () => clearTimeout(e);
        }
    }, [D]);
    
    // Preload jsPDF library and logo on component mount for faster PDF export
    useEffect(() => {
        // Preload jsPDF library
        if (!window.jspdf) {
            const script = document.createElement("script");
            script.src = "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js";
            script.async = true;
            document.head.appendChild(script);
        }
        
        // Preload logo
        if (!pdfLogoCacheRef.current && !pdfLogoLoadingRef.current) {
            pdfLogoLoadingRef.current = true;
            const logoUrl = "https://avtoolspro.com/AV_TOOLS_LOGO.png";
            const img = new Image();
            img.crossOrigin = "Anonymous";
            img.onload = () => {
                try {
                    const canvas = document.createElement("canvas");
                    canvas.width = img.width;
                    canvas.height = img.height;
                    canvas.getContext("2d").drawImage(img, 0, 0);
                    pdfLogoCacheRef.current = canvas.toDataURL("image/png");
                } catch (e) {
                    console.log("Could not preload logo:", e);
                }
                pdfLogoLoadingRef.current = false;
            };
            img.onerror = () => {
                pdfLogoLoadingRef.current = false;
            };
            img.src = logoUrl;
        }
    }, []);
    
    const ge = ((e) => {
            const t = e.filter((e) => "rack" === e.type),
                s = e.filter((e) => "shelf" === e.type),
                a = t.filter((e) => "full" === e.width),
                r = t.filter((e) => "half" === e.width),
                l = s.filter((e) => "full" === e.width),
                i = s.filter((e) => "half" === e.width),
                n = {};
            r.forEach((e) => {
                n[e.ru] || (n[e.ru] = []), n[e.ru].push(e);
            });
            const o = {};
            i.forEach((e) => {
                o[e.ru] || (o[e.ru] = []), o[e.ru].push(e);
            });
            let d = 0,
                c = 0;
            Object.entries(n).forEach(([e, t]) => {
                const s = parseInt(e),
                    a = Math.floor(t.length / 2),
                    r = t.length % 2;
                (d += a * s + r * s), (c += a * s);
            });
            let m = 0,
                x = 0;
            Object.entries(o).forEach(([e, t]) => {
                const s = parseInt(e),
                    a = Math.floor(t.length / 2),
                    r = t.length % 2;
                (m += a * s + r * s), (x += a * s);
            });
            const u = a.reduce((e, t) => e + t.ru, 0),
                h = l.reduce((e, t) => e + t.ru, 0);
            let p = 0;
            Object.values(n).forEach((e) => {
                e.length % 2 == 1 && (p += e[0].ru);
            }),
                Object.values(o).forEach((e) => {
                    e.length % 2 == 1 && (p += e[0].ru);
                });
            const g = l.length + Object.values(o).reduce((e, t) => e + Math.ceil(t.length / 2), 0);
            return {
                effectiveRU: u + d + h + m,
                totalRUWithoutPairing: e.reduce((e, t) => e + t.ru, 0),
                ruSaved: c + x,
                halfBlanksNeeded: p,
                shelvesNeeded: g,
                halfRackCount: r.length,
                halfShelfCount: i.length,
                hasHeavyEquipment: e.some((e) => e.ru >= 4),
                halfRackByRU: n,
                halfShelfByRU: o,
            };
        })(e),
        be = ge.effectiveRU,
        fe = (() => {
            if (0 === be) return { rackSizes: [45], totalCapacity: 45, blanksNeeded: 45, actualSparePercent: 100 };
            const e = 1 - c / 100;
            let t = [];
            const s = Math.floor(45 * e);
            if (be <= Math.floor(me * e)) {
                const s = Math.ceil(be / e);
                t = [ce.find((e) => e >= s) || me];
            } else {
                let a = be;
                for (; a > 0; ) {
                    if (a > s) t.push(45), (a -= s);
                    else {
                        const s = Math.ceil(a / e),
                            r = ce.find((e) => e >= s) || me;
                        t.push(r), (a = 0);
                    }
                    if (t.length > 10) break;
                }
            }
            const a = t.reduce((e, t) => e + t, 0),
                r = a - be;
            return {
                rackSizes: t,
                totalCapacity: a,
                blanksNeeded: r,
                actualSparePercent: Math.round((r / a) * 100),
                needsMultipleRacks: t.length > 1,
            };
        })(),
        { rackSizes: ye, totalCapacity: je, blanksNeeded: _e, actualSparePercent: ve, needsMultipleRacks: Ne } = fe,
        we = [...ye],
        Ce = we.reduce((e, t) => e + t, 0),
        Me = Ce - be,
        ke =
            (Ce > 0 && Math.round((Me / Ce) * 100),
            () => {
                const t = [],
                    s = [];
                let a = 1;
                e.forEach((e, t) => {
                    s.push({ ...e, colorIndex: t % xe.length, isHalfWidth: "half" === e.width });
                });
                const r = we.length,
                    l = c / 100,
                    i = we.map((e) => Math.floor(e * (1 - l))),
                    n = [...s],
                    o = we.map(() => []),
                    d = we.map(() => 0);
                for (const e of n) {
                    let t = !1;
                    for (let s = 0; s < r && !t; s++) {
                        i[s] - d[s] >= e.ru && (o[s].push(e), (d[s] += e.ru), (t = !0));
                    }
                    if (!t)
                        for (let s = 0; s < r && !t; s++) {
                            we[s] - d[s] >= e.ru && (o[s].push(e), (d[s] += e.ru), (t = !0));
                        }
                }
                return (
                    we.forEach((e, s) => {
                        const r = [];
                        let l = 1,
                            i = 0;
                        for (
                            o[s].forEach((e) => {
                                r.push({ id: e.id, startRU: l, endRU: l + e.ru - 1, type: "equipment", item: e }),
                                    (l += e.ru),
                                    (i += e.ru);
                            });
                            l <= e;

                        )
                            r.push({ id: `blank-${s}-${a++}`, startRU: l, endRU: l, type: "blank", ru: 1 }), l++;
                        t.push({ rackIndex: s, rackSize: e, layout: r, equipmentRU: i, blanksRU: e - i });
                    }),
                    t
                );
            }),
        Se = useRef(""),
        Re = (useRef(""), useRef(c)),
        [Pe, Ae] = useState(!1),
        De = useRef(!1),
        Ie = useRef([]),
        Ee = useRef(h);
    useEffect(() => {
        Ee.current = h;
    }, [h]);
    const Fe = [8, 12, 15, 18, 22, 25, 27, 32, 37, 42, 45],
        Be = (e, t = 45) => {
            for (const s of Fe) if (s >= e && s <= t) return s;
            return t;
        },
        Te = (e, t) => (t >= 100 ? 0 : t <= 0 ? e : Math.floor(e * (1 - t / 100))),
        Le = (e, t) => (t <= 0 || e <= 0 ? 0 : t >= 100 ? 45 : Math.ceil((e * t) / (100 - t))),
        He = (e, t, s = 45) => {
            const a = ((e, t) => e + Le(e, t))(e, t);
            return Be(a, s);
        },
        Ue = (e) => {
            let t = 0,
                s = 0;
            return (
                e.forEach((e) => {
                    "equipment" === e.type && e.item ? (t += e.item.ru || 1) : "blank" === e.type && s++;
                }),
                { equipRU: t, blanksRU: s, totalRU: t + s }
            );
        },
        qe = (e, t, s, a = null) => {
            const r = ((e, t, s, a = null) => {
                for (let r = 0; r < e.length; r++) {
                    const l = e[r];
                    if ("equipment" !== l.type || !l.item) continue;
                    const i = l.item;
                    if (a && i.id === a) continue;
                    const n = i.isHalfWidth || "half" === i.width,
                        o = !0 === i.isHalfPair || null != i.pairItem;
                    if (n && !o && i.type === t && (i.ru || 1) === s) return { layoutIdx: r, item: l };
                }
                return null;
            })(e.layout, t, s, a);
            if (r)
                return {
                    canPlace: !0,
                    method: "pair",
                    layoutIdx: r.layoutIdx,
                    details: "Can pair with existing half-width item",
                };
            let l = 0,
                i = -1;
            for (let t = 0; t < e.layout.length; t++) {
                if ("blank" === e.layout[t].type) {
                    if ((-1 === i && (i = t), l++, l >= s))
                        return {
                            canPlace: !0,
                            method: "blanks",
                            startIdx: i,
                            blanksCount: l,
                            details: `Can use ${s}U of blank space`,
                        };
                } else (i = -1), (l = 0);
            }
            return {
                canPlace: !1,
                method: "none",
                details: `No compatible half-width to pair with and insufficient blanks (need ${s}U)`,
            };
        },
        $e = (e, t) => {
            const s = [];
            for (let a = 1; a <= e; a++)
                s.push({ id: `blank-${t}-${Date.now()}-${a}`, type: "blank", ru: 1, startRU: a, endRU: a });
            return { rackSize: e, rackIndex: t, name: "", equipmentRU: 0, blanksRU: e, layout: s };
        },
        We = (e, t) => (e.name && e.name.trim() ? e.name.trim() : `Rack ${t + 1}`),
        Ve = (e) => {
            if ("manual" !== L) return;
            const t = h.length,
                s = $e(e, t);
            p((e) => [...e, s]), T(t), J(!1);
        },
        Oe = (e, t, s = 45) => {
            const a = [8, 12, 15, 18, 22, 25, 27, 32, 37, 42, 45];
            return e.map((e, r) => {
                const l = {
                    ...e,
                    layout: e.layout.map((e) =>
                        "equipment" === e.type && e.item
                            ? { ...e, item: { ...e.item, pairItem: e.item.pairItem ? { ...e.item.pairItem } : null } }
                            : { ...e }
                    ),
                };
                let i = 0;
                l.layout.forEach((e) => {
                    "equipment" === e.type && e.item && (i += e.item.ru || 1);
                });
                let n = 0;
                for (let e = l.layout.length - 1; e >= 0 && "blank" === l.layout[e].type; e--) n++;
                let o = 0;
                l.layout.forEach((e) => {
                    "blank" === e.type && o++;
                });
                const d = o - n,
                    c = Le(i, t),
                    m = Math.max(d, c),
                    x = i + m;
                let u = a.find((e) => e >= x);
                u || (u = s), (u = Math.min(u, s));
                const h = u - i,
                    p = Math.max(0, h - d);
                for (let e = 0; e < n; e++)
                    l.layout.length > 0 && "blank" === l.layout[l.layout.length - 1].type && l.layout.pop();
                for (let e = 0; e < p; e++)
                    l.layout.push({
                        id: `blank-${r}-spare-${Date.now()}-${e}-${Math.random().toString(36).substr(2, 5)}`,
                        startRU: 0,
                        endRU: 0,
                        type: "blank",
                        ru: 1,
                        isUserGap: !1,
                    });
                let g = 0;
                for (
                    l.layout.forEach((e) => {
                        "equipment" === e.type && e.item ? (g += e.item.ru || 1) : "blank" === e.type && g++;
                    });
                    g > s && l.layout.length > 0 && "blank" === l.layout[l.layout.length - 1].type;

                )
                    l.layout.pop(), g--;
                let b = 1,
                    f = 0,
                    y = 0;
                l.layout.forEach((e) => {
                    if ("equipment" === e.type && e.item) {
                        const t = e.item.ru || 1;
                        (e.startRU = b), (e.endRU = b + t - 1), (b += t), (f += t);
                    } else "blank" === e.type && ((e.startRU = b), (e.endRU = b), b++, y++);
                });
                const j = f + y;
                return (l.rackSize = Math.min(j, s)), (l.equipmentRU = f), (l.blanksRU = y), (l.rackIndex = r), l;
            });
        },
        ze = (e, t, s = 45) => {
            const a = [8, 12, 15, 18, 22, 25, 27, 32, 37, 42, 45],
                r = Te(s, t),
                l = [];
            e.forEach((e) => {
                e.layout.forEach((e) => {
                    "equipment" === e.type &&
                        e.item &&
                        (l.push({
                            ...e,
                            item: {
                                ...e.item,
                                isHalfWidth: e.item.isHalfWidth || "half" === e.item.width,
                                isHalfPair: !1,
                                pairItem: null,
                            },
                        }),
                        e.item.isHalfPair &&
                            e.item.pairItem &&
                            l.push({
                                id: e.item.pairItem.id,
                                type: "equipment",
                                startRU: 0,
                                endRU: 0,
                                item: { ...e.item.pairItem, isHalfWidth: !0, isHalfPair: !1, pairItem: null },
                            }));
                });
            });
            const i = l.filter((e) => !e.item.isHalfWidth),
                n = l.filter((e) => e.item.isHalfWidth),
                o = {};
            n.forEach((e) => {
                const t = `${e.item.type}-${e.item.ru || 1}`;
                o[t] || (o[t] = []), o[t].push(e);
            });
            const d = [];
            Object.values(o).forEach((e) => {
                for (let t = 0; t < e.length; t += 2)
                    t + 1 < e.length ? d.push({ item1: e[t], item2: e[t + 1] }) : d.push({ item1: e[t], item2: null });
            });
            const c = [];
            i.forEach((e) => {
                c.push({ type: "full", effectiveRU: e.item.ru || 1, items: [e] });
            }),
                d.forEach((e) => {
                    const t = e.item1.item.ru || 1;
                    c.push({
                        type: e.item2 ? "paired-half" : "unpaired-half",
                        effectiveRU: t,
                        items: e.item2 ? [e.item1, e.item2] : [e.item1],
                    });
                }),
                c.sort((e, t) => t.effectiveRU - e.effectiveRU);
            const m = [];
            let x = [],
                u = 0;
            c.forEach((e) => {
                u + e.effectiveRU <= r
                    ? (x.push(e), (u += e.effectiveRU))
                    : (x.length > 0 && m.push({ items: x, equipRU: u }), (x = [e]), (u = e.effectiveRU));
            }),
                x.length > 0 && m.push({ items: x, equipRU: u });
            const h = m.map((e, a) => {
                const { items: r, equipRU: l } = e,
                    i = He(l, t, s),
                    n = i - l,
                    o = [];
                let d = 1;
                r.forEach((e) => {
                    if ("full" === e.type) {
                        const t = e.items[0],
                            s = t.item.ru || 1;
                        o.push({
                            ...t,
                            startRU: d,
                            endRU: d + s - 1,
                            item: { ...t.item, isHalfPair: !1, pairItem: null },
                        }),
                            (d += s);
                    } else if ("paired-half" === e.type) {
                        const t = e.items[0],
                            s = e.items[1],
                            a = t.item.ru || 1;
                        o.push({
                            ...t,
                            startRU: d,
                            endRU: d + a - 1,
                            item: {
                                ...t.item,
                                isHalfWidth: !0,
                                isHalfPair: !0,
                                pairItem: { ...s.item, isHalfWidth: !0 },
                            },
                        }),
                            (d += a);
                    } else {
                        const t = e.items[0],
                            s = t.item.ru || 1;
                        o.push({
                            ...t,
                            startRU: d,
                            endRU: d + s - 1,
                            item: { ...t.item, isHalfWidth: !0, isHalfPair: !1, pairItem: null },
                        }),
                            (d += s);
                    }
                });
                for (let e = 0; e < n; e++)
                    o.push({
                        id: `blank-${a}-opt-${Date.now()}-${e}-${Math.random().toString(36).substr(2, 5)}`,
                        startRU: d,
                        endRU: d,
                        type: "blank",
                        ru: 1,
                        isUserGap: !1,
                    }),
                        d++;
                return { rackIndex: a, rackSize: i, layout: o, equipmentRU: l, blanksRU: n };
            });
            return h.length > 0 ? h : [{ rackIndex: 0, rackSize: a[0], layout: [], equipmentRU: 0, blanksRU: a[0] }];
        },
        Ge = (e, t = 45) =>
            e.map((e, s) => {
                const a = {
                    ...e,
                    layout: e.layout.map((e) =>
                        "equipment" === e.type && e.item
                            ? { ...e, item: { ...e.item, pairItem: e.item.pairItem ? { ...e.item.pairItem } : null } }
                            : { ...e }
                    ),
                };
                let r = 0,
                    l = 0;
                a.layout.forEach((e) => {
                    "equipment" === e.type && e.item ? (r += e.item.ru || 1) : "blank" === e.type && l++;
                });
                let i = r + l;
                for (; i > t && a.layout.length > 0; ) {
                    if ("blank" !== a.layout[a.layout.length - 1].type) break;
                    a.layout.pop(), l--, i--;
                }
                let n = 1;
                return (
                    (r = 0),
                    (l = 0),
                    a.layout.forEach((e) => {
                        if ("equipment" === e.type && e.item) {
                            const t = e.item.ru || 1;
                            (e.startRU = n), (e.endRU = n + t - 1), (n += t), (r += t);
                        } else "blank" === e.type && ((e.startRU = n), (e.endRU = n), n++, l++);
                    }),
                    (a.rackSize = Math.min(r + l, t)),
                    (a.equipmentRU = r),
                    (a.blanksRU = l),
                    (a.rackIndex = s),
                    a
                );
            }),
        Xe = (e, t) =>
            t && 0 !== t.length
                ? e.map((e, s) =>
                      s < t.length && t[s].name ? { ...e, name: t[s].name } : { ...e, name: e.name || "" }
                  )
                : e;
    useEffect(() => {
        if ("manual" === L) return;
        const t = JSON.stringify(e);
        if (t !== Se.current) {
            if (((Se.current = t), e.length > 0)) {
                const t = Ie.current;
                Ie.current = e.map((e) => ({ ...e }));
                const s = Ee.current;
                if (De.current && s.length > 0 && t.length > 0) {
                    const a = new Set(t.map((e) => e.id)),
                        r = new Set(e.map((e) => e.id)),
                        l = e.filter((e) => !a.has(e.id)),
                        i = [...a].filter((e) => !r.has(e)),
                        n = new Map(e.map((e) => [e.id, e]));
                    let o = s.map((e) => ({
                        ...e,
                        layout: e.layout.map((e) =>
                            "equipment" === e.type && e.item
                                ? {
                                      ...e,
                                      item: { ...e.item, pairItem: e.item.pairItem ? { ...e.item.pairItem } : null },
                                  }
                                : { ...e }
                        ),
                    }));
                    i.forEach((e) => {
                        o.forEach((t, s) => {
                            const a = t.layout.findIndex((t) => "equipment" === t.type && t.item && t.item.id === e);
                            if (-1 !== a) {
                                const e = t.layout[a].item?.ru || 1,
                                    r = [];
                                for (let t = 0; t < e; t++)
                                    r.push({
                                        id: `blank-${s}-rep-${Date.now()}-${t}`,
                                        startRU: 0,
                                        endRU: 0,
                                        type: "blank",
                                        ru: 1,
                                    });
                                t.layout.splice(a, 1, ...r);
                            }
                            t.layout.forEach((t) => {
                                "equipment" === t.type &&
                                    t.item &&
                                    t.item.pairItem &&
                                    t.item.pairItem.id === e &&
                                    ((t.item.isHalfPair = !1), (t.item.pairItem = null));
                            });
                        });
                    });
                    const d = [];
                    for (
                        o.forEach((e, t) => {
                            e.layout.forEach((e, s) => {
                                if ("equipment" === e.type && e.item) {
                                    const s = n.get(e.item.id);
                                    if (s) {
                                        const a = e.item.isHalfWidth || "half" === e.item.width,
                                            r = "full" === s.width;
                                        if (a && r && e.item.isHalfPair && e.item.pairItem) {
                                            const s = {
                                                ...e.item.pairItem,
                                                isHalfWidth: !0,
                                                isHalfPair: !1,
                                                pairItem: null,
                                            };
                                            d.push({ item: s, originalRackIdx: t }),
                                                (e.item.isHalfPair = !1),
                                                (e.item.pairItem = null);
                                        }
                                        (e.item.name = s.name),
                                            (e.item.ru = s.ru),
                                            (e.item.type = s.type),
                                            (e.item.width = s.width),
                                            (e.item.isHalfWidth = "half" === s.width),
                                            r && ((e.item.isHalfPair = !1), (e.item.pairItem = null));
                                        const l = !a,
                                            i = "half" === s.width;
                                        l && i && (e.item.needsPairingCheck = !0);
                                    }
                                    if (e.item.pairItem) {
                                        const s = n.get(e.item.pairItem.id);
                                        if (s) {
                                            if ("full" === s.width) {
                                                const a = {
                                                    ...e.item.pairItem,
                                                    ...s,
                                                    isHalfWidth: !1,
                                                    isHalfPair: !1,
                                                    pairItem: null,
                                                };
                                                (e.item.isHalfPair = !1),
                                                    (e.item.pairItem = null),
                                                    d.push({ item: a, originalRackIdx: t, isNowFull: !0 });
                                            } else
                                                (e.item.pairItem.name = s.name),
                                                    (e.item.pairItem.ru = s.ru),
                                                    (e.item.pairItem.type = s.type),
                                                    (e.item.pairItem.width = s.width);
                                        }
                                    }
                                }
                            });
                        }),
                            d.forEach(({ item: t, originalRackIdx: s, isNowFull: a }) => {
                                const r = e.findIndex((e) => e.id === t.id),
                                    l = r >= 0 ? r % xe.length : 0;
                                if (a) {
                                    let e = !1;
                                    const s = Te(me, c);
                                    for (let a = 0; a < o.length && !e; a++) {
                                        const r = o[a];
                                        let i = 0;
                                        if (
                                            (r.layout.forEach((e) => {
                                                "equipment" === e.type && e.item && (i += e.item.ru || 1);
                                            }),
                                            i + (t.ru || 1) <= s)
                                        ) {
                                            let s = r.layout.length;
                                            for (
                                                let e = r.layout.length - 1;
                                                e >= 0 && "blank" === r.layout[e].type;
                                                e--
                                            )
                                                s = e;
                                            let a = t.ru || 1;
                                            for (
                                                let e = r.layout.length - 1;
                                                e >= 0 && a > 0 && "blank" === r.layout[e].type;
                                                e--
                                            )
                                                r.layout.splice(e, 1), a--;
                                            r.layout.splice(Math.min(s, r.layout.length), 0, {
                                                id: t.id,
                                                type: "equipment",
                                                startRU: 0,
                                                endRU: 0,
                                                item: { ...t, colorIndex: l },
                                            }),
                                                (e = !0);
                                        }
                                    }
                                    if (!e) {
                                        const e = o.length,
                                            s = He(t.ru || 1, c, me),
                                            a = [
                                                {
                                                    id: t.id,
                                                    type: "equipment",
                                                    startRU: 1,
                                                    endRU: t.ru || 1,
                                                    item: { ...t, colorIndex: l },
                                                },
                                            ];
                                        for (let r = t.ru || 1; r < s; r++)
                                            a.push({
                                                id: `blank-${e}-${Date.now()}-${r}`,
                                                type: "blank",
                                                startRU: r + 1,
                                                endRU: r + 1,
                                                ru: 1,
                                            });
                                        o.push({
                                            rackIndex: e,
                                            rackSize: s,
                                            layout: a,
                                            equipmentRU: t.ru || 1,
                                            blanksRU: s - (t.ru || 1),
                                        });
                                    }
                                } else {
                                    let e = !1;
                                    for (let s = 0; s < o.length && !e; s++) {
                                        const a = o[s];
                                        for (let s = 0; s < a.layout.length && !e; s++) {
                                            const r = a.layout[s];
                                            if ("equipment" !== r.type || !r.item) continue;
                                            if (r.item.id === t.id) continue;
                                            !(r.item.isHalfWidth || "half" === r.item.width) ||
                                                r.item.isHalfPair ||
                                                r.item.pairItem ||
                                                (r.item.type === t.type &&
                                                    (r.item.ru || 1) === (t.ru || 1) &&
                                                    ((r.item.isHalfPair = !0),
                                                    (r.item.pairItem = { ...t, colorIndex: l, isHalfWidth: !0 }),
                                                    (e = !0)));
                                        }
                                    }
                                    if (!e) {
                                        const e = Te(me, c);
                                        let s = !1;
                                        for (let a = 0; a < o.length && !s; a++) {
                                            const r = o[a];
                                            let i = 0;
                                            if (
                                                (r.layout.forEach((e) => {
                                                    "equipment" === e.type && e.item && (i += e.item.ru || 1);
                                                }),
                                                i + (t.ru || 1) <= e)
                                            ) {
                                                let e = r.layout.length;
                                                for (
                                                    let t = r.layout.length - 1;
                                                    t >= 0 && "blank" === r.layout[t].type;
                                                    t--
                                                )
                                                    e = t;
                                                let a = t.ru || 1;
                                                for (
                                                    let e = r.layout.length - 1;
                                                    e >= 0 && a > 0 && "blank" === r.layout[e].type;
                                                    e--
                                                )
                                                    r.layout.splice(e, 1), a--;
                                                r.layout.splice(Math.min(e, r.layout.length), 0, {
                                                    id: t.id,
                                                    type: "equipment",
                                                    startRU: 0,
                                                    endRU: 0,
                                                    item: {
                                                        ...t,
                                                        colorIndex: l,
                                                        isHalfWidth: !0,
                                                        isHalfPair: !1,
                                                        pairItem: null,
                                                    },
                                                }),
                                                    (s = !0);
                                            }
                                        }
                                        if (!s) {
                                            const e = o.length,
                                                s = He(t.ru || 1, c, me),
                                                a = [
                                                    {
                                                        id: t.id,
                                                        type: "equipment",
                                                        startRU: 1,
                                                        endRU: t.ru || 1,
                                                        item: {
                                                            ...t,
                                                            colorIndex: l,
                                                            isHalfWidth: !0,
                                                            isHalfPair: !1,
                                                            pairItem: null,
                                                        },
                                                    },
                                                ];
                                            for (let r = t.ru || 1; r < s; r++)
                                                a.push({
                                                    id: `blank-${e}-${Date.now()}-${r}`,
                                                    type: "blank",
                                                    startRU: r + 1,
                                                    endRU: r + 1,
                                                    ru: 1,
                                                });
                                            o.push({
                                                rackIndex: e,
                                                rackSize: s,
                                                layout: a,
                                                equipmentRU: t.ru || 1,
                                                blanksRU: s - (t.ru || 1),
                                            });
                                        }
                                    }
                                }
                            }),
                            o.forEach((e) => {
                                for (let t = 0; t < e.layout.length; t++) {
                                    const s = e.layout[t];
                                    if ("equipment" !== s.type || !s.item || !s.item.needsPairingCheck) continue;
                                    const a = s.item,
                                        r = a.type,
                                        l = a.ru || 1;
                                    delete s.item.needsPairingCheck;
                                    let i = !1;
                                    for (let s = 0; s < o.length && !i; s++) {
                                        const n = o[s];
                                        for (let s = 0; s < n.layout.length; s++) {
                                            if (n === e && t === s) continue;
                                            const o = n.layout[s];
                                            if ("equipment" !== o.type || !o.item) continue;
                                            const d = o.item,
                                                c = d.isHalfWidth || "half" === d.width,
                                                m = !0 === d.isHalfPair || null != d.pairItem;
                                            if (c && !m && d.type === r && (d.ru || 1) === l && !d.needsPairingCheck) {
                                                (n.layout[s] = {
                                                    ...o,
                                                    item: {
                                                        ...d,
                                                        isHalfPair: !0,
                                                        pairItem: {
                                                            ...a,
                                                            isHalfWidth: !0,
                                                            isHalfPair: !1,
                                                            pairItem: null,
                                                            needsPairingCheck: void 0,
                                                        },
                                                    },
                                                }),
                                                    (e.layout[t] = {
                                                        id: `blank-paired-${Date.now()}-${t}`,
                                                        type: "blank",
                                                        ru: l,
                                                        startRU: 0,
                                                        endRU: 0,
                                                    }),
                                                    (i = !0);
                                                break;
                                            }
                                        }
                                    }
                                }
                            });
                        o.length < we.length;

                    ) {
                        const e = o.length,
                            t = we[e] || 45,
                            s = [];
                        for (let a = 0; a < t; a++)
                            s.push({
                                id: `blank-${e}-new-${Date.now()}-${a}`,
                                startRU: a + 1,
                                endRU: a + 1,
                                type: "blank",
                                ru: 1,
                            });
                        o.push({ rackIndex: e, rackSize: t, layout: s, equipmentRU: 0, blanksRU: t });
                    }
                    for (
                        l.forEach((t) => {
                            const s = e.indexOf(t) % xe.length,
                                a = "half" === t.width;
                            let r = !1;
                            const l = Te(me, c);
                            if (a) {
                                const e = [...o.keys()].sort((e, t) => (e === B ? -1 : t === B ? 1 : 0));
                                for (const a of e) {
                                    if (r) break;
                                    const e = o[a];
                                    for (let a = 0; a < e.layout.length; a++) {
                                        const l = e.layout[a];
                                        if ("equipment" !== l.type || !l.item) continue;
                                        const i = l.item;
                                        if ((i.isHalfWidth || "half" === i.width) && !i.isHalfPair && !i.pairItem) {
                                            const e = i.type === t.type,
                                                a = (i.ru || 1) === (t.ru || 1);
                                            if (e && a) {
                                                (l.item = {
                                                    ...i,
                                                    isHalfWidth: !0,
                                                    isHalfPair: !0,
                                                    pairItem: { ...t, colorIndex: s, isHalfWidth: !0 },
                                                }),
                                                    (r = !0);
                                                break;
                                            }
                                        }
                                    }
                                }
                            }
                            if (!r) {
                                const e = {
                                        id: t.id,
                                        startRU: 0,
                                        endRU: 0,
                                        type: "equipment",
                                        item: { ...t, colorIndex: s, isHalfWidth: a, isHalfPair: !1, pairItem: null },
                                    },
                                    i = [];
                                for (let e = 0; e < o.length; e++) {
                                    const s = o[e];
                                    let a = 0;
                                    s.layout.forEach((e) => {
                                        "equipment" === e.type && e.item && (a += e.item.ru || 1);
                                    });
                                    const r = a + t.ru,
                                        n = l - a;
                                    r <= l && i.push({ rackIdx: e, availableCapacity: n, isTarget: e === B });
                                }
                                i.sort((e, t) =>
                                    e.isTarget && !t.isTarget
                                        ? -1
                                        : !e.isTarget && t.isTarget
                                          ? 1
                                          : t.availableCapacity - e.availableCapacity
                                );
                                for (let s = 0; s < i.length && !r; s++) {
                                    const { rackIdx: a } = i[s],
                                        l = o[a];
                                    let n = l.layout.length;
                                    for (let e = l.layout.length - 1; e >= 0 && "blank" === l.layout[e].type; e--)
                                        n = e;
                                    let d = t.ru;
                                    for (
                                        let e = l.layout.length - 1;
                                        e >= 0 && d > 0 && "blank" === l.layout[e].type;
                                        e--
                                    )
                                        l.layout.splice(e, 1), d--;
                                    const c = Math.min(n, l.layout.length);
                                    l.layout.splice(c, 0, e), (r = !0);
                                }
                                if (!r) {
                                    const s = o.length,
                                        a = He(t.ru, c, me),
                                        l = [];
                                    l.push(e);
                                    for (let e = t.ru; e < a; e++)
                                        l.push({
                                            id: `blank-${s}-new-${Date.now()}-${e}`,
                                            startRU: e + 1,
                                            endRU: e + 1,
                                            type: "blank",
                                            ru: 1,
                                        });
                                    o.push({
                                        rackIndex: s,
                                        rackSize: a,
                                        layout: l,
                                        equipmentRU: t.ru,
                                        blanksRU: a - t.ru,
                                    }),
                                        (r = !0);
                                }
                            }
                        }),
                            o = Oe(o, c, me);
                        o.length > 1;

                    ) {
                        if (o[o.length - 1].layout.some((e) => "equipment" === e.type)) break;
                        o.pop();
                    }
                    if (
                        (((e) => {
                            for (const t of e)
                                for (const e of t.layout)
                                    if (
                                        "equipment" === e.type &&
                                        e.item &&
                                        e.item.pairItem &&
                                        e.item.type !== e.item.pairItem.type
                                    )
                                        return (
                                            console.error(
                                                "INVALID: Mixed mount types detected",
                                                e.item.type,
                                                e.item.pairItem.type
                                            ),
                                            !1
                                        );
                            return !0;
                        })(o) || console.error("ERROR: Mixed mount types detected in layout - this should not happen"),
                        p(Xe(Ge(o, me), Ee.current)),
                        g)
                    ) {
                        const e = g.layoutId;
                        if ("string" == typeof e && e.endsWith(":pair")) {
                            const t = e.slice(0, -5),
                                s = isNaN(t) ? t : Number(t),
                                a = o[g.rackIdx]?.layout.find((e) => e.id === s);
                            (a && a.item && a.item.pairItem) || b(null);
                        } else i.includes(e) && b(null);
                    }
                } else {
                    const e = ke(),
                        t = ze(e, c, me);
                    if ((p(Xe(Ge(t, me), h)), g))
                        if (t.some((e) => e.layout.some((e) => e.id === g.layoutId))) {
                            for (let e = 0; e < t.length; e++)
                                if (t[e].layout.find((e) => e.id === g.layoutId)) {
                                    e !== g.rackIdx && b({ rackIdx: e, layoutId: g.layoutId });
                                    break;
                                }
                        } else b(null);
                }
            } else p([]), b(null), (De.current = !1);
            u(!1);
        }
    }, [e, L]),
        useEffect(() => {
            if ("manual" !== L && c !== Re.current && e.length > 0)
                if (((Re.current = c), De.current && h.length > 0)) {
                    const e = Te(me, c);
                    let t = !1;
                    if (
                        (h.forEach((s) => {
                            let a = 0;
                            s.layout.forEach((e) => {
                                "equipment" === e.type && e.item && (a += e.item.ru || 1);
                            }),
                                a > e && (t = !0);
                        }),
                        t)
                    ) {
                        const e = ze(h, c, me);
                        p(Xe(Ge(e, me), h));
                    } else {
                        let e = Oe(h, c, me);
                        for (; e.length > 1; ) {
                            if (e[e.length - 1].layout.some((e) => "equipment" === e.type)) break;
                            e.pop();
                        }
                        p(Xe(Ge(e, me), h));
                    }
                    Ae(!1), u(!0);
                } else {
                    const e = ke(),
                        t = ze(e, c, me);
                    p(Xe(Ge(t, me), h)), Ae(!1), u(!1);
                }
        }, [c, e.length, L]),
        useEffect(() => {
            h.length > 0 && B >= h.length && T(Math.max(0, h.length - 1));
        }, [h.length, B]);
    const Je = () => {
            const n = parseInt(r) || 1;
            if (n < 1) return I("Equipment must be at least 1U");
            if (n > me) return I("Equipment cannot exceed 45U (max rack size)");
            if (
                (n > 20 && console.warn(`Adding large equipment: ${n}U - may require special mounting considerations`),
                "manual" === L)
            ) {
                if (0 === h.length) {
                    const r = Math.max(8, n),
                        d = $e(r, 0),
                        c = {
                            id: Date.now(),
                            name: s.trim() || `Equipment ${e.length + 1}`,
                            ru: n,
                            type: i,
                            width: o,
                            isHalfWidth: "half" === o,
                        };
                    t([...e, c]);
                    const m = {
                        id: `layout-${Date.now()}`,
                        type: "equipment",
                        item: { ...c, isHalfPair: !1, pairItem: null },
                        startRU: 1,
                        endRU: n,
                        ru: n,
                    };
                    d.layout.splice(0, n, m);
                    let x = 1;
                    return (
                        d.layout.forEach((e) => {
                            const t = "equipment" === e.type ? e.item?.ru || 1 : e.ru || 1;
                            (e.startRU = x), (e.endRU = x + t - 1), (x += t);
                        }),
                        p([d]),
                        T(0),
                        a(""),
                        void l("1")
                    );
                }
                const r = h[B];
                if (!r) return void I("Please add a rack first");
                const d = "half" === o;
                if (d) {
                    const d = qe(r, i, n);
                    if (d.canPlace && "pair" === d.method) {
                        const r = {
                            id: Date.now(),
                            name: s.trim() || `Equipment ${e.length + 1}`,
                            ru: n,
                            type: i,
                            width: o,
                            isHalfWidth: !0,
                        };
                        return (
                            t([...e, r]),
                            p((e) =>
                                e.map((e, t) => {
                                    if (t !== B) return e;
                                    const s = e.layout.map((e, t) =>
                                        t === d.layoutIdx && "equipment" === e.type && e.item
                                            ? {
                                                  ...e,
                                                  item: {
                                                      ...e.item,
                                                      isHalfPair: !0,
                                                      pairItem: { ...r, isHalfWidth: !0 },
                                                  },
                                              }
                                            : { ...e }
                                    );
                                    return { ...e, layout: s };
                                })
                            ),
                            a(""),
                            void l("1")
                        );
                    }
                    if (!d.canPlace)
                        return void I(
                            `Not enough space in Rack ${B + 1}. Need ${n}U of blanks, or an unpaired ${"rack" === i ? "rack-mounted" : "shelf-mounted"} half-width ${n}U item to pair with.`
                        );
                }
                let c = 0,
                    m = -1;
                for (let e = 0; e < r.layout.length; e++) {
                    if ("blank" === r.layout[e].type) {
                        if ((-1 === m && (m = e), c++, c >= n)) break;
                    } else (m = -1), (c = 0);
                }
                if (c < n)
                    return void I(
                        d
                            ? `Not enough space in Rack ${B + 1}. Need ${n}U of blanks, or an unpaired ${"rack" === i ? "rack-mounted" : "shelf-mounted"} half-width ${n}U item to pair with.`
                            : `Not enough space in Rack ${B + 1}. Need ${n}U of consecutive blanks.`
                    );
                const x = {
                    id: Date.now(),
                    name: s.trim() || `Equipment ${e.length + 1}`,
                    ru: n,
                    type: i,
                    width: o,
                    isHalfWidth: "half" === o,
                };
                return (
                    t([...e, x]),
                    p((e) => {
                        const t = [...e],
                            s = { ...t[B], layout: [...t[B].layout] },
                            a = s.layout[m].startRU,
                            r = {
                                id: `layout-${Date.now()}`,
                                type: "equipment",
                                item: { ...x, isHalfPair: !1, pairItem: null },
                                startRU: a,
                                endRU: a + n - 1,
                                ru: n,
                            };
                        s.layout.splice(m, n, r);
                        let l = 1;
                        return (
                            s.layout.forEach((e) => {
                                const t = "equipment" === e.type ? e.item?.ru || 1 : e.ru || 1;
                                (e.startRU = l), (e.endRU = l + t - 1), (l += t);
                            }),
                            (t[B] = s),
                            t
                        );
                    }),
                    a(""),
                    void l("1")
                );
            }
            const d = be + n;
            if (d > 337.5)
                return I(`Total equipment (${d}U) exceeds practical limit. Consider splitting into separate systems.`);
            t([...e, { id: Date.now(), name: s.trim() || `Equipment ${e.length + 1}`, ru: n, type: i, width: o }]),
                a(""),
                l("1"),
                u(!1);
        },
        Qe = (s) => {
            t(e.filter((e) => e.id !== s)), b(null), u(!1);
        },
        Ke = (s, a) => {
            a.trim() &&
                (t(e.map((e) => (e.id === s ? { ...e, name: a.trim() } : e))),
                p((e) =>
                    e.map((e) => ({
                        ...e,
                        layout: e.layout.map((e) =>
                            "equipment" === e.type && e.item && e.item.id === s
                                ? { ...e, item: { ...e.item, name: a.trim() } }
                                : "equipment" === e.type && e.item && e.item.pairItem && e.item.pairItem.id === s
                                  ? { ...e, item: { ...e.item, pairItem: { ...e.item.pairItem, name: a.trim() } } }
                                  : e
                        ),
                    }))
                ));
        },
        Ye = (s, a) => {
            const r = parseInt(a);
            if (isNaN(r) || r < 1 || r > me) return;
            let l = !1,
                i = 1,
                n = "rack",
                o = !1,
                d = null,
                c = -1;
            const m = e.find((e) => e.id === s);
            if (
                (m && ((i = m.ru || 1), (n = m.type || "rack"), (o = m.isHalfWidth || "half" === m.width)),
                h.forEach((e, t) => {
                    e.layout.forEach((e) => {
                        "equipment" === e.type &&
                            e.item &&
                            (e.item.id === s &&
                                ((c = t),
                                (n = e.item.type || "rack"),
                                (o = e.item.isHalfWidth || "half" === e.item.width),
                                e.item.pairItem && (d = e.item.pairItem.ru || 1)),
                            e.item.pairItem &&
                                e.item.pairItem.id === s &&
                                ((l = !0),
                                (c = t),
                                (i = e.item.pairItem.ru || 1),
                                (n = e.item.pairItem.type || "rack"),
                                (o = e.item.pairItem.isHalfWidth || "half" === e.item.pairItem.width),
                                (d = e.item.ru || 1)));
                    });
                }),
                "manual" === L && c >= 0)
            ) {
                const e = h[c];
                if (e && r > i) {
                    const t = r - i;
                    if (o) {
                        if (!qe(e, n, r, s).canPlace) {
                            let s = !1;
                            if ((d === r && (s = !0), !s)) {
                                if (e.layout.filter((e) => "blank" === e.type).length < t)
                                    return void I(
                                        `Cannot increase size: need ${t}U of blank space or a compatible unpaired ${"shelf" === n ? "shelf" : "rack"}-mounted ${r}U half-width item.`
                                    );
                            }
                        }
                    } else {
                        const s = e.layout.filter((e) => "blank" === e.type).length;
                        if (s < t)
                            return void I(`Cannot increase size: need ${t}U of blank space, only ${s}U available.`);
                    }
                }
            }
            l || t(e.map((e) => (e.id === s ? { ...e, ru: r } : e))),
                p((e) =>
                    e.map((e) => {
                        const t = [];
                        let a = !1,
                            l = null;
                        if (
                            (e.layout.forEach((e) => {
                                if ("equipment" === e.type && e.item)
                                    if (e.item.id === s) {
                                        a = !0;
                                        const s = e.item.isHalfWidth || "half" === e.item.width;
                                        e.item.pairItem && (e.item.pairItem.ru || 1) !== r
                                            ? (t.push({
                                                  ...e,
                                                  item: { ...e.item, ru: r, isHalfPair: !1, pairItem: null },
                                                  ru: r,
                                              }),
                                              (l = { ...e.item.pairItem, isHalfPair: !1, pairItem: null }))
                                            : (s && e.item.pairItem,
                                              t.push({ ...e, item: { ...e.item, ru: r }, ru: r }));
                                    } else
                                        e.item.pairItem && e.item.pairItem.id === s
                                            ? ((a = !0),
                                              (e.item.ru || 1) !== r
                                                  ? (t.push({
                                                        ...e,
                                                        item: { ...e.item, isHalfPair: !1, pairItem: null },
                                                    }),
                                                    (l = { ...e.item.pairItem, ru: r, isHalfPair: !1, pairItem: null }))
                                                  : t.push({
                                                        ...e,
                                                        item: { ...e.item, pairItem: { ...e.item.pairItem, ru: r } },
                                                    }))
                                            : t.push(e);
                                else t.push(e);
                            }),
                            a)
                        ) {
                            if (l) {
                                const e = l,
                                    a = e.ru || 1;
                                let r = !1;
                                if (e.isHalfWidth || "half" === e.width)
                                    for (let l = 0; l < t.length; l++) {
                                        const i = t[l];
                                        if ("equipment" === i.type && i.item) {
                                            const n = i.item,
                                                o = n.isHalfWidth || "half" === n.width,
                                                d = n.isHalfPair && n.pairItem;
                                            if (o && !d && n.type === e.type && (n.ru || 1) === a && n.id !== s) {
                                                (t[l] = {
                                                    ...i,
                                                    item: { ...n, isHalfPair: !0, pairItem: { ...e, isHalfWidth: !0 } },
                                                }),
                                                    (r = !0);
                                                break;
                                            }
                                        }
                                    }
                                if (!r) {
                                    let s = -1,
                                        r = 0;
                                    for (let e = 0; e < t.length; e++)
                                        if ("blank" === t[e].type) {
                                            if ((-1 === s && (s = e), r++, r >= a)) break;
                                        } else (s = -1), (r = 0);
                                    r >= a && s >= 0
                                        ? t.splice(s, a, {
                                              id: `layout-orphan-${Date.now()}`,
                                              type: "equipment",
                                              item: e,
                                              startRU: 0,
                                              endRU: 0,
                                              ru: a,
                                          })
                                        : t.push({
                                              id: `layout-orphan-${Date.now()}`,
                                              type: "equipment",
                                              item: e,
                                              startRU: 0,
                                              endRU: 0,
                                              ru: a,
                                          });
                                }
                            }
                            let a = -1;
                            for (let e = 0; e < t.length; e++) {
                                const r = t[e];
                                if ("equipment" === r.type && r.item && r.item.id === s) {
                                    a = e;
                                    break;
                                }
                            }
                            if (a >= 0) {
                                const e = t[a].item,
                                    s = e.isHalfWidth || "half" === e.width,
                                    l = e.isHalfPair && e.pairItem;
                                if (s && !l)
                                    for (let s = 0; s < t.length; s++) {
                                        if (s === a) continue;
                                        const l = t[s];
                                        if ("equipment" === l.type && l.item) {
                                            const i = l.item,
                                                n = i.isHalfWidth || "half" === i.width,
                                                o = i.isHalfPair && i.pairItem;
                                            if (n && !o && i.type === e.type && (i.ru || 1) === r) {
                                                (t[s] = {
                                                    ...l,
                                                    item: { ...i, isHalfPair: !0, pairItem: { ...e, isHalfWidth: !0 } },
                                                }),
                                                    t.splice(a, 1),
                                                    t.push({
                                                        id: `blank-freed-${Date.now()}`,
                                                        type: "blank",
                                                        ru: 1,
                                                        startRU: 0,
                                                        endRU: 0,
                                                    });
                                                break;
                                            }
                                        }
                                    }
                            }
                            if ("manual" === L) {
                                let s = 0;
                                t.forEach((e) => {
                                    s += "equipment" === e.type ? e.item?.ru || 1 : e.ru || 1;
                                });
                                const a = e.rackSize || 42;
                                if (s > a) {
                                    let e = s - a;
                                    for (let s = t.length - 1; s >= 0 && e > 0; s--)
                                        "blank" === t[s].type && (t.splice(s, 1), e--);
                                } else if (s < a) {
                                    const r = a - s;
                                    for (let s = 0; s < r; s++)
                                        t.push({
                                            id: `blank-${e.rackIndex}-${Date.now()}-${s}`,
                                            type: "blank",
                                            ru: 1,
                                            startRU: 0,
                                            endRU: 0,
                                        });
                                }
                            }
                            let i = 1;
                            t.forEach((e) => {
                                const t = "equipment" === e.type ? e.item?.ru || 1 : e.ru || 1;
                                (e.startRU = i), (e.endRU = i + t - 1), (i += t);
                            });
                        }
                        return { ...e, layout: t };
                    })
                ),
                u(!1);
        },
        Ze = (e) => {
            if (!g) return;
            const { rackIdx: t, layoutId: s } = g,
                a = h[t];
            if (!a) return;
            const { totalRU: r } = Ue(a.layout);
            if ("manual" === L) {
                const e = a.rackSize || r;
                if (r >= e) return void I(`Cannot add blank: Rack ${t + 1} is full (${e}U). Increase rack size first.`);
            } else {
                if (r >= me) return void I("Cannot add blank: rack is at maximum size (45U)");
                if (r + 1 > me) return void I("Cannot add blank: would exceed maximum rack size (45U)");
            }
            const l = h.map((e) => ({
                    ...e,
                    layout: e.layout.map((e) =>
                        "equipment" === e.type && e.item
                            ? { ...e, item: { ...e.item, pairItem: e.item.pairItem ? { ...e.item.pairItem } : null } }
                            : { ...e }
                    ),
                })),
                i = l[t];
            if (!i) return;
            const n = i.layout.findIndex((e) => e.id === s);
            if (n < 0) return;
            let o = 0;
            i.layout.forEach((e) => {
                "equipment" === e.type && e.item && (o += e.item.ru || 1);
            });
            let d = 0;
            i.layout.forEach((e) => {
                "blank" === e.type && d++;
            });
            const c = ("manual" === L && a.rackSize) || me;
            if (o + d + 1 > c) return void I(`Cannot add blank: would exceed rack size (${c}U)`);
            const m = {
                id: `blank-${t}-user-${Date.now()}`,
                type: "blank",
                startRU: 0,
                endRU: 0,
                ru: 1,
                isUserGap: !0,
            };
            "above" === e ? i.layout.splice(n + 1, 0, m) : i.layout.splice(n, 0, m);
            const x = Ue(i.layout).totalRU;
            if (x > me) {
                let e = x - me;
                for (let t = i.layout.length - 1; t >= 0 && e > 0; t--)
                    "blank" !== i.layout[t].type || i.layout[t].isUserGap || (i.layout.splice(t, 1), e--);
            }
            st(i), p(Ge(l, me)), u(!1), (De.current = !0);
        },
        et = (e) => {
            C(e.id), k(e.name);
        },
        tt = () => {
            w && M.trim() && Ke(w, M), C(null), k("");
        },
        st = (e) => {
            let t = 0,
                s = 0;
            e.layout.forEach((e) => {
                "equipment" === e.type && e.item ? (t += e.item.ru || 1) : "blank" === e.type && s++;
            });
            let a = t + s;
            for (; a > me && e.layout.length > 0; ) {
                if ("blank" !== e.layout[e.layout.length - 1].type) break;
                e.layout.pop(), s--, a--;
            }
            let r = 1;
            (t = 0),
                (s = 0),
                e.layout.forEach((e) => {
                    if ("equipment" === e.type && e.item) {
                        const s = e.item.ru || 1;
                        (e.startRU = r), (e.endRU = r + s - 1), (r += s), (t += s);
                    } else "blank" === e.type && ((e.startRU = r), (e.endRU = r), r++, s++);
                }),
                (e.rackSize = Math.min(t + s, me)),
                (e.equipmentRU = t),
                (e.blanksRU = s);
        },
        at = (e, t) => {
            b({ rackIdx: e, layoutId: t }), e !== B && T(e);
        },
        rt = (e, t) => {
            y({ rackIdx: e, item: t }), at(e, t.id);
        },
        lt = (e, t, s) => {
            e.preventDefault(), _({ rackIdx: t, ru: s });
        },
        it = (e, t, s) => {
            if ((e.preventDefault(), !f)) return;
            const a = h.map((e) => ({
                    ...e,
                    layout: e.layout.map((e) =>
                        "equipment" === e.type && e.item
                            ? { ...e, item: { ...e.item, pairItem: e.item.pairItem ? { ...e.item.pairItem } : null } }
                            : { ...e }
                    ),
                })),
                r = f.item && f.item.id;
            if ("string" == typeof r && r.endsWith(":pair")) {
                const e = r.slice(0, -5),
                    l = isNaN(e) ? e : Number(e),
                    i = a[f.rackIdx],
                    n = i.layout.findIndex((e) => e.id === l);
                if (n >= 0 && i.layout[n].item && i.layout[n].item.pairItem) {
                    const e = i.layout[n].item.pairItem,
                        r = e.ru || 1;
                    (i.layout[n].item.isHalfPair = !1), (i.layout[n].item.pairItem = null);
                    const l = {
                        id: e.id,
                        startRU: 0,
                        endRU: 0,
                        type: "equipment",
                        item: { ...e, isHalfWidth: !0, isHalfPair: !1, pairItem: null },
                    };
                    if (f.rackIdx === t) {
                        const e = Math.max(0, Math.min(s - 1, i.layout.length));
                        i.layout.splice(e, 0, l), st(i);
                    } else {
                        const n = a[t],
                            o = n.layout.filter((e) => "blank" === e.type).length;
                        if (o < r)
                            return (
                                I(`Cannot move "${e.name}" (${r}U) to Rack ${t + 1}. Only ${o}U available.`),
                                y(null),
                                void _(null)
                            );
                        let d = 0;
                        for (let e = n.layout.length - 1; e >= 0 && d < r; e--)
                            "blank" === n.layout[e].type && (n.layout.splice(e, 1), d++);
                        const c = Math.max(0, Math.min(s - 1, n.layout.length));
                        n.layout.splice(c, 0, l), st(i), st(n);
                    }
                    if ("manual" === L) p([...a]), y(null), _(null);
                    else {
                        const e = Oe(a, c, me);
                        p(Ge(e, me)), y(null), _(null), u(!1), (De.current = !0);
                    }
                    return void at(t, e.id);
                }
            }
            if (f.rackIdx === t) {
                const e = a[t],
                    r = e.layout.findIndex((e) => e.id === f.item.id),
                    l = Math.max(0, Math.min(s - 1, e.layout.length - 1));
                if (r !== l) {
                    const [t] = e.layout.splice(r, 1);
                    "blank" === t.type && (t.isUserGap = !0), e.layout.splice(l, 0, t), st(e);
                }
            } else {
                const e = a[f.rackIdx],
                    r = a[t],
                    l = f.item,
                    i = "equipment" === l.type ? l.item.ru : 1;
                if ("equipment" === l.type) {
                    const e = r.layout.filter((e) => "blank" === e.type).length;
                    if (e < i) {
                        const s = l.item?.name || "Item";
                        return (
                            I(`Cannot move "${s}" (${i}U) to Rack ${t + 1}. Only ${e}U available.`),
                            y(null),
                            void _(null)
                        );
                    }
                }
                const n = e.layout.findIndex((e) => e.id === l.id),
                    [o] = e.layout.splice(n, 1);
                if (("blank" === o.type && (o.isUserGap = !0), "equipment" === l.type)) {
                    for (let t = 0; t < i; t++)
                        e.layout.splice(n + t, 0, {
                            id: `blank-${f.rackIdx}-${Date.now()}-${t}`,
                            startRU: 0,
                            endRU: 0,
                            type: "blank",
                            ru: 1,
                        });
                    let t = 0;
                    for (let e = r.layout.length - 1; e >= 0 && t < i; e--)
                        "blank" === r.layout[e].type && (r.layout.splice(e, 1), t++);
                }
                const d = Math.max(0, Math.min(s - 1, r.layout.length));
                r.layout.splice(d, 0, o), st(e), st(r), at(t, o.id);
            }
            if ("manual" === L) p([...a]), y(null), _(null);
            else {
                const e = Oe(a, c, me);
                p(Ge(e, me)), y(null), _(null), u(!1), (De.current = !0);
            }
        },
        nt =
            e.length > 0
                ? (() => {
                      const t = [];
                      let s = 0,
                          a = 0;
                      h.forEach((e) => {
                          e.layout.forEach((e) => {
                              if ("equipment" === e.type && e.item) {
                                  const t = "shelf" === e.item.type,
                                      r = e.item.pairItem && "shelf" === e.item.pairItem.type,
                                      l = e.item.ru || 1;
                                  (t || r) && (s++, (a += l));
                              }
                          });
                      }),
                          s > 0 &&
                              t.push({
                                  type: "info",
                                  text: `üóÑÔ∏è ${s} shelf${s > 1 ? " slots" : ""} needed (${a}U total).`,
                              }),
                          ge.ruSaved > 0 &&
                              t.push({ type: "success", text: `‚úÖ Half-width pairing saves ${ge.ruSaved}U.` }),
                          ge.halfBlanksNeeded > 0 &&
                              t.push({
                                  type: "warning",
                                  text: `Need ${ge.halfBlanksNeeded}U half-rack filler panels.`,
                              }),
                          ge.hasHeavyEquipment &&
                              t.push({
                                  type: "info",
                                  text: "‚öñÔ∏è Heavy equipment (4U+) should be mounted at bottom for stability.",
                              });
                      const r = e.filter((e) => e.ru >= 10);
                      if (
                          (r.length > 0 &&
                              t.push({
                                  type: "warning",
                                  text: `üîß ${r.length} item(s) ‚â•10U - verify rail support and weight capacity.`,
                              }),
                          h.length > 1)
                      ) {
                          const e = h
                              .map((e, t) => {
                                  const { equipRU: s, blanksRU: a, totalRU: r } = Ue(e.layout);
                                  return {
                                      idx: t + 1,
                                      equipRU: s,
                                      blanksRU: a,
                                      rackSize: r,
                                      spare: r > 0 ? Math.round((a / r) * 100) : 0,
                                  };
                              })
                              .map((e) => `R${e.idx}: ${e.equipRU}/${e.rackSize}U (${e.spare}%)`)
                              .join(" ‚Ä¢ ");
                          t.push({ type: "info", text: `üì¶ ${e}` });
                      }
                      if (h.length > 0) {
                          const e = h.map((e, t) => {
                                  const { equipRU: s, blanksRU: a, totalRU: r } = Ue(e.layout),
                                      l = r > 0 ? Math.round((a / r) * 100) : 0;
                                  return {
                                      idx: t + 1,
                                      shortName:
                                          e.name && e.name.trim()
                                              ? e.name.trim().length > 8
                                                  ? e.name.trim().substring(0, 8) + "‚Ä¶"
                                                  : e.name.trim()
                                              : `R${t + 1}`,
                                      equipRU: s,
                                      blanksRU: a,
                                      rackSize: r,
                                      spare: l,
                                      meetsTarget: l >= c,
                                  };
                              }),
                              s = e.reduce((e, t) => e + t.blanksRU, 0);
                          t.push({ type: "info", text: `EIA-310: ${s}U blank panels for airflow management.` });
                          const a = e.every((e) => e.meetsTarget),
                              r = e.filter((e) => !e.meetsTarget);
                          if (a)
                              h.length > 1
                                  ? t.push({ type: "success", text: `‚úÖ All ${h.length} racks maintain ‚â•${c}% spare.` })
                                  : t.push({
                                        type: "success",
                                        text: `‚úÖ ${e[0]?.spare || 0}% spare capacity (target: ${c}%).`,
                                    });
                          else {
                              const e = r.map((e) => `${e.shortName}: ${e.spare}%`).join(", ");
                              t.push({ type: "warning", text: `‚ö†Ô∏è Below ${c}% target: ${e}. Consider adding racks.` });
                          }
                      }
                      h.length > 5 &&
                          t.push({
                              type: "warning",
                              text: `üìä ${h.length} racks - consider cable management and power distribution.`,
                          });
                      const l = Math.round(50 * be);
                      let i = 0,
                          n = 0;
                      h.forEach((e) => {
                          const t = Ue(e.layout);
                          (i += t.equipRU), (n += t.blanksRU);
                      });
                      const o = i + n,
                          d = o > 0 ? Math.round((n / o) * 100) : 0;
                      return (
                          be > 20 && t.push({ type: "info", text: `‚ö° Estimated power: ~${l}W. Verify PDU capacity.` }),
                          d >= c
                              ? t.push({ type: "success", text: `‚úÖ Overall: ${d}% spare (target: ${c}%).` })
                              : t.push({ type: "warning", text: `‚ö†Ô∏è Overall: ${d}% spare < ${c}% target.` }),
                          t
                      );
                  })()
                : [],
        ot = (() => {
            if (!g) return null;
            const e = h[g.rackIdx];
            if (!e) return null;
            const t = g.layoutId;
            if ("string" == typeof t && t.endsWith(":pair")) {
                const s = t.slice(0, -5),
                    a = isNaN(s) ? s : Number(s),
                    r = e.layout.find((e) => e.id === a);
                if (r && r.item && r.item.pairItem)
                    return {
                        id: t,
                        type: "equipment",
                        item: r.item.pairItem,
                        startRU: r.startRU,
                        endRU: r.endRU,
                        isPairItem: !0,
                        mainEntryId: a,
                    };
            }
            return e.layout.find((e) => e.id === t) || null;
        })(),
        dt = (e, t, s) => {
            const { layout: a } = e,
                { equipRU: r, blanksRU: l, totalRU: i } = Ue(a),
                n = i,
                o = r,
                d = l,
                m = n > 0 ? Math.round((o / n) * 100) : 0,
                x = n > 0 ? Math.round((d / n) * 100) : 0,
                u = g?.rackIdx === t,
                f = h.length > 1,
                y = a.some((e) => "equipment" === e.type),
                rackDisplayName = We(e, t);
            return _jsxs("div", {
                key: t,
                className: "flex-shrink-0 flex flex-col " + (f ? "w-56" : "flex-1 max-w-md"),
                style: { alignSelf: "flex-end" },
                children: [
                    _jsxs("div", {
                        className:
                            "mb-2 p-2 rounded-lg transition-all cursor-pointer " +
                            (u
                                ? "bg-yellow-100 border-2 border-yellow-400 shadow-md dark:shadow-gray-950/20"
                                : B === t
                                  ? "bg-blue-50 dark:bg-blue-900/20 border-2 border-blue-300"
                                  : "bg-gray-100 dark:bg-gray-700 border-2 border-transparent hover:bg-gray-200 dark:bg-gray-700"),
                        onClick: () => {
                            T(t), e.layout && e.layout.length > 0 && b({ rackIdx: t, layoutId: e.layout[0].id });
                        },
                        children: [
                            _jsxs("div", {
                                className: "flex flex-col gap-1",
                                children: [
                                    _jsxs("div", {
                                        className: "flex items-center justify-between gap-1",
                                        children: [
                                            _jsx("div", {
                                                className: "rack-name-container flex-1 min-w-0 overflow-hidden",
                                                children: _jsx("input", {
                                                    type: "text",
                                                    value: e.name || "",
                                                    placeholder: f ? `Rack ${t + 1}` : "Rack",
                                                    onChange: (ev) => {
                                                        ev.stopPropagation();
                                                        const idx = t;
                                                        const val = ev.target.value;
                                                        p((racks) => racks.map((r, i) => (i === idx ? { ...r, name: val } : r)));
                                                    },
                                                    onClick: (ev) => ev.stopPropagation(),
                                                    onFocus: (ev) => {
                                                        ev.target.select();
                                                        ev.target.style.animation = 'none';
                                                    },
                                                    onBlur: (ev) => {
                                                        if (e.name && e.name.length > 15) {
                                                            ev.target.style.animation = '';
                                                        }
                                                    },
                                                    className:
                                                        "font-semibold text-sm bg-transparent border-none outline-none w-full placeholder-gray-700 focus:bg-white dark:bg-gray-800 focus:ring-1 focus:ring-blue-400 focus:rounded px-1 " +
                                                        (e.name && e.name.length > 15 ? "rack-name-marquee" : ""),
                                                    style: e.name && e.name.length > 15 ? { width: 'max-content', minWidth: '100%' } : {},
                                                    title: e.name ? e.name : "Click to edit rack name",
                                                }),
                                            }),
                                            _jsxs("div", {
                                                className: "flex items-center gap-1 flex-shrink-0",
                                                children: [
                                                    _jsx("span", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400 whitespace-nowrap",
                                                        children: `(${n}U)`,
                                                    }),
                                                    B === t &&
                                                        f &&
                                                        _jsx("span", {
                                                            className:
                                                                "text-xs bg-blue-50 dark:bg-blue-900/200 text-white px-1 py-0.5 rounded whitespace-nowrap",
                                                            children: "Target",
                                                        }),
                                                    _jsxs("span", {
                                                        className:
                                                            "text-xs px-1.5 py-0.5 rounded font-medium whitespace-nowrap " +
                                                            (m <= 75
                                                                ? "bg-green-100 text-green-700"
                                                                : m <= 85
                                                                  ? "bg-yellow-100 text-yellow-700"
                                                                  : "bg-red-100 text-red-700"),
                                                        children: [m, "%"],
                                                    }),
                                                    "manual" === L &&
                                                        h.length > 1 &&
                                                        _jsx("button", {
                                                            onClick: (e) => {
                                                                e.stopPropagation(), te({ index: t, hasEquipment: y }), Z(!0);
                                                            },
                                                            className:
                                                                "text-red-500 hover:text-red-700 hover:bg-red-50 dark:bg-red-900/20 rounded p-0.5 transition-colors flex-shrink-0",
                                                            title: "Delete Rack",
                                                            children: _jsx("svg", {
                                                                className: "w-4 h-4",
                                                                fill: "none",
                                                                viewBox: "0 0 24 24",
                                                                stroke: "currentColor",
                                                                strokeWidth: 2,
                                                                children: _jsx("path", {
                                                                    strokeLinecap: "round",
                                                                    strokeLinejoin: "round",
                                                                    d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",
                                                                }),
                                                            }),
                                                        }),
                                                ],
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "flex items-center justify-between mt-1 text-xs text-gray-500 dark:text-gray-400",
                                children: [
                                    _jsxs("span", { className: "whitespace-nowrap", children: [o, "U equip"] }),
                                    _jsxs("span", {
                                        className: "whitespace-nowrap",
                                        children: [d, "U spare (", x, "%)"],
                                    }),
                                ],
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "flex gap-1",
                        children: [
                            _jsx("div", {
                                className: "flex flex-col-reverse text-xs text-gray-400 w-6 pt-1 pb-1",
                                children: Array.from({ length: n }, (e, t) => t + 1).map((e, t) =>
                                    _jsx(
                                        "div",
                                        {
                                            className: "flex items-center justify-end pr-1",
                                            style: { height: "22px", marginTop: t < n - 1 ? "1px" : "0" },
                                            children: e,
                                        },
                                        e
                                    )
                                ),
                            }),
                            _jsx("div", {
                                className:
                                    "flex-1 bg-gray-900 rounded-lg p-1 border-2 transition-all " +
                                    (u ? "border-yellow-400 shadow-lg dark:shadow-gray-950/30 shadow-yellow-200/50" : "border-gray-700"),
                                style: { minHeight: 22 * n + (n - 1) + 8 + "px" },
                                onDragOver: (e) => lt(e, t, 1),
                                onDrop: (e) => it(e, t, 1),
                                children: _jsx("div", {
                                    className: "flex flex-col-reverse gap-px",
                                    children: a.map((e) => {
                                        const s = g?.rackIdx === t && g?.layoutId === e.id,
                                            a = j?.rackIdx === t && e.startRU <= j.ru && j.ru <= e.endRU;
                                        if ("equipment" === e.type) {
                                            const r = e.item,
                                                l = ue(r),
                                                i = 22 * r.ru + (r.ru - 1),
                                                n = g?.layoutId === `${e.id}:pair`;
                                            return r.isHalfWidth
                                                ? _jsxs(
                                                      "div",
                                                      {
                                                          key: e.id,
                                                          className: "flex gap-px",
                                                          style: { height: `${i}px` },
                                                          onDragOver: (s) => lt(s, t, e.startRU),
                                                          onDrop: (s) => it(s, t, e.startRU),
                                                          children: [
                                                              _jsxs("div", {
                                                                  className: `flex-1 ${l.bg} ${l.border} ${l.text} border rounded flex items-center justify-center px-1 cursor-grab ${s ? "ring-2 ring-yellow-400" : ""} ${a ? "ring-2 ring-purple-400" : ""}`,
                                                                  draggable: !0,
                                                                  onDragStart: () => rt(t, e),
                                                                  onClick: (s) => {
                                                                      s.stopPropagation(), at(t, e.id);
                                                                  },
                                                                  children: [
                                                                      _jsx("span", {
                                                                          className: "text-xs truncate",
                                                                          children: r.name,
                                                                      }),
                                                                      _jsxs("span", {
                                                                          className: "text-xs ml-1 opacity-75",
                                                                          children: [r.ru, "U"],
                                                                      }),
                                                                  ],
                                                              }),
                                                              r.isHalfPair && r.pairItem
                                                                  ? (() => {
                                                                        const s = ue(r.pairItem);
                                                                        return _jsxs("div", {
                                                                            className: `flex-1 ${s.bg} ${s.border} ${s.text} border rounded flex items-center justify-center px-1 cursor-grab ${n ? "ring-2 ring-yellow-400" : ""}`,
                                                                            draggable: !0,
                                                                            onDragStart: () => {
                                                                                const s = {
                                                                                    id: `${e.id}:pair`,
                                                                                    type: "equipment",
                                                                                    item: r.pairItem,
                                                                                    startRU: e.startRU,
                                                                                    endRU: e.endRU,
                                                                                };
                                                                                rt(t, s);
                                                                            },
                                                                            onClick: (s) => {
                                                                                s.stopPropagation(),
                                                                                    at(t, `${e.id}:pair`);
                                                                            },
                                                                            children: [
                                                                                _jsx("span", {
                                                                                    className: "text-xs truncate",
                                                                                    children: r.pairItem.name,
                                                                                }),
                                                                                _jsxs("span", {
                                                                                    className:
                                                                                        "text-xs ml-1 opacity-75",
                                                                                    children: [r.pairItem.ru, "U"],
                                                                                }),
                                                                            ],
                                                                        });
                                                                    })()
                                                                  : _jsx("div", {
                                                                        className:
                                                                            "flex-1 bg-gray-600 border border-dashed border-gray-500 rounded flex items-center justify-center",
                                                                        children: _jsx("span", {
                                                                            className: "text-gray-400 text-xs",
                                                                            children: "¬Ω‚ñ≠",
                                                                        }),
                                                                    }),
                                                          ],
                                                      },
                                                      e.id
                                                  )
                                                : _jsxs("div", {
                                                      key: e.id,
                                                      draggable: !0,
                                                      onDragStart: () => rt(t, e),
                                                      onDragOver: (s) => lt(s, t, e.startRU),
                                                      onDrop: (s) => it(s, t, e.startRU),
                                                      onClick: () => at(t, e.id),
                                                      className: `${l.bg} ${l.border} ${l.text} border rounded flex items-center justify-between px-2 cursor-grab ${s ? "ring-2 ring-yellow-400" : ""} ${a ? "ring-2 ring-purple-400" : ""}`,
                                                      style: { height: `${i}px`, minHeight: "20px" },
                                                      children: [
                                                          _jsxs("div", {
                                                              className: "flex items-center gap-1 overflow-hidden",
                                                              children: [
                                                                  _jsx("span", {
                                                                      className: "text-xs opacity-75",
                                                                      children: "shelf" === r.type ? "üì¶" : "üîß",
                                                                  }),
                                                                  _jsx("span", {
                                                                      className: "text-xs font-medium truncate",
                                                                      children: r.name,
                                                                  }),
                                                              ],
                                                          }),
                                                          _jsxs("span", {
                                                              className: "text-xs font-bold",
                                                              children: [r.ru, "U"],
                                                          }),
                                                      ],
                                                  });
                                        }
                                        return _jsx("div", {
                                            key: e.id,
                                            draggable: !0,
                                            onDragStart: () => rt(t, e),
                                            onDragOver: (s) => lt(s, t, e.startRU),
                                            onDrop: (s) => it(s, t, e.startRU),
                                            onClick: () => at(t, e.id),
                                            className: `bg-gray-700 border border-dashed border-gray-500 rounded flex items-center justify-center cursor-grab ${s ? "ring-2 ring-yellow-400" : ""} ${a ? "ring-2 ring-purple-400" : ""}`,
                                            style: { height: "22px" },
                                            children: _jsx("span", {
                                                className: "text-gray-400 text-xs",
                                                children: "‚ñ≠ 1U",
                                            }),
                                        });
                                    }),
                                }),
                            }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "mt-2 flex flex-col items-center gap-1 text-xs",
                        children: [
                            _jsxs("div", {
                                className: "flex gap-3",
                                children: [
                                    _jsxs("span", { className: "text-blue-600", children: ["‚ö°", o, "U"] }),
                                    _jsxs("span", { className: "text-gray-500 dark:text-gray-400", children: ["‚ñ≠", d, "U"] }),
                                ],
                            }),
                            _jsx("div", {
                                className:
                                    "px-2 py-0.5 rounded " +
                                    (n > 0 && Math.round((d / n) * 100) >= c
                                        ? "bg-green-100 text-green-700"
                                        : "bg-yellow-100 text-yellow-700"),
                                children: `${n > 0 ? Math.round((d / n) * 100) : 0}% spare`,
                            }),
                        ],
                    }),
                ],
            });
        };
    return _jsxs("div", {
        className: "max-w-7xl mx-auto px-2 sm:px-4 py-4 sm:py-6",
        children: [
            _jsx("h1", {
                className: "text-xl sm:text-2xl font-bold text-gray-900 dark:text-gray-100 mb-4",
                children: "Professional Rack Builder",
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 border shadow-sm dark:shadow-gray-950/10",
                children: [
                    _jsxs("div", {
                        className: "flex flex-col sm:flex-row sm:items-center gap-4",
                        children: [
                            _jsxs("div", {
                                className: "flex-1",
                                children: [
                                    _jsxs("div", {
                                        className: "flex items-center gap-2 mb-1",
                                        children: [
                                            _jsx("span", {
                                                className: "text-lg",
                                                children: "auto" === L ? "‚ö°" : "üîß",
                                            }),
                                            _jsx("h2", {
                                                className: "font-semibold text-gray-800 text-base",
                                                children: "Design Mode",
                                            }),
                                            _jsx("span", {
                                                className:
                                                    "text-xs px-2 py-0.5 rounded-full font-medium " +
                                                    ("auto" === L
                                                        ? "bg-blue-100 text-blue-700"
                                                        : "bg-indigo-100 text-indigo-700"),
                                                children: "auto" === L ? "Automatic" : "Manual",
                                            }),
                                        ],
                                    }),
                                    _jsx("p", {
                                        className: "text-xs text-gray-500 dark:text-gray-400 leading-relaxed",
                                        children:
                                            "auto" === L
                                                ? "Equipment is automatically distributed across racks based on spare capacity target."
                                                : "Full control over rack sizes, equipment placement, and arrangement. No auto-optimization.",
                                    }),
                                ],
                            }),
                            _jsx("div", {
                                className: "flex-shrink-0",
                                children: _jsxs("div", {
                                    className: "inline-flex rounded-lg p-1 bg-gray-100 dark:bg-gray-700",
                                    children: [
                                        _jsxs("button", {
                                            onClick: () => H("auto"),
                                            className:
                                                "flex items-center gap-1.5 px-4 py-2 rounded-md text-sm font-medium transition-all " +
                                                ("auto" === L
                                                    ? "bg-white dark:bg-gray-800 text-blue-700 shadow-sm dark:shadow-gray-950/10"
                                                    : "text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:text-gray-300"),
                                            children: [
                                                _jsx("span", { children: "‚ö°" }),
                                                _jsx("span", { children: "Automatic" }),
                                            ],
                                        }),
                                        _jsxs("button", {
                                            onClick: () => {
                                                H("manual"), 0 === e.length && p([]);
                                            },
                                            className:
                                                "flex items-center gap-1.5 px-4 py-2 rounded-md text-sm font-medium transition-all " +
                                                ("manual" === L
                                                    ? "bg-white dark:bg-gray-800 text-indigo-700 shadow-sm dark:shadow-gray-950/10"
                                                    : "text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:text-gray-300"),
                                            children: [
                                                _jsx("span", { children: "üîß" }),
                                                _jsx("span", { children: "Manual" }),
                                            ],
                                        }),
                                    ],
                                }),
                            }),
                        ],
                    }),
                    _jsx("div", {
                        className: "mt-3 pt-3 border-t border-gray-100",
                        children: _jsxs("div", {
                            className: "flex flex-wrap gap-x-4 gap-y-1 text-xs text-gray-500 dark:text-gray-400",
                            children:
                                "auto" === L
                                    ? [
                                          _jsxs("span", {
                                              key: "f1",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-green-500", children: "‚úì" }),
                                                  "Auto rack sizing",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f2",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-green-500", children: "‚úì" }),
                                                  "Spare capacity optimization",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f3",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-green-500", children: "‚úì" }),
                                                  "Equipment redistribution",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f4",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-green-500", children: "‚úì" }),
                                                  "Automatic racks addition",
                                              ],
                                          }),
                                      ]
                                    : [
                                          _jsxs("span", {
                                              key: "f1",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-indigo-500", children: "‚úì" }),
                                                  "Custom rack sizes",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f2",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-indigo-500", children: "‚úì" }),
                                                  "Manual placement",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f3",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-indigo-500", children: "‚úì" }),
                                                  "Manual arrange",
                                              ],
                                          }),
                                          _jsxs("span", {
                                              key: "f4",
                                              className: "flex items-center gap-1",
                                              children: [
                                                  _jsx("span", { className: "text-indigo-500", children: "‚úì" }),
                                                  "Fixed rack layout",
                                              ],
                                          }),
                                      ],
                        }),
                    }),
                ],
            }),
            D &&
                _jsxs("div", {
                    key: E,
                    className:
                        "fixed top-4 left-4 right-4 sm:left-auto sm:right-4 sm:max-w-md z-50 bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-3 rounded-xl shadow-2xl border border-red-400/30",
                    children: [
                        _jsxs("div", {
                            className: "flex items-start gap-3",
                            children: [
                                _jsx("div", {
                                    className:
                                        "flex-shrink-0 w-8 h-8 bg-white dark:bg-gray-800/20 rounded-full flex items-center justify-center",
                                    children: _jsx("span", { className: "text-lg", children: "‚ö†Ô∏è" }),
                                }),
                                _jsxs("div", {
                                    className: "flex-1 min-w-0",
                                    children: [
                                        _jsx("div", {
                                            className: "font-semibold text-sm text-white/90 mb-0.5",
                                            children: "Action Required",
                                        }),
                                        _jsx("div", { className: "text-sm text-white/95 leading-snug", children: D }),
                                    ],
                                }),
                                _jsx("button", {
                                    onClick: () => I(null),
                                    className:
                                        "flex-shrink-0 w-6 h-6 flex items-center justify-center rounded-full bg-white dark:bg-gray-800/10 hover:bg-white dark:bg-gray-800/20 text-white/80 hover:text-white transition-colors",
                                    children: "√ó",
                                }),
                            ],
                        }),
                        _jsx("div", {
                            className: "mt-2 h-1 bg-white dark:bg-gray-800/20 rounded-full overflow-hidden",
                            children: _jsx("div", {
                                className: "h-full bg-white dark:bg-gray-800/60 rounded-full",
                                style: { animation: "shrink 4s linear forwards", width: "100%" },
                            }),
                        }),
                    ],
                }),
            _jsxs("div", {
                className: "bg-purple-50 dark:bg-purple-900/20 rounded-xl p-3 sm:p-4 mb-4 sm:mb-6 border border-purple-200 dark:border-purple-800",
                children: [
                    _jsx("h2", {
                        className: "font-semibold text-purple-800 dark:text-purple-200 mb-2 text-sm sm:text-base",
                        children: "AVIXA/EIA-310-E Compliant Design",
                    }),
                    _jsxs("div", {
                        className: "grid grid-cols-5 gap-1 sm:gap-2 text-xs",
                        children: [
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-1.5 sm:p-2 rounded border text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-purple-700", children: "1U" }),
                                    _jsx("div", {
                                        className: "text-purple-600 text-[10px] sm:text-xs",
                                        children: "44.45mm",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-1.5 sm:p-2 rounded border text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-purple-700", children: '19"' }),
                                    _jsx("div", {
                                        className: "text-purple-600 text-[10px] sm:text-xs",
                                        children: "Full",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-1.5 sm:p-2 rounded border text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-purple-700", children: '9.5"' }),
                                    _jsx("div", {
                                        className: "text-purple-600 text-[10px] sm:text-xs",
                                        children: "Half",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-1.5 sm:p-2 rounded border text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-purple-700", children: "45U" }),
                                    _jsx("div", {
                                        className: "text-purple-600 text-[10px] sm:text-xs",
                                        children: "Max",
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 p-1.5 sm:p-2 rounded border text-center",
                                children: [
                                    _jsx("div", { className: "font-bold text-purple-700", children: `${c}%` }),
                                    _jsx("div", {
                                        className: "text-purple-600 text-[10px] sm:text-xs",
                                        children: "Target",
                                    }),
                                ],
                            }),
                        ],
                    }),
                ],
            }),
            _jsxs("div", {
                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 mb-4 sm:mb-6 border",
                children: [
                    _jsxs("div", {
                        className: "flex items-center justify-between mb-2",
                        children: [
                            _jsx("h3", {
                                className: "font-semibold text-gray-800 text-sm",
                                children: "üé® Color Legend",
                            }),
                            _jsx("span", {
                                className: "text-xs text-gray-500 dark:text-gray-300",
                                children: "Equipment is color-coded by type, width & size",
                            }),
                        ],
                    }),
                    _jsx("div", {
                        className: "grid grid-cols-1 sm:grid-cols-2 gap-3",
                        children: [
                            {
                                category: "Rack-Mounted",
                                items: [
                                    {
                                        bg: "bg-blue-600",
                                        border: "border-blue-700",
                                        label: "Full 1-2U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-indigo-600",
                                        border: "border-indigo-700",
                                        label: "Full 3-4U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-violet-600",
                                        border: "border-violet-700",
                                        label: "Full 5+U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-blue-400",
                                        border: "border-blue-500 border-dashed",
                                        label: "Half 1-2U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-indigo-400",
                                        border: "border-indigo-500 border-dashed",
                                        label: "Half 3-4U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-violet-400",
                                        border: "border-violet-500 border-dashed",
                                        label: "Half 5+U",
                                        text: "text-white",
                                    },
                                ],
                            },
                            {
                                category: "Shelf-Mounted",
                                items: [
                                    {
                                        bg: "bg-emerald-600",
                                        border: "border-emerald-700",
                                        label: "Full 1-2U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-teal-600",
                                        border: "border-teal-700",
                                        label: "Full 3-4U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-cyan-600",
                                        border: "border-cyan-700",
                                        label: "Full 5+U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-emerald-400",
                                        border: "border-emerald-500 border-dashed",
                                        label: "Half 1-2U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-teal-400",
                                        border: "border-teal-500 border-dashed",
                                        label: "Half 3-4U",
                                        text: "text-white",
                                    },
                                    {
                                        bg: "bg-cyan-400",
                                        border: "border-cyan-500 border-dashed",
                                        label: "Half 5+U",
                                        text: "text-white",
                                    },
                                ],
                            },
                        ].map((e, t) =>
                            _jsxs("div", {
                                key: t,
                                className: "bg-gray-50 dark:bg-gray-900/50 rounded-lg p-2",
                                children: [
                                    _jsxs("div", {
                                        className: "text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5 flex items-center gap-1",
                                        children: [
                                            _jsx("span", { children: "Rack-Mounted" === e.category ? "üîß" : "üì¶" }),
                                            _jsx("span", { children: e.category }),
                                        ],
                                    }),
                                    _jsx("div", {
                                        className: "grid grid-cols-3 gap-1",
                                        children: e.items.map((e, t) =>
                                            _jsx("div", {
                                                key: t,
                                                className: `${e.bg} ${e.border} ${e.text} border rounded px-1.5 py-1 text-center`,
                                                children: _jsx("div", {
                                                    className: "text-[10px] font-medium truncate",
                                                    children: e.label,
                                                }),
                                            })
                                        ),
                                    }),
                                ],
                            })
                        ),
                    }),
                ],
            }),
            _jsxs("div", {
                className: "grid grid-cols-1 lg:grid-cols-3 gap-4 sm:gap-6",
                children: [
                    _jsxs("div", {
                        className: "space-y-4",
                        children: [
                            _jsxs("div", {
                                className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 border",
                                children: [
                                    _jsx("h2", {
                                        className: "text-base sm:text-lg font-semibold mb-3",
                                        children: "Add Equipment",
                                    }),
                                    _jsxs("div", {
                                        className: "space-y-3",
                                        children: [
                                            _jsxs("div", {
                                                children: [
                                                    _jsx("label", {
                                                        className: "block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",
                                                        children: "Equipment Name",
                                                    }),
                                                    _jsx("input", {
                                                        type: "text",
                                                        value: s,
                                                        onChange: (e) => a(e.target.value),
                                                        onKeyPress: (e) => "Enter" === e.key && Je(),
                                                        placeholder: "e.g. Server, Switch, UPS...",
                                                        className: "w-full px-3 py-2.5 border rounded-lg text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "grid grid-cols-3 gap-2",
                                                children: [
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className:
                                                                    "block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Rack Units",
                                                            }),
                                                            _jsx("input", {
                                                                type: "number",
                                                                min: "1",
                                                                max: me,
                                                                value: r,
                                                                onChange: (e) =>
                                                                    l(
                                                                        "" === e.target.value
                                                                            ? ""
                                                                            : String(
                                                                                  Math.min(
                                                                                      me,
                                                                                      Math.max(
                                                                                          1,
                                                                                          parseInt(e.target.value) || 1
                                                                                      )
                                                                                  )
                                                                              )
                                                                    ),
                                                                placeholder: "RU",
                                                                className:
                                                                    "w-full px-2 py-2.5 border rounded-lg text-sm dark:bg-gray-700 dark:text-white dark:border-gray-600",
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className:
                                                                    "block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Mount Type",
                                                            }),
                                                            _jsxs("select", {
                                                                value: i,
                                                                onChange: (e) => n(e.target.value),
                                                                className:
                                                                    "w-full px-2 py-2.5 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600",
                                                                children: [
                                                                    _jsx("option", { value: "rack", children: "Rack" }),
                                                                    _jsx("option", {
                                                                        value: "shelf",
                                                                        children: "Shelf",
                                                                    }),
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            _jsx("label", {
                                                                className:
                                                                    "block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",
                                                                children: "Width",
                                                            }),
                                                            _jsxs("select", {
                                                                value: o,
                                                                onChange: (e) => d(e.target.value),
                                                                className:
                                                                    "w-full px-2 py-2.5 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600",
                                                                children: [
                                                                    _jsx("option", {
                                                                        value: "full",
                                                                        children: 'Full (19")',
                                                                    }),
                                                                    _jsx("option", {
                                                                        value: "half",
                                                                        children: 'Half (9.5")',
                                                                    }),
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            _jsxs("div", {
                                                className: "mb-3",
                                                children: [
                                                    _jsx("label", {
                                                        className: "block text-xs font-medium text-gray-600 dark:text-gray-300 mb-1",
                                                        children:
                                                            h.length > 1 ? "Target Rack for New Items" : "Current Rack",
                                                    }),
                                                    _jsx("select", {
                                                        value: B,
                                                        onChange: (e) => {
                                                            const t = parseInt(e.target.value) || 0;
                                                            if ((T(t), h[t] && h[t].layout.length > 0)) {
                                                                const e = h[t].layout[0];
                                                                e && b({ rackIdx: t, layoutId: e.id });
                                                            } else b(null);
                                                        },
                                                        disabled: h.length <= 1,
                                                        className:
                                                            "w-full px-2 py-2 border rounded-lg text-sm bg-white dark:bg-gray-800 dark:text-white dark:border-gray-600" +
                                                            (h.length <= 1 ? " bg-gray-50 dark:bg-gray-900/50 text-gray-500 dark:text-gray-400" : "") +
                                                            (g?.rackIdx === B ? " ring-2 ring-purple-300" : ""),
                                                        children: h.map((e, t) => {
                                                            const {
                                                                equipRU: s,
                                                                blanksRU: a,
                                                                totalRU: r,
                                                            } = Ue(e.layout);
                                                            let l = 0;
                                                            for (
                                                                let t = e.layout.length - 1;
                                                                t >= 0 && "blank" === e.layout[t].type;
                                                                t--
                                                            )
                                                                l++;
                                                            const i = r > 0 ? Math.round((a / r) * 100) : 0,
                                                                n = B === t,
                                                                o = 0 === l,
                                                                d = We(e, t);
                                                            return _jsx(
                                                                "option",
                                                                {
                                                                    value: t,
                                                                    children: `${n ? "‚óè " : ""}${d}${o ? " (Full)" : ` (${l}U avail, ${i}%)`}`,
                                                                },
                                                                t
                                                            );
                                                        }),
                                                    }),
                                                    _jsx("p", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400 mt-1",
                                                        children:
                                                            (h.length,
                                                            "Choose Target rack where new equipment will be added."),
                                                    }),
                                                ],
                                            }),
                                            _jsx("button", {
                                                onClick: Je,
                                                className:
                                                    "w-full py-2.5 rounded-lg font-semibold bg-purple-600 hover:bg-purple-700 text-white text-sm sm:text-base transition-colors",
                                                children: "+ Add Equipment",
                                            }),
                                            e.length > 0 &&
                                                _jsxs("div", {
                                                    className: "flex gap-2 mt-2",
                                                    children: [
                                                        _jsx("button", {
                                                            onClick: () => pe(!0),
                                                            className:
                                                                "flex-1 py-2 rounded-lg font-medium bg-red-600 hover:bg-red-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                                                            children: "‚ü≤ Reset",
                                                        }),
                                                        _jsx("button", {
                                                            onClick: async () => {
                                                                const t = h,
                                                                    s = e;
                                                                if (0 === t.length)
                                                                    return void I(
                                                                        "Add a rack and equipment before exporting."
                                                                    );
                                                                let a = !1;
                                                                if (
                                                                    (t.forEach((e) => {
                                                                        e.layout.some((e) => "equipment" === e.type) &&
                                                                            (a = !0);
                                                                    }),
                                                                    a)
                                                                )
                                                                    try {
                                                                        window.jspdf ||
                                                                            (await new Promise((e, t) => {
                                                                                const s =
                                                                                    document.createElement("script");
                                                                                (s.src =
                                                                                    "https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"),
                                                                                    (s.onload = e),
                                                                                    (s.onerror = t),
                                                                                    document.head.appendChild(s);
                                                                            }));
                                                                        const { jsPDF: a } = window.jspdf,
                                                                            r = new a({
                                                                                orientation: "landscape",
                                                                                unit: "mm",
                                                                                format: [609.6, 914.4],
                                                                            }),
                                                                            l = r.internal.pageSize.getWidth(),
                                                                            i = r.internal.pageSize.getHeight(),
                                                                            n = 25,
                                                                            o = [37, 99, 235],
                                                                            d = [17, 24, 39],
                                                                            m = [107, 114, 128],
                                                                            x = [55, 65, 81],
                                                                            u = (e) => {
                                                                                if (!e)
                                                                                    return {
                                                                                        fill: [100, 100, 100],
                                                                                        border: [80, 80, 80],
                                                                                    };
                                                                                const t = "rack" === e.type,
                                                                                    s =
                                                                                        e.isHalfWidth ||
                                                                                        "half" === e.width,
                                                                                    a = e.ru || 1,
                                                                                    r = a <= 2 ? 0 : a <= 4 ? 1 : 2;
                                                                                if (t) {
                                                                                    return s
                                                                                        ? [
                                                                                              {
                                                                                                  fill: [96, 165, 250],
                                                                                                  border: [
                                                                                                      59, 130, 246,
                                                                                                  ],
                                                                                              },
                                                                                              {
                                                                                                  fill: [129, 140, 248],
                                                                                                  border: [
                                                                                                      99, 102, 241,
                                                                                                  ],
                                                                                              },
                                                                                              {
                                                                                                  fill: [167, 139, 250],
                                                                                                  border: [
                                                                                                      139, 92, 246,
                                                                                                  ],
                                                                                              },
                                                                                          ][r]
                                                                                        : [
                                                                                              {
                                                                                                  fill: [37, 99, 235],
                                                                                                  border: [29, 78, 216],
                                                                                              },
                                                                                              {
                                                                                                  fill: [79, 70, 229],
                                                                                                  border: [67, 56, 202],
                                                                                              },
                                                                                              {
                                                                                                  fill: [124, 58, 237],
                                                                                                  border: [
                                                                                                      109, 40, 217,
                                                                                                  ],
                                                                                              },
                                                                                          ][r];
                                                                                }
                                                                                return s
                                                                                    ? [
                                                                                          {
                                                                                              fill: [52, 211, 153],
                                                                                              border: [16, 185, 129],
                                                                                          },
                                                                                          {
                                                                                              fill: [45, 212, 191],
                                                                                              border: [20, 184, 166],
                                                                                          },
                                                                                          {
                                                                                              fill: [34, 211, 238],
                                                                                              border: [6, 182, 212],
                                                                                          },
                                                                                      ][r]
                                                                                    : [
                                                                                          {
                                                                                              fill: [5, 150, 105],
                                                                                              border: [4, 120, 87],
                                                                                          },
                                                                                          {
                                                                                              fill: [13, 148, 136],
                                                                                              border: [15, 118, 110],
                                                                                          },
                                                                                          {
                                                                                              fill: [8, 145, 178],
                                                                                              border: [14, 116, 144],
                                                                                          },
                                                                                      ][r];
                                                                            };
                                                                        let p = 0,
                                                                            g = 0,
                                                                            b = 0;
                                                                        t.forEach((e) => {
                                                                            const t = Ue(e.layout);
                                                                            (p += t.equipRU),
                                                                                (g += t.blanksRU),
                                                                                (b += t.totalRU);
                                                                        });
                                                                        const f = b > 0 ? Math.round((g / b) * 100) : 0,
                                                                            y = b > 0 ? Math.round((p / b) * 100) : 0,
                                                                            j = s.filter((e) => "shelf" === e.type),
                                                                            _ = j.filter(
                                                                                (e) =>
                                                                                    "full" === e.width ||
                                                                                    (!e.width && !e.isHalfWidth)
                                                                            ),
                                                                            v = j.filter(
                                                                                (e) =>
                                                                                    "half" === e.width || e.isHalfWidth
                                                                            ),
                                                                            N = _.length + Math.ceil(v.length / 2),
                                                                            w = s.filter(
                                                                                (e) =>
                                                                                    "half" === e.width || e.isHalfWidth
                                                                            ).length,
                                                                            C = 6,
                                                                            M = Math.ceil(t.length / C) + 1,
                                                                            k =
                                                                                "https://avtoolspro.com/AV_TOOLS_LOGO.png",
                                                                            S = (e) =>
                                                                                new Promise((t, s) => {
                                                                                    const a = new Image();
                                                                                    (a.crossOrigin = "Anonymous"),
                                                                                        (a.onload = () => {
                                                                                            try {
                                                                                                const e =
                                                                                                    document.createElement(
                                                                                                        "canvas"
                                                                                                    );
                                                                                                (e.width = a.width),
                                                                                                    (e.height =
                                                                                                        a.height);
                                                                                                e
                                                                                                    .getContext("2d")
                                                                                                    .drawImage(a, 0, 0),
                                                                                                    t(
                                                                                                        e.toDataURL(
                                                                                                            "image/png"
                                                                                                        )
                                                                                                    );
                                                                                            } catch (e) {
                                                                                                s(e);
                                                                                            }
                                                                                        }),
                                                                                        (a.onerror = () =>
                                                                                            s(
                                                                                                new Error(
                                                                                                    "Failed to load logo"
                                                                                                )
                                                                                            )),
                                                                                        (a.src = e);
                                                                                });
                                                                        // Use cached logo if available, otherwise load and cache it
                                                                        let R = pdfLogoCacheRef.current;
                                                                        if (!R && !pdfLogoLoadingRef.current) {
                                                                            pdfLogoLoadingRef.current = true;
                                                                            try {
                                                                                R = await S(k);
                                                                                pdfLogoCacheRef.current = R;
                                                                            } catch (e) {
                                                                                console.log(
                                                                                    "Could not load logo from URL:",
                                                                                    e
                                                                                );
                                                                            }
                                                                            pdfLogoLoadingRef.current = false;
                                                                        }
                                                                        const P = (e) => {
                                                                                if (
                                                                                    (r.setFillColor(o[0], o[1], o[2]),
                                                                                    r.rect(0, 0, l, 52, "F"),
                                                                                    R)
                                                                                )
                                                                                    try {
                                                                                        r.addImage(
                                                                                            R,
                                                                                            "PNG",
                                                                                            n + 5,
                                                                                            10,
                                                                                            110,
                                                                                            32
                                                                                        );
                                                                                    } catch (e) {
                                                                                        r.setTextColor(255, 255, 255),
                                                                                            r.setFontSize(28),
                                                                                            r.setFont(
                                                                                                "helvetica",
                                                                                                "bold"
                                                                                            ),
                                                                                            r.text(
                                                                                                "AV TOOLS PRO",
                                                                                                n + 10,
                                                                                                32
                                                                                            );
                                                                                    }
                                                                                else
                                                                                    r.setTextColor(255, 255, 255),
                                                                                        r.setFontSize(28),
                                                                                        r.setFont("helvetica", "bold"),
                                                                                        r.text("AV TOOLS", n + 10, 32);
                                                                                r.setTextColor(255, 255, 255),
                                                                                    r.setFontSize(32),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.text(
                                                                                        "Rack Layout Report",
                                                                                        n + 135,
                                                                                        20
                                                                                    ),
                                                                                    r.setFontSize(22),
                                                                                    r.setFont("helvetica", "normal"),
                                                                                    r.text(
                                                                                        "Professional Equipment Configuration",
                                                                                        n + 135,
                                                                                        38
                                                                                    );
                                                                                const t = new Date().toLocaleDateString(
                                                                                        "en-US",
                                                                                        {
                                                                                            year: "numeric",
                                                                                            month: "short",
                                                                                            day: "numeric",
                                                                                        }
                                                                                    ),
                                                                                    s = 32;
                                                                                r.setFontSize(24),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.setTextColor(200, 220, 255),
                                                                                    r.text("DATE:", l - n - 240, s),
                                                                                    r.setTextColor(255, 255, 255),
                                                                                    r.text(t, l - n - 210, s),
                                                                                    r.setDrawColor(150, 180, 220),
                                                                                    r.setLineWidth(0.5),
                                                                                    r.line(
                                                                                        l - n - 105,
                                                                                        20,
                                                                                        l - n - 105,
                                                                                        38
                                                                                    ),
                                                                                    r.setFontSize(24),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.setTextColor(200, 220, 255),
                                                                                    r.text("PAGE:", l - n - 95, s),
                                                                                    r.setTextColor(255, 255, 255),
                                                                                    r.text(
                                                                                        e + " of " + M,
                                                                                        l - n - 60,
                                                                                        s
                                                                                    );
                                                                            },
                                                                            A = () => {
                                                                                r.setFillColor(d[0], d[1], d[2]),
                                                                                    r.rect(0, i - 24, l, 24, "F"),
                                                                                    r.setTextColor(220, 220, 220),
                                                                                    r.setFontSize(12),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.text(
                                                                                        "Generated by AV Tools Pro",
                                                                                        n,
                                                                                        i - 9
                                                                                    ),
                                                                                    r.setFontSize(11),
                                                                                    r.setFont("helvetica", "normal"),
                                                                                    r.text(
                                                                                        '1U = 44.45mm (1.75")  ‚Ä¢  Standard 19" EIA Rack Mount',
                                                                                        l / 2,
                                                                                        i - 9,
                                                                                        { align: "center" }
                                                                                    ),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.setFontSize(12),
                                                                                    r.text(
                                                                                        "www.avtoolspro.com",
                                                                                        l - n,
                                                                                        i - 9,
                                                                                        { align: "right" }
                                                                                    );
                                                                            },
                                                                            D = (e, t, s, a, l, i, n, d) => {
                                                                                const c = Ue(e.layout),
                                                                                    m = Math.min(12, n / c.totalRU),
                                                                                    h = c.totalRU * m,
                                                                                    p = 20,
                                                                                    g =
                                                                                        e.name && e.name.trim()
                                                                                            ? e.name
                                                                                                  .trim()
                                                                                                  .toUpperCase()
                                                                                            : "RACK " + (t + 1),
                                                                                    b = a + i - 28 - 5,
                                                                                    f = b - h,
                                                                                    y = void 0 !== d ? d : f - 18 - 2;
                                                                                r.setFillColor(o[0], o[1], o[2]),
                                                                                    r.roundedRect(
                                                                                        s - p,
                                                                                        y,
                                                                                        l + p,
                                                                                        18,
                                                                                        2,
                                                                                        2,
                                                                                        "F"
                                                                                    ),
                                                                                    r.setTextColor(255, 255, 255),
                                                                                    r.setFontSize(
                                                                                        g.length > 12 ? 16 : 22
                                                                                    ),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.text(g, s + (l - p) / 2, y + 13, {
                                                                                        align: "center",
                                                                                    }),
                                                                                    r.setFillColor(250, 250, 250),
                                                                                    r.setDrawColor(180, 180, 180),
                                                                                    r.setLineWidth(0.5),
                                                                                    r.rect(s - p, f, 18, h, "FD"),
                                                                                    r.setFillColor(245, 245, 245),
                                                                                    r.setDrawColor(100, 100, 100),
                                                                                    r.setLineWidth(1),
                                                                                    r.rect(s, f, l, h, "FD"),
                                                                                    r.setFillColor(65, 65, 65),
                                                                                    r.rect(s, f, 8, h, "F"),
                                                                                    r.rect(s + l - 8, f, 8, h, "F");
                                                                                for (let e = 1; e <= c.totalRU; e++) {
                                                                                    const t = f + h - e * m,
                                                                                        a = t + m / 2;
                                                                                    r.setDrawColor(200, 200, 200),
                                                                                        r.setLineWidth(0.2),
                                                                                        r.line(s + 8, t, s + l - 8, t),
                                                                                        r.setTextColor(60, 60, 60),
                                                                                        r.setFontSize(9),
                                                                                        r.setFont("helvetica", "bold"),
                                                                                        r.text(
                                                                                            String(e),
                                                                                            s - 10 - 1,
                                                                                            a + 3,
                                                                                            { align: "center" }
                                                                                        ),
                                                                                        r.setDrawColor(220, 220, 220),
                                                                                        r.setLineWidth(0.1),
                                                                                        r.line(s - p, t, s - 2, t),
                                                                                        r.setFillColor(45, 45, 45),
                                                                                        r.circle(s + 4, a, 1, "F"),
                                                                                        r.circle(s + l - 4, a, 1, "F");
                                                                                }
                                                                                r.setDrawColor(200, 200, 200),
                                                                                    r.setLineWidth(0.2),
                                                                                    r.line(s + 8, b, s + l - 8, b);
                                                                                const j = l - 16 - 4,
                                                                                    _ = s + 8 + 2;
                                                                                e.layout.forEach((e) => {
                                                                                    const t = f + h - e.endRU * m,
                                                                                        s =
                                                                                            f +
                                                                                            h -
                                                                                            (e.startRU - 1) * m -
                                                                                            t;
                                                                                    if (
                                                                                        "equipment" === e.type &&
                                                                                        e.item
                                                                                    ) {
                                                                                        const a = u(e.item),
                                                                                            l =
                                                                                                e.item.isHalfWidth ||
                                                                                                "half" === e.item.width,
                                                                                            i = e.item.pairItem;
                                                                                        let n = _,
                                                                                            o = j;
                                                                                        l &&
                                                                                            ((o = j / 2 - 2),
                                                                                            i ||
                                                                                                "right" !== e.side ||
                                                                                                (n = _ + j / 2 + 2));
                                                                                        const d = 1;
                                                                                        r.setFillColor(
                                                                                            a.fill[0],
                                                                                            a.fill[1],
                                                                                            a.fill[2]
                                                                                        ),
                                                                                            r.setDrawColor(
                                                                                                a.border[0],
                                                                                                a.border[1],
                                                                                                a.border[2]
                                                                                            ),
                                                                                            r.setLineWidth(0.6),
                                                                                            r.roundedRect(
                                                                                                n,
                                                                                                t + d,
                                                                                                o,
                                                                                                s - 2 * d,
                                                                                                2,
                                                                                                2,
                                                                                                "FD"
                                                                                            ),
                                                                                            r.setTextColor(
                                                                                                255,
                                                                                                255,
                                                                                                255
                                                                                            );
                                                                                        const c = Math.min(
                                                                                            12,
                                                                                            Math.max(9, 0.55 * s)
                                                                                        );
                                                                                        r.setFontSize(c),
                                                                                            r.setFont(
                                                                                                "helvetica",
                                                                                                "bold"
                                                                                            );
                                                                                        let m =
                                                                                            e.item.name || "Equipment";
                                                                                        const x = o - 6;
                                                                                        for (
                                                                                            ;
                                                                                            r.getTextWidth(m) > x &&
                                                                                            m.length > 3;

                                                                                        )
                                                                                            m = m.slice(0, -1);
                                                                                        if (
                                                                                            (m !== e.item.name &&
                                                                                                m.length > 2 &&
                                                                                                (m =
                                                                                                    m.slice(0, -2) +
                                                                                                    ".."),
                                                                                            r.text(
                                                                                                m,
                                                                                                n + o / 2,
                                                                                                t + s / 2 + c / 3,
                                                                                                { align: "center" }
                                                                                            ),
                                                                                            i)
                                                                                        ) {
                                                                                            const a = u(
                                                                                                    e.item.pairItem
                                                                                                ),
                                                                                                l = j / 2 - 2,
                                                                                                i = _ + j / 2 + 2;
                                                                                            r.setFillColor(
                                                                                                a.fill[0],
                                                                                                a.fill[1],
                                                                                                a.fill[2]
                                                                                            ),
                                                                                                r.setDrawColor(
                                                                                                    a.border[0],
                                                                                                    a.border[1],
                                                                                                    a.border[2]
                                                                                                ),
                                                                                                r.setLineWidth(0.6),
                                                                                                r.roundedRect(
                                                                                                    i,
                                                                                                    t + d,
                                                                                                    l,
                                                                                                    s - 2 * d,
                                                                                                    2,
                                                                                                    2,
                                                                                                    "FD"
                                                                                                ),
                                                                                                r.setTextColor(
                                                                                                    255,
                                                                                                    255,
                                                                                                    255
                                                                                                ),
                                                                                                r.setFontSize(c),
                                                                                                r.setFont(
                                                                                                    "helvetica",
                                                                                                    "bold"
                                                                                                );
                                                                                            let n =
                                                                                                e.item.pairItem.name ||
                                                                                                "Equipment";
                                                                                            const o = l - 6;
                                                                                            for (
                                                                                                ;
                                                                                                r.getTextWidth(n) > o &&
                                                                                                n.length > 3;

                                                                                            )
                                                                                                n = n.slice(0, -1);
                                                                                            n !==
                                                                                                e.item.pairItem.name &&
                                                                                                n.length > 2 &&
                                                                                                (n =
                                                                                                    n.slice(0, -2) +
                                                                                                    ".."),
                                                                                                r.text(
                                                                                                    n,
                                                                                                    i + l / 2,
                                                                                                    t + s / 2 + c / 3,
                                                                                                    { align: "center" }
                                                                                                );
                                                                                        } else if (l && !i) {
                                                                                            const a = j / 2 - 2,
                                                                                                l =
                                                                                                    "right" === e.side
                                                                                                        ? _
                                                                                                        : _ + j / 2 + 2;
                                                                                            r.setFillColor(50, 50, 50),
                                                                                                r.roundedRect(
                                                                                                    l,
                                                                                                    t + d,
                                                                                                    a,
                                                                                                    s - 2 * d,
                                                                                                    2,
                                                                                                    2,
                                                                                                    "F"
                                                                                                ),
                                                                                                r.setDrawColor(
                                                                                                    70,
                                                                                                    70,
                                                                                                    70
                                                                                                ),
                                                                                                r.setLineWidth(0.15);
                                                                                            for (
                                                                                                let e = l + 4;
                                                                                                e < l + a - 4;
                                                                                                e += 3
                                                                                            )
                                                                                                r.line(
                                                                                                    e,
                                                                                                    t + d + 2,
                                                                                                    e,
                                                                                                    t + s - d - 2
                                                                                                );
                                                                                            r.setTextColor(
                                                                                                120,
                                                                                                120,
                                                                                                120
                                                                                            ),
                                                                                                r.setFontSize(
                                                                                                    Math.max(7, 0.7 * c)
                                                                                                ),
                                                                                                r.setFont(
                                                                                                    "helvetica",
                                                                                                    "normal"
                                                                                                ),
                                                                                                r.text(
                                                                                                    "BLANK",
                                                                                                    l + a / 2,
                                                                                                    t + s / 2 + 2,
                                                                                                    { align: "center" }
                                                                                                );
                                                                                        }
                                                                                    } else if ("blank" === e.type) {
                                                                                        const e = 1;
                                                                                        r.setFillColor(50, 50, 50),
                                                                                            r.rect(
                                                                                                _,
                                                                                                t + e,
                                                                                                j,
                                                                                                s - 2 * e,
                                                                                                "F"
                                                                                            ),
                                                                                            r.setDrawColor(70, 70, 70),
                                                                                            r.setLineWidth(0.15);
                                                                                        for (
                                                                                            let a = _ + 5;
                                                                                            a < _ + j - 5;
                                                                                            a += 3
                                                                                        )
                                                                                            r.line(
                                                                                                a,
                                                                                                t + e + 1,
                                                                                                a,
                                                                                                t + s - e - 1
                                                                                            );
                                                                                    }
                                                                                });
                                                                                const v =
                                                                                        c.totalRU > 0
                                                                                            ? Math.round(
                                                                                                  (c.blanksRU /
                                                                                                      c.totalRU) *
                                                                                                      100
                                                                                              )
                                                                                            : 0,
                                                                                    N = b + 4;
                                                                                r.setFillColor(252, 252, 252),
                                                                                    r.setDrawColor(200, 200, 200),
                                                                                    r.setLineWidth(0.5),
                                                                                    r.roundedRect(
                                                                                        s - p,
                                                                                        N,
                                                                                        l + p,
                                                                                        22,
                                                                                        2,
                                                                                        2,
                                                                                        "FD"
                                                                                    );
                                                                                const w = N + 11 + 4;
                                                                                r.setFontSize(14),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.setTextColor(o[0], o[1], o[2]),
                                                                                    r.text(c.totalRU + "U", s - 10, w, {
                                                                                        align: "center",
                                                                                    }),
                                                                                    r.setTextColor(x[0], x[1], x[2]),
                                                                                    r.setFontSize(14),
                                                                                    r.text("Used: ", s + l / 5, w, {
                                                                                        align: "right",
                                                                                    }),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.text(
                                                                                        c.equipRU + "U",
                                                                                        s + l / 5 + 2,
                                                                                        w
                                                                                    ),
                                                                                    r.setFont("helvetica", "normal"),
                                                                                    r.text(
                                                                                        "Blank: ",
                                                                                        s + (2 * l) / 3 - 15,
                                                                                        w,
                                                                                        { align: "right" }
                                                                                    ),
                                                                                    r.setFont("helvetica", "bold"),
                                                                                    r.text(
                                                                                        c.blanksRU + "U (" + v + "%)",
                                                                                        s + (2 * l) / 3 - 13,
                                                                                        w
                                                                                    );
                                                                            };
                                                                        for (let e = 0; e < M - 1; e++) {
                                                                            e > 0 &&
                                                                                r.addPage([609.6, 914.4], "landscape"),
                                                                                P(e + 1),
                                                                                A();
                                                                            const s = e * C,
                                                                                a = Math.min(s + C, t.length),
                                                                                o = a - s;
                                                                            let d = 0;
                                                                            for (let e = s; e < a; e++) {
                                                                                const s = Ue(t[e].layout);
                                                                                s.totalRU > d && (d = s.totalRU);
                                                                            }
                                                                            const c = 56,
                                                                                m = i - c - 30 - 42 - 22,
                                                                                x = Math.min(m - 60, 12 * d),
                                                                                u = c + m - 28 - 5 - x - 18 - 2,
                                                                                h = l - 2 * n - 40,
                                                                                p = 35,
                                                                                g = 20,
                                                                                b = Math.min(
                                                                                    110,
                                                                                    (h - p * (o - 1) - g * o) / o
                                                                                );
                                                                            let f =
                                                                                (l - ((b + g) * o + p * (o - 1))) / 2 +
                                                                                g;
                                                                            for (let e = s; e < a; e++)
                                                                                D(t[e], e, f, c, b, m, x, u),
                                                                                    (f += b + p + g);
                                                                        }
                                                                        r.addPage([609.6, 914.4], "landscape"),
                                                                            P(M),
                                                                            A();
                                                                        const I = l / 2,
                                                                            E = l - 2 * n;
                                                                        let F = 58;
                                                                        r.setFillColor(d[0], d[1], d[2]),
                                                                            r.rect(n, F, E, 32, "F"),
                                                                            r.setTextColor(255, 255, 255),
                                                                            r.setFontSize(28),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text("CONFIGURATION SUMMARY", I, F + 22, {
                                                                                align: "center",
                                                                            }),
                                                                            (F += 44);
                                                                        const B = E,
                                                                            T = B / 4;
                                                                        r.setFillColor(o[0], o[1], o[2]),
                                                                            r.rect(n, F, B, 26, "F"),
                                                                            r.setTextColor(255, 255, 255),
                                                                            r.setFontSize(22),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text("PROJECT STATISTICS", I, F + 18, {
                                                                                align: "center",
                                                                            }),
                                                                            (F += 26),
                                                                            r.setFillColor(245, 245, 245),
                                                                            r.rect(n, F, B, 24, "F"),
                                                                            r.setDrawColor(200, 200, 200),
                                                                            r.setLineWidth(0.5),
                                                                            r.rect(n, F, B, 24, "S"),
                                                                            r.line(n + T, F, n + T, F + 24),
                                                                            r.line(n + 2 * T, F, n + 2 * T, F + 24),
                                                                            r.line(n + 3 * T, F, n + 3 * T, F + 24),
                                                                            r.setTextColor(x[0], x[1], x[2]),
                                                                            r.setFontSize(22),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text(
                                                                                "TOTAL CAPACITY",
                                                                                n + T / 2,
                                                                                F + 16,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.text("USED UNITS", n + 1.5 * T, F + 16, {
                                                                                align: "center",
                                                                            }),
                                                                            r.text("BLANK UNITS", n + 2.5 * T, F + 16, {
                                                                                align: "center",
                                                                            }),
                                                                            r.text(
                                                                                "SHELVES NEEDED",
                                                                                n + 3.5 * T,
                                                                                F + 16,
                                                                                { align: "center" }
                                                                            ),
                                                                            (F += 24),
                                                                            r.setFillColor(255, 255, 255),
                                                                            r.rect(n, F, B, 44, "F"),
                                                                            r.setDrawColor(200, 200, 200),
                                                                            r.rect(n, F, B, 44, "S"),
                                                                            r.line(n + T, F, n + T, F + 44),
                                                                            r.line(n + 2 * T, F, n + 2 * T, F + 44),
                                                                            r.line(n + 3 * T, F, n + 3 * T, F + 44),
                                                                            r.setFontSize(28),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.setTextColor(o[0], o[1], o[2]),
                                                                            r.text(b + "U", n + T / 2, F + 20, {
                                                                                align: "center",
                                                                            }),
                                                                            r.setTextColor(79, 70, 229),
                                                                            r.text(p + "U", n + 1.5 * T, F + 20, {
                                                                                align: "center",
                                                                            }),
                                                                            r.setTextColor(
                                                                                f >= c ? 5 : 245,
                                                                                f >= c ? 150 : 158,
                                                                                f >= c ? 105 : 11
                                                                            ),
                                                                            r.text(g + "U", n + 2.5 * T, F + 20, {
                                                                                align: "center",
                                                                            }),
                                                                            r.setTextColor(
                                                                                N > 0 ? 139 : 107,
                                                                                N > 0 ? 92 : 114,
                                                                                N > 0 ? 246 : 128
                                                                            ),
                                                                            r.text(
                                                                                N > 0 ? String(N) : "0",
                                                                                n + 3.5 * T,
                                                                                F + 20,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.setFontSize(18),
                                                                            r.setFont("helvetica", "normal"),
                                                                            r.setTextColor(m[0], m[1], m[2]),
                                                                            r.text(
                                                                                t.length +
                                                                                    " Rack" +
                                                                                    (t.length > 1 ? "s" : ""),
                                                                                n + T / 2,
                                                                                F + 36,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.text(
                                                                                y + "% Utilized",
                                                                                n + 1.5 * T,
                                                                                F + 36,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.text(
                                                                                f + "% (Target: " + c + "%)",
                                                                                n + 2.5 * T,
                                                                                F + 36,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.text(
                                                                                N > 0
                                                                                    ? "For shelf-mount items"
                                                                                    : "All rack-mountable",
                                                                                n + 3.5 * T,
                                                                                F + 36,
                                                                                { align: "center" }
                                                                            ),
                                                                            (F += 56);
                                                                        const L = 135;
                                                                        r.setFillColor(o[0], o[1], o[2]),
                                                                            r.rect(n, F, E, 26, "F"),
                                                                            r.setTextColor(255, 255, 255),
                                                                            r.setFontSize(22),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text("COLOR REFERENCE", I, F + 18, {
                                                                                align: "center",
                                                                            }),
                                                                            (F += 26);
                                                                        const H = L - 26;
                                                                        r.setFillColor(255, 255, 255),
                                                                            r.setDrawColor(200, 200, 200),
                                                                            r.setLineWidth(0.5),
                                                                            r.rect(n, F, E, H, "FD");
                                                                        const U = 180,
                                                                            q = (E - U) / 3,
                                                                            $ = 24;
                                                                        r.setFillColor(245, 245, 245),
                                                                            r.rect(n, F, E, $, "F"),
                                                                            r.setDrawColor(200, 200, 200),
                                                                            r.rect(n, F, E, $, "S"),
                                                                            r.line(n + U, F, n + U, F + $),
                                                                            r.line(n + U + q, F, n + U + q, F + $),
                                                                            r.line(
                                                                                n + U + 2 * q,
                                                                                F,
                                                                                n + U + 2 * q,
                                                                                F + $
                                                                            ),
                                                                            r.setTextColor(x[0], x[1], x[2]),
                                                                            r.setFontSize(14),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text(
                                                                                "EQUIPMENT TYPE",
                                                                                n + U / 2,
                                                                                F + 16,
                                                                                { align: "center" }
                                                                            ),
                                                                            r.text("1-2U", n + U + q / 2, F + 16, {
                                                                                align: "center",
                                                                            }),
                                                                            r.text("3-4U", n + U + 1.5 * q, F + 16, {
                                                                                align: "center",
                                                                            }),
                                                                            r.text("5+U", n + U + 2.5 * q, F + 16, {
                                                                                align: "center",
                                                                            }),
                                                                            (F += $);
                                                                        const W = (H - $) / 5,
                                                                            V = 36,
                                                                            O = 14;
                                                                        [
                                                                            {
                                                                                type: "Rack Mount - Full Width",
                                                                                colors: [
                                                                                    [37, 99, 235],
                                                                                    [79, 70, 229],
                                                                                    [124, 58, 237],
                                                                                ],
                                                                            },
                                                                            {
                                                                                type: "Rack Mount - Half Width",
                                                                                colors: [
                                                                                    [96, 165, 250],
                                                                                    [129, 140, 248],
                                                                                    [167, 139, 250],
                                                                                ],
                                                                            },
                                                                            {
                                                                                type: "Shelf Mount - Full Width",
                                                                                colors: [
                                                                                    [5, 150, 105],
                                                                                    [13, 148, 136],
                                                                                    [8, 145, 178],
                                                                                ],
                                                                            },
                                                                            {
                                                                                type: "Shelf Mount - Half Width",
                                                                                colors: [
                                                                                    [52, 211, 153],
                                                                                    [45, 212, 191],
                                                                                    [34, 211, 238],
                                                                                ],
                                                                            },
                                                                            {
                                                                                type: "Blank Panel",
                                                                                colors: [[55, 55, 55], null, null],
                                                                            },
                                                                        ].forEach(function (e, t) {
                                                                            const s = F + t * W;
                                                                            t % 2 == 1 &&
                                                                                (r.setFillColor(250, 250, 250),
                                                                                r.rect(n, s, E, W, "F")),
                                                                                r.setDrawColor(220, 220, 220),
                                                                                r.setLineWidth(0.3),
                                                                                r.line(n, s + W, n + E, s + W),
                                                                                r.line(n + U, s, n + U, s + W),
                                                                                r.line(n + U + q, s, n + U + q, s + W),
                                                                                r.line(
                                                                                    n + U + 2 * q,
                                                                                    s,
                                                                                    n + U + 2 * q,
                                                                                    s + W
                                                                                ),
                                                                                r.setTextColor(x[0], x[1], x[2]),
                                                                                r.setFontSize(14),
                                                                                r.setFont("helvetica", "normal"),
                                                                                r.text(
                                                                                    e.type,
                                                                                    n + U / 2,
                                                                                    s + W / 2 + 4,
                                                                                    { align: "center" }
                                                                                ),
                                                                                e.colors.forEach(function (e, t) {
                                                                                    if (e) {
                                                                                        const a =
                                                                                                n +
                                                                                                U +
                                                                                                q * t +
                                                                                                (q - V) / 2,
                                                                                            l = s + (W - O) / 2;
                                                                                        r.setFillColor(
                                                                                            e[0],
                                                                                            e[1],
                                                                                            e[2]
                                                                                        ),
                                                                                            r.roundedRect(
                                                                                                a,
                                                                                                l,
                                                                                                V,
                                                                                                O,
                                                                                                2,
                                                                                                2,
                                                                                                "F"
                                                                                            );
                                                                                    }
                                                                                });
                                                                        }),
                                                                            (F += H + 14);
                                                                        const z = e.filter(
                                                                                (e) =>
                                                                                    "rack" === e.type &&
                                                                                    ("half" === e.width ||
                                                                                        e.isHalfWidth)
                                                                            ),
                                                                            G = e.filter(
                                                                                (e) =>
                                                                                    "shelf" === e.type &&
                                                                                    ("half" === e.width ||
                                                                                        e.isHalfWidth)
                                                                            ),
                                                                            X = (e) => {
                                                                                const t = {};
                                                                                return (
                                                                                    e.forEach((e) => {
                                                                                        const s = e.ru || 1;
                                                                                        t[s] || (t[s] = []),
                                                                                            t[s].push(e);
                                                                                    }),
                                                                                    t
                                                                                );
                                                                            },
                                                                            J = X(z),
                                                                            Q = X(G);
                                                                        let K = 0;
                                                                        Object.values(J).forEach((e) => {
                                                                            e.length % 2 == 1 && K++;
                                                                        }),
                                                                            Object.values(Q).forEach((e) => {
                                                                                e.length % 2 == 1 && K++;
                                                                            });
                                                                        const Y = [];
                                                                        f >= c
                                                                            ? Y.push(
                                                                                  "Blank capacity (" +
                                                                                      f +
                                                                                      "%) meets target of " +
                                                                                      c +
                                                                                      "%. Adequate expansion space."
                                                                              )
                                                                            : Y.push(
                                                                                  "Blank capacity (" +
                                                                                      f +
                                                                                      "%) below target of " +
                                                                                      c +
                                                                                      "%. Consider additional rack space."
                                                                              ),
                                                                            h.length > 1 &&
                                                                                Y.push(
                                                                                    "Multi-rack configuration (" +
                                                                                        h.length +
                                                                                        " racks). Ensure proper cable management."
                                                                                ),
                                                                            w > 0 &&
                                                                                Y.push(
                                                                                    w +
                                                                                        " half-width item(s). Use filler panels for proper airflow."
                                                                                ),
                                                                            K > 0 &&
                                                                                Y.push(
                                                                                    K +
                                                                                        " half-RU blank panel(s) recommended for unpaired half-width equipment."
                                                                                ),
                                                                            N > 0 &&
                                                                                Y.push(
                                                                                    N +
                                                                                        " shelf/shelves needed for non-rack-mountable equipment."
                                                                                ),
                                                                            Y.push(
                                                                                "Compliant with EIA-310-E (1U = 44.45mm). Verify ventilation and weight capacity."
                                                                            );
                                                                        const Z = 20,
                                                                            ee = 26,
                                                                            te = 24,
                                                                            se = Y.length * Z + te;
                                                                        r.setFillColor(o[0], o[1], o[2]),
                                                                            r.rect(n, F, E, ee, "F"),
                                                                            r.setTextColor(255, 255, 255),
                                                                            r.setFontSize(22),
                                                                            r.setFont("helvetica", "bold"),
                                                                            r.text("RECOMMENDATIONS", I, F + 18, {
                                                                                align: "center",
                                                                            }),
                                                                            (F += ee),
                                                                            r.setFillColor(255, 255, 255),
                                                                            r.setDrawColor(200, 200, 200),
                                                                            r.setLineWidth(0.5),
                                                                            r.rect(n, F, E, se, "FD");
                                                                        let ae = F + 20;
                                                                        Y.forEach(function (e) {
                                                                            r.setTextColor(x[0], x[1], x[2]),
                                                                                r.setFontSize(33),
                                                                                r.setFont("helvetica", "bold"),
                                                                                r.text("‚Ä¢", n + 20, ae + 4),
                                                                                r.setFontSize(22),
                                                                                r.setFont("helvetica", "normal"),
                                                                                r.text(e, n + 32, ae + 4),
                                                                                (ae += Z);
                                                                        }),
                                                                            r.save(
                                                                                "AVTOOLS PRO-rack-layout-" +
                                                                                    new Date()
                                                                                        .toISOString()
                                                                                        .split("T")[0] +
                                                                                    ".pdf"
                                                                            );
                                                                    } catch (e) {
                                                                        console.error("PDF export error:", e),
                                                                            I(
                                                                                "Failed to generate PDF. Please try again."
                                                                            );
                                                                    }
                                                                else I("Add equipment to your rack before exporting.");
                                                            },
                                                            className:
                                                                "flex-1 py-2 rounded-lg font-medium bg-blue-600 hover:bg-blue-700 text-white text-xs sm:text-sm transition-colors shadow-sm dark:shadow-gray-950/10",
                                                            children: "üìÑ Export PDF",
                                                        }),
                                                    ],
                                                }),
                                            _jsx(ResetConfirmModal, {
                                                isOpen: he,
                                                onConfirm: () => {
                                                    t([]),
                                                        a(""),
                                                        l("1"),
                                                        n("rack"),
                                                        d("full"),
                                                        m(25),
                                                        u(!1),
                                                        p([]),
                                                        b(null),
                                                        y(null),
                                                        _(null),
                                                        N({}),
                                                        C(null),
                                                        k(""),
                                                        R(null),
                                                        A(""),
                                                        I(null),
                                                        T(0),
                                                        (De.current = !1),
                                                        (Ie.current = []),
                                                        (Se.current = ""),
                                                        q([]),
                                                        W(0),
                                                        O(null),
                                                        G(null),
                                                        ae(""),
                                                        le("1"),
                                                        ne("rack"),
                                                        de("full"),
                                                        pe(!1);
                                                },
                                                onCancel: () => pe(!1),
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            "manual" === L &&
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 border",
                                    children: [
                                        _jsx("h2", {
                                            className: "text-base sm:text-lg font-semibold mb-2",
                                            children: "üóÑÔ∏è Rack Configuration",
                                        }),
                                        _jsx("p", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mb-3",
                                            children: "Configure your rack size and add additional racks",
                                        }),
                                        h.length > 0 &&
                                            _jsxs("div", {
                                                className: "mb-3",
                                                children: [
                                                    _jsx("label", {
                                                        className: "block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",
                                                        children: `Rack ${B + 1} Size`,
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex gap-2",
                                                        children: [
                                                            _jsx("select", {
                                                                value: h[B]?.rackSize || 42,
                                                                onChange: (e) => {
                                                                    const t = parseInt(e.target.value);
                                                                    ((e, t) => {
                                                                        "manual" === L &&
                                                                            p((s) => {
                                                                                const a = [...s],
                                                                                    r = {
                                                                                        ...a[e],
                                                                                        layout: [...a[e].layout],
                                                                                    },
                                                                                    l = r.rackSize || r.layout.length;
                                                                                if (t === l) return s;
                                                                                let i = 0;
                                                                                if (
                                                                                    (r.layout.forEach((e) => {
                                                                                        "equipment" === e.type &&
                                                                                            e.item &&
                                                                                            (i += e.item.ru || 1);
                                                                                    }),
                                                                                    t < i)
                                                                                )
                                                                                    return (
                                                                                        I(
                                                                                            `Cannot reduce rack to ${t}U. Equipment requires ${i}U.`
                                                                                        ),
                                                                                        s
                                                                                    );
                                                                                if (t > l) {
                                                                                    const s = t - l;
                                                                                    for (let t = 0; t < s; t++)
                                                                                        r.layout.push({
                                                                                            id: `blank-${e}-${Date.now()}-${t}`,
                                                                                            type: "blank",
                                                                                            ru: 1,
                                                                                            startRU: 0,
                                                                                            endRU: 0,
                                                                                        });
                                                                                } else {
                                                                                    let e = l - t;
                                                                                    for (
                                                                                        ;
                                                                                        e > 0 &&
                                                                                        r.layout.length > 0 &&
                                                                                        "blank" ===
                                                                                            r.layout[
                                                                                                r.layout.length - 1
                                                                                            ].type;

                                                                                    )
                                                                                        r.layout.pop(), e--;
                                                                                }
                                                                                let n = 1;
                                                                                return (
                                                                                    r.layout.forEach((e) => {
                                                                                        const t =
                                                                                            "equipment" === e.type
                                                                                                ? e.item?.ru || 1
                                                                                                : e.ru || 1;
                                                                                        (e.startRU = n),
                                                                                            (e.endRU = n + t - 1),
                                                                                            (n += t);
                                                                                    }),
                                                                                    (r.rackSize = t),
                                                                                    (a[e] = r),
                                                                                    a
                                                                                );
                                                                            });
                                                                    })(B, t);
                                                                },
                                                                className: "flex-1 px-3 py-2 border rounded-lg text-sm",
                                                                children: ce.map((e) =>
                                                                    _jsx("option", {
                                                                        key: e,
                                                                        value: e,
                                                                        children: `${e}U`,
                                                                    })
                                                                ),
                                                            }),
                                                            h.length > 1 &&
                                                                _jsx("select", {
                                                                    value: B,
                                                                    onChange: (e) => T(parseInt(e.target.value)),
                                                                    className: "px-3 py-2 border rounded-lg text-sm",
                                                                    children: h.map((e, t) =>
                                                                        _jsx("option", {
                                                                            key: t,
                                                                            value: t,
                                                                            children: We(e, t),
                                                                        })
                                                                    ),
                                                                }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        _jsx("button", {
                                            onClick: () => J(!0),
                                            className:
                                                "w-full py-2 rounded-lg font-medium bg-indigo-600 hover:bg-indigo-700 text-white text-sm transition-colors",
                                            children: "+ Add New Rack",
                                        }),
                                        0 === h.length &&
                                            _jsxs("div", {
                                                className: "mt-3 pt-3 border-t",
                                                children: [
                                                    _jsx("p", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400 mb-2",
                                                        children: "Or start with a standard size:",
                                                    }),
                                                    _jsx("div", {
                                                        className: "grid grid-cols-4 gap-2",
                                                        children: [8, 12, 22, 42].map((e) =>
                                                            _jsx("button", {
                                                                key: e,
                                                                onClick: () => Ve(e),
                                                                className:
                                                                    "py-2 rounded-lg font-medium bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 text-sm transition-colors border",
                                                                children: `${e}U`,
                                                            })
                                                        ),
                                                    }),
                                                ],
                                            }),
                                    ],
                                }),
                            "auto" === L &&
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 border",
                                    children: [
                                        _jsx("h2", {
                                            className: "text-base sm:text-lg font-semibold mb-2",
                                            children: "üéØ Target Spare Capacity",
                                        }),
                                        _jsx("p", {
                                            className: "text-xs text-gray-500 dark:text-gray-400 mb-2",
                                            children: "Spare % = Blanks √∑ Total Capacity",
                                        }),
                                        _jsx("div", {
                                            className: "space-y-1.5",
                                            children: [
                                                { val: 20, label: "20% - Standard" },
                                                { val: 25, label: "25% - AVIXA Recommended" },
                                                { val: 30, label: "30% - Growth Planning" },
                                            ].map((e) =>
                                                _jsxs(
                                                    "label",
                                                    {
                                                        className: `flex items-center p-2.5 rounded border-2 cursor-pointer text-xs sm:text-sm ${c === e.val ? "bg-purple-50 dark:bg-purple-900/20 border-purple-500" : "border-gray-200 dark:border-gray-700 hover:border-purple-300"} transition-colors`,
                                                        children: [
                                                            _jsx("input", {
                                                                type: "radio",
                                                                checked: c === e.val,
                                                                onChange: () => m(e.val),
                                                                className: "mr-2 w-4 h-4",
                                                            }),
                                                            _jsx("span", { className: "text-gray-700 dark:text-gray-300", children: e.label }),
                                                        ],
                                                    },
                                                    e.val
                                                )
                                            ),
                                        }),
                                        Pe &&
                                            _jsxs("div", {
                                                className:
                                                    "mt-3 p-2 bg-amber-50 dark:bg-amber-900/20 border border-amber-300 rounded-lg text-xs text-amber-700",
                                                children: [
                                                    _jsx("div", {
                                                        className: "font-medium",
                                                        children: "‚ö†Ô∏è Spare capacity changed",
                                                    }),
                                                    _jsxs("div", {
                                                        children: [
                                                            "Current layout uses ",
                                                            Re.current,
                                                            '%. Click "Optimize Layout" to apply ',
                                                            c,
                                                            "%.",
                                                        ],
                                                    }),
                                                ],
                                            }),
                                        e.length > 0 &&
                                            _jsx("button", {
                                                onClick: () => {
                                                    if (0 === e.length) return;
                                                    const t = h.length > 0 ? h : ke(),
                                                        s = ze(t, c, me);
                                                    for (; s.length > 1; ) {
                                                        if (s[s.length - 1].layout.some((e) => "equipment" === e.type))
                                                            break;
                                                        s.pop();
                                                    }
                                                    p(Ge(s, me)),
                                                        (Se.current = JSON.stringify(e)),
                                                        (Re.current = c),
                                                        Ae(!1),
                                                        u(!0),
                                                        b(null),
                                                        (De.current = !0);
                                                },
                                                className:
                                                    "w-full mt-3 py-2.5 rounded-lg font-semibold text-sm sm:text-base transition-colors " +
                                                    (Pe
                                                        ? "bg-green-600 hover:bg-green-700 text-white animate-pulse"
                                                        : "bg-green-600 hover:bg-green-700 text-white"),
                                                children: Pe
                                                    ? "‚ú® Optimize Layout (Apply New Spare %)"
                                                    : "‚ú® Optimize Layout",
                                            }),
                                    ],
                                }),
                            e.length > 0 &&
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 border",
                                    children: [
                                        _jsxs("h2", {
                                            className: "text-base sm:text-lg font-semibold mb-2",
                                            children: ["Equipment (", e.length, ")"],
                                        }),
                                        _jsx("div", {
                                            className: "space-y-2 max-h-48 overflow-y-auto",
                                            children: e.map((e, t) => {
                                                const s = ue(e),
                                                    a = w === e.id;
                                                return _jsxs(
                                                    "div",
                                                    {
                                                        className:
                                                            "flex items-center justify-between p-2 rounded border text-sm gap-2 " +
                                                            (a ? "bg-blue-50 dark:bg-blue-900/20 border-blue-300" : "bg-gray-50 dark:bg-gray-900/50"),
                                                        children: [
                                                            _jsxs("div", {
                                                                className: "flex items-center gap-2 min-w-0 flex-1",
                                                                children: [
                                                                    _jsx("div", {
                                                                        className: `w-3 h-3 flex-shrink-0 rounded ${s.bg} ${s.border} border`,
                                                                    }),
                                                                    a
                                                                        ? _jsx("input", {
                                                                              type: "text",
                                                                              value: M,
                                                                              onChange: (e) => k(e.target.value),
                                                                              onKeyDown: (e) => {
                                                                                  "Enter" === e.key && tt(),
                                                                                      "Escape" === e.key &&
                                                                                          (C(null), k(""));
                                                                              },
                                                                              onBlur: tt,
                                                                              autoFocus: !0,
                                                                              className:
                                                                                  "flex-1 min-w-0 px-2 py-1 text-sm border border-blue-400 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",
                                                                          })
                                                                        : _jsx("span", {
                                                                              className:
                                                                                  "truncate cursor-pointer hover:text-blue-600",
                                                                              onClick: () => et(e),
                                                                              title: "Click to rename",
                                                                              children: e.name,
                                                                          }),
                                                                    _jsxs("span", {
                                                                        className:
                                                                            "text-xs bg-gray-200 dark:bg-gray-700 px-1.5 py-0.5 rounded flex-shrink-0",
                                                                        children: [e.ru, "U"],
                                                                    }),
                                                                    _jsx("span", {
                                                                        className:
                                                                            "text-xs px-1.5 py-0.5 rounded flex-shrink-0 " +
                                                                            ("shelf" === e.type
                                                                                ? "bg-emerald-100 text-emerald-700"
                                                                                : "bg-blue-100 text-blue-700"),
                                                                        children: "shelf" === e.type ? "üì¶" : "üîß",
                                                                    }),
                                                                    "half" === e.width &&
                                                                        _jsx("span", {
                                                                            className:
                                                                                "text-xs bg-yellow-100 text-yellow-700 px-1.5 py-0.5 rounded flex-shrink-0",
                                                                            children: "¬ΩW",
                                                                        }),
                                                                ],
                                                            }),
                                                            _jsxs("div", {
                                                                className: "flex items-center gap-1 flex-shrink-0",
                                                                children: [
                                                                    !a &&
                                                                        _jsx("button", {
                                                                            onClick: () => et(e),
                                                                            className:
                                                                                "w-8 h-8 flex items-center justify-center bg-blue-100 hover:bg-blue-200 text-blue-600 hover:text-blue-800 dark:text-blue-200 rounded-lg text-sm transition-colors",
                                                                            title: "Rename item",
                                                                            children: "‚úèÔ∏è",
                                                                        }),
                                                                    _jsx("button", {
                                                                        onClick: () => Qe(e.id),
                                                                        className:
                                                                            "w-8 h-8 flex items-center justify-center bg-red-100 hover:bg-red-200 text-red-600 hover:text-red-800 dark:text-red-200 rounded-lg font-bold text-lg transition-colors",
                                                                        title: "Remove item",
                                                                        children: "√ó",
                                                                    }),
                                                                ],
                                                            }),
                                                        ],
                                                    },
                                                    e.id
                                                );
                                            }),
                                        }),
                                        _jsxs("div", {
                                            className: "mt-3 pt-2 border-t text-sm",
                                            children: [
                                                _jsxs("div", {
                                                    className: "flex justify-between",
                                                    children: [
                                                        _jsx("span", { children: "Effective:" }),
                                                        _jsxs("span", { className: "font-bold", children: [be, "U"] }),
                                                    ],
                                                }),
                                                ge.ruSaved > 0 &&
                                                    _jsxs("div", {
                                                        className: "flex justify-between text-green-600",
                                                        children: [
                                                            _jsx("span", { children: "Saved:" }),
                                                            _jsxs("span", { children: ["-", ge.ruSaved, "U"] }),
                                                        ],
                                                    }),
                                            ],
                                        }),
                                    ],
                                }),
                            (e.length > 0 || ("manual" === L && h.length > 0)) &&
                                _jsxs("div", {
                                    className: "bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-4 border",
                                    children: [
                                        _jsx("h2", {
                                            className: "text-lg font-semibold mb-3",
                                            children: "üìã Configuration",
                                        }),
                                        _jsxs("div", {
                                            className: "p-3 bg-purple-100 rounded-lg border border-purple-300 mb-3",
                                            children: [
                                                _jsx("div", {
                                                    className: "text-xs text-purple-600",
                                                    children:
                                                        h.length > 1
                                                            ? "Multiple Racks"
                                                            : "manual" === L
                                                              ? "Manual Rack"
                                                              : "Recommended Rack",
                                                }),
                                                _jsx("div", {
                                                    className: "text-xl font-bold text-purple-700",
                                                    children: (() => {
                                                        const e = h.map((e) => {
                                                                const { totalRU: t } = Ue(e.layout);
                                                                return t;
                                                            }),
                                                            t = {};
                                                        e.forEach((e) => {
                                                            t[e] = (t[e] || 0) + 1;
                                                        });
                                                        const s = Object.entries(t).sort(
                                                            (e, t) => parseInt(t[0]) - parseInt(e[0])
                                                        );
                                                        return (
                                                            s
                                                                .map(([e, t]) => (t > 1 ? `${t}√ó${e}U` : `${e}U`))
                                                                .join(" + ") || "No racks"
                                                        );
                                                    })(),
                                                }),
                                                _jsxs("div", {
                                                    className: "text-sm text-purple-600",
                                                    children: [
                                                        "Total: ",
                                                        (() => {
                                                            let e = 0;
                                                            return (
                                                                h.forEach((t) => {
                                                                    const { totalRU: s } = Ue(t.layout);
                                                                    e += s;
                                                                }),
                                                                e
                                                            );
                                                        })(),
                                                        "U capacity",
                                                    ],
                                                }),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "grid grid-cols-3 gap-2 text-center mb-3",
                                            children: [
                                                _jsxs("div", {
                                                    className: "bg-blue-50 dark:bg-blue-900/20 p-2 rounded",
                                                    children: [
                                                        _jsx("div", {
                                                            className: "text-xs text-blue-600",
                                                            children: "Equipment",
                                                        }),
                                                        _jsxs("div", {
                                                            className: "text-lg font-bold text-blue-800 dark:text-blue-200",
                                                            children: [
                                                                (() => {
                                                                    let e = 0;
                                                                    return (
                                                                        h.forEach((t) => {
                                                                            t.layout.forEach((t) => {
                                                                                "equipment" === t.type &&
                                                                                    t.item &&
                                                                                    (e += t.item.ru || 1);
                                                                            });
                                                                        }),
                                                                        e
                                                                    );
                                                                })(),
                                                                "U",
                                                            ],
                                                        }),
                                                        _jsxs("div", {
                                                            className: "text-[10px] text-blue-500 mt-1",
                                                            children: [
                                                                (() => {
                                                                    let e = 0,
                                                                        t = 0;
                                                                    return (
                                                                        h.forEach((s) => {
                                                                            s.layout.forEach((s) => {
                                                                                if ("equipment" === s.type && s.item) {
                                                                                    const a = s.item.ru || 1,
                                                                                        r = "shelf" === s.item.type,
                                                                                        l = s.item.pairItem,
                                                                                        i =
                                                                                            l &&
                                                                                            "shelf" ===
                                                                                                s.item.pairItem.type;
                                                                                    l
                                                                                        ? r && i
                                                                                            ? (t += a)
                                                                                            : r || i
                                                                                              ? (r || i) && (t += a)
                                                                                              : (e += a)
                                                                                        : r
                                                                                          ? (t += a)
                                                                                          : (e += a);
                                                                                }
                                                                            });
                                                                        }),
                                                                        `üîß${e}U üì¶${t}U`
                                                                    );
                                                                })(),
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                _jsxs("div", {
                                                    className: "bg-orange-50 dark:bg-orange-900/20 p-2 rounded",
                                                    children: [
                                                        _jsx("div", {
                                                            className: "text-xs text-orange-600",
                                                            children: "Blanks",
                                                        }),
                                                        _jsxs("div", {
                                                            className: "text-lg font-bold text-orange-800 dark:text-orange-200",
                                                            children: [
                                                                (() => {
                                                                    let e = 0;
                                                                    return (
                                                                        h.forEach((t) => {
                                                                            t.layout.forEach((t) => {
                                                                                "blank" === t.type && (e += t.ru || 1);
                                                                            });
                                                                        }),
                                                                        e
                                                                    );
                                                                })(),
                                                                "U",
                                                            ],
                                                        }),
                                                    ],
                                                }),
                                                (() => {
                                                    let e = 0,
                                                        t = 0;
                                                    h.forEach((s) => {
                                                        const a = Ue(s.layout);
                                                        (e += a.equipRU), (t += a.blanksRU);
                                                    });
                                                    const s = e + t,
                                                        a = s > 0 ? Math.round((t / s) * 100) : 0;
                                                    return _jsxs("div", {
                                                        className:
                                                            "p-2 rounded " + (a >= c ? "bg-green-50 dark:bg-green-900/20" : "bg-yellow-50 dark:bg-yellow-900/20"),
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "text-xs " +
                                                                    (a >= c ? "text-green-600" : "text-yellow-600"),
                                                                children: "Actual Spare",
                                                            }),
                                                            _jsxs("div", {
                                                                className:
                                                                    "text-lg font-bold " +
                                                                    (a >= c ? "text-green-800 dark:text-green-200" : "text-yellow-800 dark:text-yellow-200"),
                                                                children: [a, "%"],
                                                            }),
                                                        ],
                                                    });
                                                })(),
                                            ],
                                        }),
                                        _jsxs("div", {
                                            className: "text-xs p-2 bg-gray-50 dark:bg-gray-900/50 rounded mb-3",
                                            children: [
                                                _jsx("div", {
                                                    className: "font-medium mb-1",
                                                    children: "Calculation:",
                                                }),
                                                (() => {
                                                    let e = 0,
                                                        t = 0;
                                                    h.forEach((s) => {
                                                        const a = Ue(s.layout);
                                                        (e += a.equipRU), (t += a.blanksRU);
                                                    });
                                                    const s = e + t,
                                                        a = s > 0 ? Math.round((t / s) * 100) : 0;
                                                    return _jsxs("div", {
                                                        className: "text-gray-600 dark:text-gray-300",
                                                        children: [t, "U √∑ ", s, "U = ", a, "% spare"],
                                                    });
                                                })(),
                                            ],
                                        }),
                                        _jsx("div", {
                                            className: "space-y-1",
                                            children: nt.map((e, t) =>
                                                _jsx(
                                                    "div",
                                                    {
                                                        className:
                                                            "p-2 rounded text-xs " +
                                                            ("success" === e.type
                                                                ? "bg-green-50 dark:bg-green-900/20 text-green-800 dark:text-green-200"
                                                                : "warning" === e.type
                                                                  ? "bg-yellow-50 dark:bg-yellow-900/20 text-yellow-800 dark:text-yellow-200"
                                                                  : "bg-blue-50 dark:bg-blue-900/20 text-blue-800 dark:text-blue-200"),
                                                        children: e.text,
                                                    },
                                                    t
                                                )
                                            ),
                                        }),
                                        x &&
                                            _jsx("div", {
                                                className:
                                                    "mt-2 p-2 bg-green-100 rounded text-xs text-green-800 dark:text-green-200 text-center",
                                                children: "‚úÖ Layout Optimized",
                                            }),
                                    ],
                                }),
                        ],
                    }),
                    _jsxs("div", {
                        className: "lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-md dark:shadow-gray-950/20 p-3 sm:p-4 border",
                        children: [
                            _jsxs("div", {
                                className: "flex flex-col sm:flex-row sm:items-center justify-between mb-3 gap-2",
                                children: [
                                    _jsxs("h2", {
                                        className: "text-base sm:text-lg font-semibold",
                                        children: ["üóÑÔ∏è Rack Layout", h.length > 1 ? ` (${h.length} Racks)` : ""],
                                    }),
                                    _jsxs("div", {
                                        className: "flex items-center gap-2",
                                        children: [
                                            "manual" === L &&
                                                _jsx("button", {
                                                    onClick: () => J(!0),
                                                    className:
                                                        "px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-xs font-medium hover:bg-indigo-700",
                                                    children: "+ Add Rack",
                                                }),
                                            _jsx("span", {
                                                className: "text-xs text-gray-500 dark:text-gray-300",
                                                children: "Tap item to select ‚Ä¢ Use floating bar to edit",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            "manual" === L && 0 === h.length
                                ? _jsx("div", {
                                      className:
                                          "flex flex-col items-center justify-center h-48 sm:h-64 bg-gray-100 dark:bg-gray-700 rounded-lg border-2 border-dashed",
                                      children: _jsxs("div", {
                                          className: "text-center px-4",
                                          children: [
                                              _jsx("div", { className: "text-4xl mb-3", children: "üóÑÔ∏è" }),
                                              _jsx("p", {
                                                  className: "text-gray-600 dark:text-gray-300 font-medium mb-2",
                                                  children: "No Rack Configured",
                                              }),
                                              _jsx("p", {
                                                  className: "text-gray-500 dark:text-gray-400 text-sm mb-4",
                                                  children:
                                                      "Add equipment to auto-create an 8U rack, or choose a rack size from the configuration panel",
                                              }),
                                              _jsxs("div", {
                                                  className: "flex flex-wrap justify-center gap-2",
                                                  children: [8, 12, 22, 42].map((e) =>
                                                      _jsx("button", {
                                                          key: e,
                                                          onClick: () => Ve(e),
                                                          className:
                                                              "px-3 py-1.5 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",
                                                          children: `${e}U`,
                                                      })
                                                  ),
                                              }),
                                          ],
                                      }),
                                  })
                                : 0 === e.length && "manual" !== L
                                  ? _jsx("div", {
                                        className:
                                            "flex items-center justify-center h-48 sm:h-64 bg-gray-100 dark:bg-gray-700 rounded-lg border-2 border-dashed",
                                        children: _jsx("p", {
                                            className: "text-gray-500 dark:text-gray-300 text-sm",
                                            children: "Add equipment to see visualization",
                                        }),
                                    })
                                  : _jsxs("div", {
                                        children: [
                                            _jsx("div", {
                                                className: "overflow-x-auto pb-4 -mx-3 px-3 sm:mx-0 sm:px-0",
                                                children: (() => {
                                                    Math.max(
                                                        ...h.map((e) => {
                                                            const { totalRU: t } = Ue(e.layout);
                                                            return t;
                                                        }),
                                                        1
                                                    );
                                                    return _jsx("div", {
                                                        className:
                                                            "flex items-end " +
                                                            (h.length > 1 ? "gap-6 sm:gap-8" : "justify-center"),
                                                        style: h.length > 1 ? { minWidth: 220 * h.length + "px" } : {},
                                                        children: h.map((e, t) => dt(e, t)),
                                                    });
                                                })(),
                                            }),
                                            _jsxs("div", {
                                                className:
                                                    "mt-4 pt-3 border-t flex flex-wrap gap-3 sm:gap-4 text-xs justify-center",
                                                children: [
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", { className: "w-4 h-4 bg-blue-50 dark:bg-blue-900/200 rounded" }),
                                                            _jsx("span", { children: "Full" }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsxs("div", {
                                                                className: "flex w-4 h-4",
                                                                children: [
                                                                    _jsx("div", {
                                                                        className: "w-2 h-4 bg-blue-50 dark:bg-blue-900/200 rounded-l",
                                                                    }),
                                                                    _jsx("div", {
                                                                        className: "w-2 h-4 bg-emerald-500 rounded-r",
                                                                    }),
                                                                ],
                                                            }),
                                                            _jsx("span", { children: "Half pair" }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "w-4 h-4 bg-gray-700 rounded border border-dashed border-gray-500",
                                                            }),
                                                            _jsx("span", { children: "Blank" }),
                                                        ],
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("div", {
                                                                className:
                                                                    "w-4 h-4 bg-gray-300 rounded ring-2 ring-yellow-400",
                                                            }),
                                                            _jsx("span", { children: "Selected" }),
                                                        ],
                                                    }),
                                                ],
                                            }),
                                            !g &&
                                                _jsx("div", {
                                                    className:
                                                        "mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 rounded text-xs text-purple-700 text-center",
                                                    children:
                                                        "üí° Tap any item to select it, then use the floating control bar at the bottom.",
                                                }),
                                        ],
                                    }),
                        ],
                    }),
                ],
            }),
            g &&
                ot &&
                "undefined" != typeof ReactDOM &&
                ReactDOM.createPortal(
                    _jsx("div", {
                        className: "floating-toolbar-portal",
                        style: {
                            position: "fixed",
                            bottom: "16px",
                            left: "50%",
                            transform: "translateX(-50%)",
                            zIndex: 99999,
                            pointerEvents: "auto",
                            maxWidth: "calc(100vw - 16px)",
                            width: "auto",
                            boxShadow: "0 12px 40px rgba(0,0,0,0.25)",
                            borderRadius: "20px",
                        },
                        children: _jsx("div", {
                            style: {
                                overflowX: "auto",
                                overflowY: "hidden",
                                WebkitOverflowScrolling: "touch",
                                scrollbarWidth: "none",
                                msOverflowStyle: "none",
                            },
                            children: _jsxs("div", {
                                className:
                                    "bg-white dark:bg-gray-800 rounded-2xl border border-gray-200 dark:border-gray-700 px-1.5 sm:px-2 py-1.5 sm:py-2 flex items-center gap-0.5 sm:gap-1",
                                style: {
                                    backdropFilter: "blur(8px)",
                                    backgroundColor: "rgba(255,255,255,0.97)",
                                    minWidth: "fit-content",
                                },
                                children: [
                                    _jsxs("div", {
                                        className:
                                            "flex items-center gap-1.5 sm:gap-2 px-2 sm:px-3 py-1 sm:py-1.5 bg-blue-50 dark:bg-blue-900/200 text-white rounded-lg sm:rounded-xl",
                                        children: [
                                            _jsx("div", {
                                                className:
                                                    "w-2.5 h-2.5 sm:w-3 sm:h-3 rounded " +
                                                    ("equipment" === ot?.type ? "bg-white dark:bg-gray-800/30" : "bg-white dark:bg-gray-800/50"),
                                            }),
                                            "equipment" === ot?.type && ot?.item
                                                ? S === ot.item.id
                                                    ? _jsx("input", {
                                                          type: "text",
                                                          value: P,
                                                          onChange: (e) => A(e.target.value),
                                                          onBlur: () => {
                                                              P.trim() && Ke(ot.item.id, P), R(null), A("");
                                                          },
                                                          onKeyDown: (e) => {
                                                              "Enter" === e.key &&
                                                                  (P.trim() && Ke(ot.item.id, P), R(null), A("")),
                                                                  "Escape" === e.key && (R(null), A(""));
                                                          },
                                                          autoFocus: !0,
                                                          className:
                                                              "bg-white dark:bg-gray-800 text-gray-800 text-xs sm:text-sm px-1.5 sm:px-2 py-0.5 rounded w-20 sm:w-28 focus:outline-none focus:ring-2 focus:ring-blue-300",
                                                      })
                                                    : _jsx("span", {
                                                          className:
                                                              "text-xs sm:text-sm font-medium truncate max-w-16 sm:max-w-28 cursor-pointer",
                                                          onClick: () => {
                                                              R(ot.item.id), A(ot.item.name);
                                                          },
                                                          title: "Click to rename",
                                                          children: ot.item.name,
                                                      })
                                                : _jsx("span", {
                                                      className: "text-xs sm:text-sm font-medium",
                                                      children: "Blank",
                                                  }),
                                        ],
                                    }),
                                    _jsx("div", { className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1" }),
                                    _jsx("button", {
                                        onClick: () => {
                                            if (!g) return;
                                            const { rackIdx: e, layoutId: t } = g,
                                                s = h.map((e) => ({
                                                    ...e,
                                                    layout: e.layout.map((e) =>
                                                        "equipment" === e.type && e.item
                                                            ? {
                                                                  ...e,
                                                                  item: {
                                                                      ...e.item,
                                                                      pairItem: e.item.pairItem
                                                                          ? { ...e.item.pairItem }
                                                                          : null,
                                                                  },
                                                              }
                                                            : { ...e }
                                                    ),
                                                })),
                                                a = s[e];
                                            if (!a) return;
                                            const r = a.layout.findIndex((e) => e.id === t);
                                            r >= 0 &&
                                                r < a.layout.length - 1 &&
                                                (([a.layout[r], a.layout[r + 1]] = [a.layout[r + 1], a.layout[r]]),
                                                st(a),
                                                "manual" === L
                                                    ? p([...s])
                                                    : (p(Ge(Oe(s, c, me), me)), u(!1), (De.current = !0)));
                                        },
                                        className:
                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group",
                                        title: "Move Up",
                                        children: _jsx("svg", {
                                            className: "w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M5 15l7-7 7 7",
                                            }),
                                        }),
                                    }),
                                    _jsx("button", {
                                        onClick: () => {
                                            if (!g) return;
                                            const { rackIdx: e, layoutId: t } = g,
                                                s = h.map((e) => ({
                                                    ...e,
                                                    layout: e.layout.map((e) =>
                                                        "equipment" === e.type && e.item
                                                            ? {
                                                                  ...e,
                                                                  item: {
                                                                      ...e.item,
                                                                      pairItem: e.item.pairItem
                                                                          ? { ...e.item.pairItem }
                                                                          : null,
                                                                  },
                                                              }
                                                            : { ...e }
                                                    ),
                                                })),
                                                a = s[e];
                                            if (!a) return;
                                            const r = a.layout.findIndex((e) => e.id === t);
                                            r > 0 &&
                                                (([a.layout[r], a.layout[r - 1]] = [a.layout[r - 1], a.layout[r]]),
                                                st(a),
                                                "manual" === L
                                                    ? p([...s])
                                                    : (p(Ge(Oe(s, c, me), me)), u(!1), (De.current = !0)));
                                        },
                                        className:
                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group",
                                        title: "Move Down",
                                        children: _jsx("svg", {
                                            className: "w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M19 9l-7 7-7-7",
                                            }),
                                        }),
                                    }),
                                    "manual" !== L &&
                                        _jsx("div", { className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1" }),
                                    "manual" !== L &&
                                        (() => {
                                            const e = g ? h[g.rackIdx] : null,
                                                t = !!e && Ue(e.layout).totalRU >= me;
                                            return _jsx("button", {
                                                onClick: () => !t && Ze("above"),
                                                className:
                                                    "p-1.5 sm:p-2.5 rounded-lg sm:rounded-xl transition-colors group " +
                                                    (t ? "opacity-40 cursor-not-allowed" : "hover:bg-gray-100 dark:bg-gray-700"),
                                                title: t ? "Rack at max size (45U)" : "Add Blank Above",
                                                disabled: t,
                                                children: _jsx("span", {
                                                    className:
                                                        "text-xs sm:text-sm font-bold " +
                                                        (t
                                                            ? "text-gray-400"
                                                            : "text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100"),
                                                    children: "B‚ñ≤",
                                                }),
                                            });
                                        })(),
                                    "manual" !== L &&
                                        (() => {
                                            const e = g ? h[g.rackIdx] : null,
                                                t = !!e && Ue(e.layout).totalRU >= me;
                                            return _jsx("button", {
                                                onClick: () => !t && Ze("below"),
                                                className:
                                                    "p-1.5 sm:p-2.5 rounded-lg sm:rounded-xl transition-colors group " +
                                                    (t ? "opacity-40 cursor-not-allowed" : "hover:bg-gray-100 dark:bg-gray-700"),
                                                title: t ? "Rack at max size (45U)" : "Add Blank Below",
                                                disabled: t,
                                                children: _jsx("span", {
                                                    className:
                                                        "text-xs sm:text-sm font-bold " +
                                                        (t
                                                            ? "text-gray-400"
                                                            : "text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100"),
                                                    children: "B‚ñº",
                                                }),
                                            });
                                        })(),
                                    "equipment" === ot?.type &&
                                        (() => {
                                            let t;
                                            if (
                                                ((t = ot.isPairItem ? ot.item : e.find((e) => e.id === ot.item?.id)),
                                                !t)
                                            )
                                                return null;
                                            const s = t.id,
                                                a = t.ru || 1;
                                            return _jsxs(_Fragment, {
                                                children: [
                                                    _jsx("div", {
                                                        className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1",
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () => Ye(s, a - 1),
                                                        disabled: a <= 1,
                                                        className:
                                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group " +
                                                            (a <= 1 ? "opacity-30 cursor-not-allowed" : ""),
                                                        title: "Decrease Size",
                                                        children: _jsx("svg", {
                                                            className:
                                                                "w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100",
                                                            fill: "none",
                                                            viewBox: "0 0 24 24",
                                                            stroke: "currentColor",
                                                            strokeWidth: 2,
                                                            children: _jsx("path", {
                                                                strokeLinecap: "round",
                                                                strokeLinejoin: "round",
                                                                d: "M20 12H4",
                                                            }),
                                                        }),
                                                    }),
                                                    _jsxs("span", {
                                                        className:
                                                            "text-xs sm:text-sm font-semibold text-gray-700 dark:text-gray-300 min-w-6 sm:min-w-8 text-center",
                                                        children: [a, "U"],
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () => Ye(s, a + 1),
                                                        disabled: a >= me,
                                                        className:
                                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group " +
                                                            (a >= me ? "opacity-30 cursor-not-allowed" : ""),
                                                        title: "Increase Size",
                                                        children: _jsx("svg", {
                                                            className:
                                                                "w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:text-gray-100",
                                                            fill: "none",
                                                            viewBox: "0 0 24 24",
                                                            stroke: "currentColor",
                                                            strokeWidth: 2,
                                                            children: _jsx("path", {
                                                                strokeLinecap: "round",
                                                                strokeLinejoin: "round",
                                                                d: "M12 4v16m8-8H4",
                                                            }),
                                                        }),
                                                    }),
                                                ],
                                            });
                                        })(),
                                    "equipment" === ot?.type &&
                                        (() => {
                                            let s;
                                            if (
                                                ((s = ot.isPairItem ? ot.item : e.find((e) => e.id === ot.item?.id)),
                                                !s)
                                            )
                                                return null;
                                            const a = s.id,
                                                r = s.type || "rack",
                                                l = s.width || "full";
                                            return _jsxs(_Fragment, {
                                                children: [
                                                    _jsx("div", {
                                                        className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1",
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () =>
                                                            ((s) => {
                                                                let a = !1,
                                                                    r = 0,
                                                                    l = null,
                                                                    i = -1;
                                                                if (
                                                                    (h.forEach((e, t) => {
                                                                        e.layout.forEach((e) => {
                                                                            if ("equipment" === e.type && e.item) {
                                                                                if (
                                                                                    e.item.id === s &&
                                                                                    e.item.pairItem
                                                                                ) {
                                                                                    const s =
                                                                                        "rack" === e.item.type
                                                                                            ? "shelf"
                                                                                            : "rack";
                                                                                    e.item.pairItem.type !== s &&
                                                                                        ((a = !0),
                                                                                        (r = e.item.pairItem.ru || 1),
                                                                                        (l = e.item.pairItem.type),
                                                                                        (i = t));
                                                                                }
                                                                                if (
                                                                                    e.item.pairItem &&
                                                                                    e.item.pairItem.id === s
                                                                                ) {
                                                                                    const s =
                                                                                        "rack" === e.item.pairItem.type
                                                                                            ? "shelf"
                                                                                            : "rack";
                                                                                    e.item.type !== s &&
                                                                                        ((a = !0),
                                                                                        (r = e.item.pairItem.ru || 1),
                                                                                        (l = s),
                                                                                        (i = t));
                                                                                }
                                                                            }
                                                                        });
                                                                    }),
                                                                    "manual" === L && a && i >= 0)
                                                                ) {
                                                                    const e = h[i];
                                                                    if (!qe(e, l, r, s).canPlace)
                                                                        return void I(
                                                                            `Cannot change mount type: Rack ${i + 1} is full. Need ${r}U of blank space or a compatible unpaired half-width ${"shelf" === l ? "shelf" : "rack"}-mounted ${r}U item to pair with.`
                                                                        );
                                                                }
                                                                t(
                                                                    e.map((e) =>
                                                                        e.id === s
                                                                            ? {
                                                                                  ...e,
                                                                                  type:
                                                                                      "rack" === e.type
                                                                                          ? "shelf"
                                                                                          : "rack",
                                                                              }
                                                                            : e
                                                                    )
                                                                ),
                                                                    p((e) =>
                                                                        e.map((e) => {
                                                                            const t = [];
                                                                            let a = !1;
                                                                            if (
                                                                                (e.layout.forEach((e) => {
                                                                                    if (
                                                                                        "equipment" === e.type &&
                                                                                        e.item
                                                                                    )
                                                                                        if (e.item.id === s) {
                                                                                            const s =
                                                                                                "rack" === e.item.type
                                                                                                    ? "shelf"
                                                                                                    : "rack";
                                                                                            if (
                                                                                                e.item.pairItem &&
                                                                                                e.item.pairItem.type !==
                                                                                                    s
                                                                                            ) {
                                                                                                (a = !0),
                                                                                                    t.push({
                                                                                                        ...e,
                                                                                                        item: {
                                                                                                            ...e.item,
                                                                                                            type: s,
                                                                                                            isHalfPair:
                                                                                                                !1,
                                                                                                            pairItem:
                                                                                                                null,
                                                                                                        },
                                                                                                    });
                                                                                                const r =
                                                                                                        e.item.pairItem,
                                                                                                    l = r.ru || 1;
                                                                                                let i = !1;
                                                                                                for (
                                                                                                    let e = 0;
                                                                                                    e < t.length;
                                                                                                    e++
                                                                                                ) {
                                                                                                    const s = t[e];
                                                                                                    if (
                                                                                                        "equipment" ===
                                                                                                            s.type &&
                                                                                                        s.item
                                                                                                    ) {
                                                                                                        const a =
                                                                                                                s.item,
                                                                                                            n =
                                                                                                                a.isHalfWidth ||
                                                                                                                "half" ===
                                                                                                                    a.width,
                                                                                                            o =
                                                                                                                a.isHalfPair &&
                                                                                                                a.pairItem;
                                                                                                        if (
                                                                                                            n &&
                                                                                                            !o &&
                                                                                                            a.type ===
                                                                                                                r.type &&
                                                                                                            (a.ru ||
                                                                                                                1) === l
                                                                                                        ) {
                                                                                                            (t[e] = {
                                                                                                                ...s,
                                                                                                                item: {
                                                                                                                    ...a,
                                                                                                                    isHalfPair:
                                                                                                                        !0,
                                                                                                                    pairItem:
                                                                                                                        {
                                                                                                                            ...r,
                                                                                                                        },
                                                                                                                },
                                                                                                            }),
                                                                                                                (i =
                                                                                                                    !0);
                                                                                                            break;
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                if (!i) {
                                                                                                    let e = -1,
                                                                                                        s = 0;
                                                                                                    for (
                                                                                                        let a = 0;
                                                                                                        a < t.length;
                                                                                                        a++
                                                                                                    )
                                                                                                        if (
                                                                                                            "blank" ===
                                                                                                            t[a].type
                                                                                                        ) {
                                                                                                            if (
                                                                                                                (-1 ===
                                                                                                                    e &&
                                                                                                                    (e =
                                                                                                                        a),
                                                                                                                s++,
                                                                                                                s >= l)
                                                                                                            )
                                                                                                                break;
                                                                                                        } else
                                                                                                            (e = -1),
                                                                                                                (s = 0);
                                                                                                    s >= l && e >= 0
                                                                                                        ? t.splice(
                                                                                                              e,
                                                                                                              l,
                                                                                                              {
                                                                                                                  id: `layout-unpair-${Date.now()}`,
                                                                                                                  type: "equipment",
                                                                                                                  item: {
                                                                                                                      ...r,
                                                                                                                      isHalfPair:
                                                                                                                          !1,
                                                                                                                      pairItem:
                                                                                                                          null,
                                                                                                                  },
                                                                                                                  startRU: 0,
                                                                                                                  endRU: 0,
                                                                                                                  ru: l,
                                                                                                              }
                                                                                                          )
                                                                                                        : t.push({
                                                                                                              id: `layout-unpair-${Date.now()}`,
                                                                                                              type: "equipment",
                                                                                                              item: {
                                                                                                                  ...r,
                                                                                                                  isHalfPair:
                                                                                                                      !1,
                                                                                                                  pairItem:
                                                                                                                      null,
                                                                                                              },
                                                                                                              startRU: 0,
                                                                                                              endRU: 0,
                                                                                                              ru: l,
                                                                                                          });
                                                                                                }
                                                                                            } else {
                                                                                                const r =
                                                                                                        e.item
                                                                                                            .isHalfWidth ||
                                                                                                        "half" ===
                                                                                                            e.item
                                                                                                                .width,
                                                                                                    l =
                                                                                                        e.item
                                                                                                            .isHalfPair &&
                                                                                                        e.item.pairItem;
                                                                                                r && !l
                                                                                                    ? (t.push({
                                                                                                          ...e,
                                                                                                          item: {
                                                                                                              ...e.item,
                                                                                                              type: s,
                                                                                                              needsPairing:
                                                                                                                  !0,
                                                                                                          },
                                                                                                      }),
                                                                                                      (a = !0))
                                                                                                    : t.push({
                                                                                                          ...e,
                                                                                                          item: {
                                                                                                              ...e.item,
                                                                                                              type: s,
                                                                                                          },
                                                                                                      });
                                                                                            }
                                                                                        } else if (
                                                                                            e.item.pairItem &&
                                                                                            e.item.pairItem.id === s
                                                                                        ) {
                                                                                            const s =
                                                                                                "rack" ===
                                                                                                e.item.pairItem.type
                                                                                                    ? "shelf"
                                                                                                    : "rack";
                                                                                            if (e.item.type !== s) {
                                                                                                (a = !0),
                                                                                                    t.push({
                                                                                                        ...e,
                                                                                                        item: {
                                                                                                            ...e.item,
                                                                                                            isHalfPair:
                                                                                                                !1,
                                                                                                            pairItem:
                                                                                                                null,
                                                                                                        },
                                                                                                    });
                                                                                                const r = {
                                                                                                        ...e.item
                                                                                                            .pairItem,
                                                                                                        type: s,
                                                                                                    },
                                                                                                    l = r.ru || 1;
                                                                                                let i = !1;
                                                                                                for (
                                                                                                    let e = 0;
                                                                                                    e < t.length;
                                                                                                    e++
                                                                                                ) {
                                                                                                    const s = t[e];
                                                                                                    if (
                                                                                                        "equipment" ===
                                                                                                            s.type &&
                                                                                                        s.item
                                                                                                    ) {
                                                                                                        const a =
                                                                                                                s.item,
                                                                                                            n =
                                                                                                                a.isHalfWidth ||
                                                                                                                "half" ===
                                                                                                                    a.width,
                                                                                                            o =
                                                                                                                a.isHalfPair &&
                                                                                                                a.pairItem;
                                                                                                        if (
                                                                                                            n &&
                                                                                                            !o &&
                                                                                                            a.type ===
                                                                                                                r.type &&
                                                                                                            (a.ru ||
                                                                                                                1) === l
                                                                                                        ) {
                                                                                                            (t[e] = {
                                                                                                                ...s,
                                                                                                                item: {
                                                                                                                    ...a,
                                                                                                                    isHalfPair:
                                                                                                                        !0,
                                                                                                                    pairItem:
                                                                                                                        r,
                                                                                                                },
                                                                                                            }),
                                                                                                                (i =
                                                                                                                    !0);
                                                                                                            break;
                                                                                                        }
                                                                                                    }
                                                                                                }
                                                                                                if (!i) {
                                                                                                    let e = -1,
                                                                                                        s = 0;
                                                                                                    for (
                                                                                                        let a = 0;
                                                                                                        a < t.length;
                                                                                                        a++
                                                                                                    )
                                                                                                        if (
                                                                                                            "blank" ===
                                                                                                            t[a].type
                                                                                                        ) {
                                                                                                            if (
                                                                                                                (-1 ===
                                                                                                                    e &&
                                                                                                                    (e =
                                                                                                                        a),
                                                                                                                s++,
                                                                                                                s >= l)
                                                                                                            )
                                                                                                                break;
                                                                                                        } else
                                                                                                            (e = -1),
                                                                                                                (s = 0);
                                                                                                    s >= l && e >= 0
                                                                                                        ? t.splice(
                                                                                                              e,
                                                                                                              l,
                                                                                                              {
                                                                                                                  id: `layout-unpair-${Date.now()}`,
                                                                                                                  type: "equipment",
                                                                                                                  item: {
                                                                                                                      ...r,
                                                                                                                      isHalfPair:
                                                                                                                          !1,
                                                                                                                      pairItem:
                                                                                                                          null,
                                                                                                                  },
                                                                                                                  startRU: 0,
                                                                                                                  endRU: 0,
                                                                                                                  ru: l,
                                                                                                              }
                                                                                                          )
                                                                                                        : t.push({
                                                                                                              id: `layout-unpair-${Date.now()}`,
                                                                                                              type: "equipment",
                                                                                                              item: {
                                                                                                                  ...r,
                                                                                                                  isHalfPair:
                                                                                                                      !1,
                                                                                                                  pairItem:
                                                                                                                      null,
                                                                                                              },
                                                                                                              startRU: 0,
                                                                                                              endRU: 0,
                                                                                                              ru: l,
                                                                                                          });
                                                                                                }
                                                                                            } else
                                                                                                t.push({
                                                                                                    ...e,
                                                                                                    item: {
                                                                                                        ...e.item,
                                                                                                        pairItem: {
                                                                                                            ...e.item
                                                                                                                .pairItem,
                                                                                                            type: s,
                                                                                                        },
                                                                                                    },
                                                                                                });
                                                                                        } else t.push(e);
                                                                                    else t.push(e);
                                                                                }),
                                                                                a)
                                                                            ) {
                                                                                let e = 1;
                                                                                t.forEach((t) => {
                                                                                    const s =
                                                                                        "equipment" === t.type
                                                                                            ? t.item?.ru || 1
                                                                                            : t.ru || 1;
                                                                                    (t.startRU = e),
                                                                                        (t.endRU = e + s - 1),
                                                                                        (e += s);
                                                                                });
                                                                            }
                                                                            for (let e = 0; e < t.length; e++) {
                                                                                const s = t[e];
                                                                                if (
                                                                                    "equipment" !== s.type ||
                                                                                    !s.item ||
                                                                                    !s.item.needsPairing
                                                                                )
                                                                                    continue;
                                                                                const a = s.item,
                                                                                    r = a.type,
                                                                                    l = a.ru || 1;
                                                                                delete t[e].item.needsPairing;
                                                                                for (let s = 0; s < t.length; s++) {
                                                                                    if (e === s) continue;
                                                                                    const i = t[s];
                                                                                    if (
                                                                                        "equipment" !== i.type ||
                                                                                        !i.item
                                                                                    )
                                                                                        continue;
                                                                                    const n = i.item,
                                                                                        o =
                                                                                            n.isHalfWidth ||
                                                                                            "half" === n.width,
                                                                                        d =
                                                                                            !0 === n.isHalfPair ||
                                                                                            null != n.pairItem;
                                                                                    if (
                                                                                        o &&
                                                                                        !d &&
                                                                                        n.type === r &&
                                                                                        (n.ru || 1) === l &&
                                                                                        !n.needsPairing
                                                                                    ) {
                                                                                        (t[s] = {
                                                                                            ...i,
                                                                                            item: {
                                                                                                ...n,
                                                                                                isHalfPair: !0,
                                                                                                pairItem: {
                                                                                                    ...a,
                                                                                                    isHalfWidth: !0,
                                                                                                    isHalfPair: !1,
                                                                                                    pairItem: null,
                                                                                                },
                                                                                            },
                                                                                        }),
                                                                                            (t[e] = {
                                                                                                id: `blank-freed-${Date.now()}-${e}`,
                                                                                                type: "blank",
                                                                                                ru: l,
                                                                                                startRU: 0,
                                                                                                endRU: 0,
                                                                                            });
                                                                                        break;
                                                                                    }
                                                                                }
                                                                            }
                                                                            if (a) {
                                                                                let e = 1;
                                                                                t.forEach((t) => {
                                                                                    const s =
                                                                                        "equipment" === t.type
                                                                                            ? t.item?.ru || 1
                                                                                            : t.ru || 1;
                                                                                    (t.startRU = e),
                                                                                        (t.endRU = e + s - 1),
                                                                                        (e += s);
                                                                                });
                                                                            }
                                                                            return { ...e, layout: t };
                                                                        })
                                                                    ),
                                                                    u(!1);
                                                            })(a),
                                                        className:
                                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group",
                                                        title:
                                                            "rack" === r
                                                                ? "Change to Shelf Mount"
                                                                : "Change to Rack Mount",
                                                        children: _jsx("span", {
                                                            className: "text-sm sm:text-base",
                                                            children: "rack" === r ? "üîß" : "üì¶",
                                                        }),
                                                    }),
                                                    _jsx("button", {
                                                        onClick: () =>
                                                            ((s) => {
                                                                let a = !1,
                                                                    r = 0,
                                                                    l = null,
                                                                    i = -1;
                                                                if (
                                                                    (h.forEach((e, t) => {
                                                                        e.layout.forEach((e) => {
                                                                            "equipment" === e.type &&
                                                                                e.item &&
                                                                                (e.item.id === s &&
                                                                                    ("half" === e.item.width ||
                                                                                        e.item.isHalfWidth) &&
                                                                                    e.item.pairItem &&
                                                                                    ((a = !0),
                                                                                    (r = e.item.pairItem.ru || 1),
                                                                                    (l = e.item.pairItem.type),
                                                                                    (i = t)),
                                                                                e.item.pairItem &&
                                                                                    e.item.pairItem.id === s &&
                                                                                    ("half" === e.item.pairItem.width ||
                                                                                        e.item.pairItem.isHalfWidth) &&
                                                                                    ((a = !0),
                                                                                    (r = e.item.pairItem.ru || 1),
                                                                                    (l = e.item.pairItem.type),
                                                                                    (i = t)));
                                                                        });
                                                                    }),
                                                                    "manual" === L && a && i >= 0)
                                                                ) {
                                                                    const e = h[i];
                                                                    if (!qe(e, l, r, s).canPlace)
                                                                        return void I(
                                                                            `Cannot convert to full width: Rack ${i + 1} is full. Need ${r}U of blank space or a compatible unpaired half-width ${"shelf" === l ? "shelf" : "rack"}-mounted ${r}U item to pair with.`
                                                                        );
                                                                }
                                                                t(
                                                                    e.map((e) => {
                                                                        if (e.id !== s) return e;
                                                                        const t = "half" === e.width ? "full" : "half";
                                                                        return {
                                                                            ...e,
                                                                            width: t,
                                                                            isHalfWidth: "half" === t,
                                                                        };
                                                                    })
                                                                ),
                                                                    p((e) => {
                                                                        const t = e.map((e) => {
                                                                            const t = [];
                                                                            let a = [];
                                                                            e.layout.forEach((e) => {
                                                                                if ("equipment" === e.type && e.item)
                                                                                    if (e.item.id === s) {
                                                                                        const s =
                                                                                            "half" === e.item.width
                                                                                                ? "full"
                                                                                                : "half";
                                                                                        "full" === s && e.item.pairItem
                                                                                            ? (a.push({
                                                                                                  ...e.item.pairItem,
                                                                                                  isHalfPair: !1,
                                                                                                  pairItem: null,
                                                                                              }),
                                                                                              t.push({
                                                                                                  ...e,
                                                                                                  item: {
                                                                                                      ...e.item,
                                                                                                      width: s,
                                                                                                      isHalfWidth: !1,
                                                                                                      isHalfPair: !1,
                                                                                                      pairItem: null,
                                                                                                  },
                                                                                              }))
                                                                                            : "half" === s
                                                                                              ? t.push({
                                                                                                    ...e,
                                                                                                    item: {
                                                                                                        ...e.item,
                                                                                                        width: s,
                                                                                                        isHalfWidth: !0,
                                                                                                        isHalfPair: !1,
                                                                                                        pairItem: null,
                                                                                                        needsPairing:
                                                                                                            !0,
                                                                                                    },
                                                                                                })
                                                                                              : t.push({
                                                                                                    ...e,
                                                                                                    item: {
                                                                                                        ...e.item,
                                                                                                        width: s,
                                                                                                        isHalfWidth:
                                                                                                            "half" ===
                                                                                                            s,
                                                                                                    },
                                                                                                });
                                                                                    } else if (
                                                                                        e.item.pairItem &&
                                                                                        e.item.pairItem.id === s
                                                                                    ) {
                                                                                        const s =
                                                                                            "half" ===
                                                                                            e.item.pairItem.width
                                                                                                ? "full"
                                                                                                : "half";
                                                                                        "full" === s
                                                                                            ? (a.push({
                                                                                                  ...e.item.pairItem,
                                                                                                  width: s,
                                                                                                  isHalfWidth: !1,
                                                                                                  isHalfPair: !1,
                                                                                                  pairItem: null,
                                                                                              }),
                                                                                              t.push({
                                                                                                  ...e,
                                                                                                  item: {
                                                                                                      ...e.item,
                                                                                                      isHalfPair: !1,
                                                                                                      pairItem: null,
                                                                                                  },
                                                                                              }))
                                                                                            : t.push({
                                                                                                  ...e,
                                                                                                  item: {
                                                                                                      ...e.item,
                                                                                                      pairItem: {
                                                                                                          ...e.item
                                                                                                              .pairItem,
                                                                                                          width: s,
                                                                                                          isHalfWidth:
                                                                                                              "half" ===
                                                                                                              s,
                                                                                                      },
                                                                                                  },
                                                                                              });
                                                                                    } else t.push(e);
                                                                                else t.push(e);
                                                                            }),
                                                                                a.forEach((e) => {
                                                                                    const s = e.ru || 1;
                                                                                    if (
                                                                                        e.isHalfWidth ||
                                                                                        "half" === e.width
                                                                                    ) {
                                                                                        let a = !1;
                                                                                        for (
                                                                                            let r = 0;
                                                                                            r < t.length;
                                                                                            r++
                                                                                        ) {
                                                                                            const l = t[r];
                                                                                            if (
                                                                                                "equipment" ===
                                                                                                    l.type &&
                                                                                                l.item
                                                                                            ) {
                                                                                                const i = l.item,
                                                                                                    n =
                                                                                                        i.isHalfWidth ||
                                                                                                        "half" ===
                                                                                                            i.width,
                                                                                                    o =
                                                                                                        i.isHalfPair &&
                                                                                                        i.pairItem;
                                                                                                if (
                                                                                                    n &&
                                                                                                    !o &&
                                                                                                    (i.ru || 1) === s &&
                                                                                                    i.type === e.type
                                                                                                ) {
                                                                                                    (t[r] = {
                                                                                                        ...l,
                                                                                                        item: {
                                                                                                            ...i,
                                                                                                            isHalfPair:
                                                                                                                !0,
                                                                                                            pairItem: {
                                                                                                                ...e,
                                                                                                                isHalfWidth:
                                                                                                                    !0,
                                                                                                            },
                                                                                                        },
                                                                                                    }),
                                                                                                        (a = !0);
                                                                                                    break;
                                                                                                }
                                                                                            }
                                                                                        }
                                                                                        if (a) return;
                                                                                    }
                                                                                    let a = 0,
                                                                                        r = -1;
                                                                                    for (let e = 0; e < t.length; e++)
                                                                                        if ("blank" === t[e].type) {
                                                                                            if (
                                                                                                (-1 === r && (r = e),
                                                                                                a++,
                                                                                                a >= s)
                                                                                            )
                                                                                                break;
                                                                                        } else (a = 0), (r = -1);
                                                                                    a >= s && r >= 0
                                                                                        ? t.splice(r, s, {
                                                                                              id: `layout-relocated-${Date.now()}-${e.id}`,
                                                                                              type: "equipment",
                                                                                              item: e,
                                                                                              startRU: 0,
                                                                                              endRU: 0,
                                                                                              ru: s,
                                                                                          })
                                                                                        : t.push({
                                                                                              id: `layout-relocated-${Date.now()}-${e.id}`,
                                                                                              type: "equipment",
                                                                                              item: e,
                                                                                              startRU: 0,
                                                                                              endRU: 0,
                                                                                              ru: s,
                                                                                          });
                                                                                });
                                                                            for (let e = 0; e < t.length; e++) {
                                                                                const s = t[e];
                                                                                if (
                                                                                    "equipment" !== s.type ||
                                                                                    !s.item ||
                                                                                    !s.item.needsPairing
                                                                                )
                                                                                    continue;
                                                                                const a = s.item,
                                                                                    r = a.type,
                                                                                    l = a.ru || 1;
                                                                                delete t[e].item.needsPairing;
                                                                                for (let s = 0; s < t.length; s++) {
                                                                                    if (e === s) continue;
                                                                                    const i = t[s];
                                                                                    if (
                                                                                        "equipment" !== i.type ||
                                                                                        !i.item
                                                                                    )
                                                                                        continue;
                                                                                    const n = i.item,
                                                                                        o =
                                                                                            n.isHalfWidth ||
                                                                                            "half" === n.width,
                                                                                        d =
                                                                                            !0 === n.isHalfPair ||
                                                                                            null != n.pairItem;
                                                                                    if (
                                                                                        o &&
                                                                                        !d &&
                                                                                        n.type === r &&
                                                                                        (n.ru || 1) === l &&
                                                                                        !n.needsPairing
                                                                                    ) {
                                                                                        (t[s] = {
                                                                                            ...i,
                                                                                            item: {
                                                                                                ...n,
                                                                                                isHalfPair: !0,
                                                                                                pairItem: {
                                                                                                    ...a,
                                                                                                    isHalfWidth: !0,
                                                                                                    isHalfPair: !1,
                                                                                                    pairItem: null,
                                                                                                },
                                                                                            },
                                                                                        }),
                                                                                            (t[e] = {
                                                                                                id: `blank-freed-${Date.now()}-${e}`,
                                                                                                type: "blank",
                                                                                                ru: l,
                                                                                                startRU: 0,
                                                                                                endRU: 0,
                                                                                            });
                                                                                        break;
                                                                                    }
                                                                                }
                                                                            }
                                                                            let r = 1;
                                                                            return (
                                                                                t.forEach((e) => {
                                                                                    const t =
                                                                                        "equipment" === e.type
                                                                                            ? e.item?.ru || 1
                                                                                            : e.ru || 1;
                                                                                    (e.startRU = r),
                                                                                        (e.endRU = r + t - 1),
                                                                                        (r += t);
                                                                                }),
                                                                                { ...e, layout: t }
                                                                            );
                                                                        });
                                                                        return t;
                                                                    }),
                                                                    u(!1);
                                                            })(a),
                                                        className:
                                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group",
                                                        title:
                                                            "half" === l
                                                                ? "Change to Full Width"
                                                                : "Change to Half Width",
                                                        children: _jsx("span", {
                                                            className: "text-sm sm:text-base",
                                                            children: "half" === l ? "‚óß" : "‚ñ†",
                                                        }),
                                                    }),
                                                ],
                                            });
                                        })(),
                                    h.length > 1 &&
                                        "equipment" === ot?.type &&
                                        !ot?.isPairItem &&
                                        (() => {
                                            const e = g?.rackIdx,
                                                t = ot.item?.ru || 1,
                                                s = ot.item?.name || "Item",
                                                a = [];
                                            if (
                                                (h.forEach((s, r) => {
                                                    if (r === e) return;
                                                    // Count maximum consecutive blanks anywhere in the rack
                                                    let maxConsecutiveBlanks = 0;
                                                    let currentConsecutive = 0;
                                                    s.layout.forEach(li => {
                                                        if (li.type === "blank") {
                                                            currentConsecutive++;
                                                            if (currentConsecutive > maxConsecutiveBlanks) {
                                                                maxConsecutiveBlanks = currentConsecutive;
                                                            }
                                                        } else {
                                                            currentConsecutive = 0;
                                                        }
                                                    });
                                                    // Also count trailing blanks for backward compatibility
                                                    let trailingBlanks = 0;
                                                    for (
                                                        let e = s.layout.length - 1;
                                                        e >= 0 && "blank" === s.layout[e].type;
                                                        e--
                                                    )
                                                        trailingBlanks++;
                                                    // Use the larger of maxConsecutive or trailing
                                                    const availableSpace = Math.max(maxConsecutiveBlanks, trailingBlanks);
                                                    availableSpace >= t && a.push({ idx: r, availableBlanks: availableSpace, rack: s });
                                                }),
                                                0 === a.length)
                                            )
                                                return _jsxs(_Fragment, {
                                                    children: [
                                                        _jsx("div", {
                                                            className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1",
                                                        }),
                                                        _jsx("span", {
                                                            className: "text-xs text-gray-400 px-2",
                                                            title: "No other racks have enough space for this item",
                                                            children: "No transfer options",
                                                        }),
                                                    ],
                                                });
                                            return _jsxs(_Fragment, {
                                                children: [
                                                    _jsx("div", {
                                                        className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1",
                                                    }),
                                                    _jsxs("div", {
                                                        className: "flex items-center gap-1",
                                                        children: [
                                                            _jsx("svg", {
                                                                className: "w-4 h-4 text-gray-500 dark:text-gray-400",
                                                                fill: "none",
                                                                viewBox: "0 0 24 24",
                                                                stroke: "currentColor",
                                                                strokeWidth: 2,
                                                                children: _jsx("path", {
                                                                    strokeLinecap: "round",
                                                                    strokeLinejoin: "round",
                                                                    d: "M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4",
                                                                }),
                                                            }),
                                                            _jsx("select", {
                                                                onChange: (e) => {
                                                                    const r = parseInt(e.target.value);
                                                                    if (
                                                                        ((e.target.selectedIndex = 0),
                                                                        isNaN(r) || r < 0)
                                                                    )
                                                                        return;
                                                                    if (!g || !ot?.item) return;
                                                                    const l = g.rackIdx;
                                                                    if (l === r)
                                                                        return void I(
                                                                            "Cannot transfer to the same rack"
                                                                        );
                                                                    if (r >= h.length)
                                                                        return void I(`Rack ${r + 1} does not exist`);
                                                                    const i = a.find((e) => e.idx === r);
                                                                    if (!i)
                                                                        return void I(
                                                                            `Cannot transfer "${s}" (${t}U) to Rack ${r + 1}: not enough space`
                                                                        );
                                                                    const n = h.map((e) => ({
                                                                            ...e,
                                                                            layout: e.layout.map((e) =>
                                                                                "equipment" === e.type && e.item
                                                                                    ? {
                                                                                          ...e,
                                                                                          item: {
                                                                                              ...e.item,
                                                                                              pairItem: e.item.pairItem
                                                                                                  ? {
                                                                                                        ...e.item
                                                                                                            .pairItem,
                                                                                                    }
                                                                                                  : null,
                                                                                          },
                                                                                      }
                                                                                    : { ...e }
                                                                            ),
                                                                        })),
                                                                        o = n[l],
                                                                        d = n[r];
                                                                    if (!o || !d)
                                                                        return void I("Transfer failed: invalid rack");
                                                                    const m = g.layoutId,
                                                                        x = o.layout.findIndex((e) => e.id === m);
                                                                    if (x < 0)
                                                                        return void I(
                                                                            "Transfer failed: item not found in source rack"
                                                                        );
                                                                    const f = { ...o.layout[x] };
                                                                    f.item &&
                                                                        ((f.item = { ...f.item }),
                                                                        f.item.pairItem &&
                                                                            (f.item.pairItem = { ...f.item.pairItem }));
                                                                    const y = f.item?.ru || 1;
                                                                    
                                                                    // Find best position for insertion - look for consecutive blanks anywhere
                                                                    let bestBlankStart = -1;
                                                                    let bestBlankCount = 0;
                                                                    let currentStart = -1;
                                                                    let currentCount = 0;
                                                                    
                                                                    for (let idx = 0; idx < d.layout.length; idx++) {
                                                                        if (d.layout[idx].type === "blank") {
                                                                            if (currentStart === -1) currentStart = idx;
                                                                            currentCount++;
                                                                            if (currentCount >= y && currentCount > bestBlankCount) {
                                                                                bestBlankStart = currentStart;
                                                                                bestBlankCount = currentCount;
                                                                            }
                                                                        } else {
                                                                            currentStart = -1;
                                                                            currentCount = 0;
                                                                        }
                                                                    }
                                                                    
                                                                    // Also check trailing blanks as fallback
                                                                    let trailingStart = d.layout.length;
                                                                    let trailingCount = 0;
                                                                    for (let idx = d.layout.length - 1; idx >= 0 && d.layout[idx].type === "blank"; idx--) {
                                                                        trailingStart = idx;
                                                                        trailingCount++;
                                                                    }
                                                                    
                                                                    // Use trailing blanks if they're sufficient, otherwise use best consecutive
                                                                    let insertPos, blanksToRemove;
                                                                    if (trailingCount >= y) {
                                                                        insertPos = trailingStart;
                                                                        blanksToRemove = { start: trailingStart, count: y };
                                                                    } else if (bestBlankStart >= 0 && bestBlankCount >= y) {
                                                                        insertPos = bestBlankStart;
                                                                        blanksToRemove = { start: bestBlankStart, count: y };
                                                                    } else {
                                                                        return void I(
                                                                            `Cannot transfer "${s}" (${y}U) to Rack ${r + 1}: not enough consecutive space`
                                                                        );
                                                                    }
                                                                    
                                                                    // Remove item from source rack and add blanks
                                                                    o.layout.splice(x, 1);
                                                                    for (let e = 0; e < y; e++)
                                                                        o.layout.splice(x + e, 0, {
                                                                            id: `blank-${l}-transfer-${Date.now()}-${e}`,
                                                                            startRU: 0,
                                                                            endRU: 0,
                                                                            type: "blank",
                                                                            ru: 1,
                                                                        });
                                                                    
                                                                    // Remove blanks from target rack and insert equipment
                                                                    d.layout.splice(blanksToRemove.start, blanksToRemove.count);
                                                                    d.layout.splice(blanksToRemove.start, 0, f);
                                                                    
                                                                    st(o);
                                                                    st(d);
                                                                    if ("manual" === L)
                                                                        p([...n]);
                                                                    else {
                                                                        const e = Oe(n, c, me);
                                                                        p(Ge(e, me));
                                                                    }
                                                                    b({ rackIdx: r, layoutId: f.id }),
                                                                        T(r),
                                                                        u(!1),
                                                                        (De.current = !0);
                                                                },
                                                                defaultValue: "-1",
                                                                className:
                                                                    "text-xs sm:text-sm bg-transparent border border-gray-300 dark:border-gray-600 rounded-lg px-1 py-1 pr-6 cursor-pointer hover:bg-gray-50 dark:bg-gray-900/50 focus:outline-none focus:ring-1 focus:ring-blue-300",
                                                                title: "Transfer to another rack",
                                                                children: [
                                                                    _jsx(
                                                                        "option",
                                                                        { value: "-1", children: "Transfer ‚Üí" },
                                                                        "default"
                                                                    ),
                                                                    ...a.map(({ idx: e, availableBlanks: t, rack: s }) =>
                                                                        _jsx(
                                                                            "option",
                                                                            {
                                                                                value: String(e),
                                                                                children: `${We(s, e)} (${t}U free)`,
                                                                            },
                                                                            `rack-${e}`
                                                                        )
                                                                    ),
                                                                ],
                                                            }),
                                                        ],
                                                    }),
                                                ],
                                            });
                                        })(),
                                    _jsx("div", { className: "w-px h-5 sm:h-6 bg-gray-200 dark:bg-gray-700 mx-0.5 sm:mx-1" }),
                                    _jsx("button", {
                                        onClick: () => {
                                            if (g)
                                                if ("blank" === ot?.type) {
                                                    const e = h.map((e) => ({
                                                            ...e,
                                                            layout: e.layout.map((e) =>
                                                                "equipment" === e.type && e.item
                                                                    ? { ...e, item: { ...e.item } }
                                                                    : { ...e }
                                                            ),
                                                        })),
                                                        t = e[g.rackIdx],
                                                        s = t.layout.findIndex((e) => e.id === g.layoutId);
                                                    s >= 0 &&
                                                        (t.layout.splice(s, 1),
                                                        st(t),
                                                        p("manual" === L ? [...e] : Ge(Oe(e, c, me), me)),
                                                        b(null),
                                                        u(!1),
                                                        (De.current = !0));
                                                } else ot?.item?.id && (Qe(ot.item.id), b(null));
                                        },
                                        className:
                                            "p-1.5 sm:p-2.5 hover:bg-red-50 dark:bg-red-900/20 rounded-lg sm:rounded-xl transition-colors group",
                                        title: "Remove Item",
                                        children: _jsx("svg", {
                                            className: "w-4 h-4 sm:w-5 sm:h-5 text-gray-600 dark:text-gray-300 group-hover:text-red-500",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",
                                            }),
                                        }),
                                    }),
                                    _jsx("button", {
                                        onClick: () => b(null),
                                        className:
                                            "p-1.5 sm:p-2.5 hover:bg-gray-100 dark:bg-gray-700 rounded-lg sm:rounded-xl transition-colors group",
                                        title: "Deselect",
                                        children: _jsx("svg", {
                                            className: "w-4 h-4 sm:w-5 sm:h-5 text-gray-400 group-hover:text-gray-600 dark:text-gray-300",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M6 18L18 6M6 6l12 12",
                                            }),
                                        }),
                                    }),
                                ],
                            }),
                        }),
                    }),
                    document.body
                ),
            g && ot && _jsx("div", { className: "h-24 sm:h-28" }),
            X &&
                _jsx("div", {
                    className: "fixed inset-0 z-50 flex items-center justify-center p-4",
                    style: { backgroundColor: "rgba(0, 0, 0, 0.5)" },
                    onClick: (e) => {
                        e.target === e.currentTarget && J(!1);
                    },
                    children: _jsxs("div", {
                        className:
                            "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all",
                        style: { animation: "modalFadeIn 0.2s ease-out" },
                        children: [
                            _jsxs("div", {
                                className: "relative",
                                children: [
                                    _jsx("div", {
                                        className:
                                            "h-24 bg-gradient-to-br from-indigo-500 via-indigo-600 to-indigo-700",
                                        style: { borderRadius: "0 0 50% 50% / 0 0 30px 30px" },
                                    }),
                                    _jsx("button", {
                                        onClick: () => J(!1),
                                        className:
                                            "absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full bg-white dark:bg-gray-800/20 hover:bg-white dark:bg-gray-800/30 transition-colors",
                                        children: _jsx("svg", {
                                            className: "w-5 h-5 text-white",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M6 18L18 6M6 6l12 12",
                                            }),
                                        }),
                                    }),
                                    _jsx("div", {
                                        className:
                                            "absolute left-1/2 bottom-0 transform -translate-x-1/2 translate-y-1/2",
                                        children: _jsx("div", {
                                            className:
                                                "w-16 h-16 bg-white dark:bg-gray-800 rounded-full shadow-lg dark:shadow-gray-950/30 flex items-center justify-center",
                                            children: _jsx("span", { className: "text-3xl", children: "üóÑÔ∏è" }),
                                        }),
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "px-6 pt-12 pb-6 text-center",
                                children: [
                                    _jsx("h3", {
                                        className: "text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",
                                        children: "Add New Rack",
                                    }),
                                    _jsx("p", {
                                        className: "text-gray-600 dark:text-gray-300 text-sm leading-relaxed mb-4",
                                        children: "Select the size for your new rack",
                                    }),
                                    _jsx("select", {
                                        value: Q,
                                        onChange: (e) => K(parseInt(e.target.value)),
                                        className:
                                            "w-full px-4 py-3 border-2 border-gray-200 dark:border-gray-700 rounded-xl text-sm focus:border-indigo-500 focus:outline-none mb-6",
                                        children: ce.map((e) =>
                                            _jsx("option", { key: e, value: e, children: `${e}U Rack` })
                                        ),
                                    }),
                                    _jsxs("div", {
                                        className: "flex flex-col gap-3",
                                        children: [
                                            _jsx("button", {
                                                onClick: () => {
                                                    Ve(Q), J(!1);
                                                },
                                                className:
                                                    "w-full py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors shadow-md dark:shadow-gray-950/20 hover:shadow-lg dark:shadow-gray-950/30",
                                                children: "Add Rack",
                                            }),
                                            _jsx("button", {
                                                onClick: () => J(!1),
                                                className:
                                                    "w-full py-2.5 px-4 text-gray-600 dark:text-gray-300 hover:text-gray-800 font-medium transition-colors",
                                                children: "Cancel",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsx("div", {
                                className: "px-6 pb-4 text-center",
                                children: _jsx("p", { className: "text-xs text-gray-400", children: "AV Tools Pro" }),
                            }),
                        ],
                    }),
                }),
            Y &&
                ee &&
                _jsx("div", {
                    className: "fixed inset-0 z-50 flex items-center justify-center p-4",
                    style: { backgroundColor: "rgba(0, 0, 0, 0.5)" },
                    onClick: (e) => {
                        e.target === e.currentTarget && (Z(!1), te(null));
                    },
                    children: _jsxs("div", {
                        className:
                            "bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all",
                        style: { animation: "modalFadeIn 0.2s ease-out" },
                        children: [
                            _jsxs("div", {
                                className: "relative",
                                children: [
                                    _jsx("div", {
                                        className: "h-24 bg-gradient-to-br from-red-500 via-red-600 to-red-700",
                                        style: { borderRadius: "0 0 50% 50% / 0 0 30px 30px" },
                                    }),
                                    _jsx("button", {
                                        onClick: () => {
                                            Z(!1), te(null);
                                        },
                                        className:
                                            "absolute top-3 right-3 w-8 h-8 flex items-center justify-center rounded-full bg-white dark:bg-gray-800/20 hover:bg-white dark:bg-gray-800/30 transition-colors",
                                        children: _jsx("svg", {
                                            className: "w-5 h-5 text-white",
                                            fill: "none",
                                            viewBox: "0 0 24 24",
                                            stroke: "currentColor",
                                            strokeWidth: 2,
                                            children: _jsx("path", {
                                                strokeLinecap: "round",
                                                strokeLinejoin: "round",
                                                d: "M6 18L18 6M6 6l12 12",
                                            }),
                                        }),
                                    }),
                                    _jsx("div", {
                                        className:
                                            "absolute left-1/2 bottom-0 transform -translate-x-1/2 translate-y-1/2",
                                        children: _jsx("div", {
                                            className:
                                                "w-16 h-16 bg-white dark:bg-gray-800 rounded-full shadow-lg dark:shadow-gray-950/30 flex items-center justify-center",
                                            children: _jsx("svg", {
                                                className: "w-9 h-9 text-red-600",
                                                fill: "none",
                                                viewBox: "0 0 24 24",
                                                stroke: "currentColor",
                                                strokeWidth: 2,
                                                children: _jsx("path", {
                                                    strokeLinecap: "round",
                                                    strokeLinejoin: "round",
                                                    d: "M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16",
                                                }),
                                            }),
                                        }),
                                    }),
                                ],
                            }),
                            _jsxs("div", {
                                className: "px-6 pt-12 pb-6 text-center",
                                children: [
                                    _jsx("h3", {
                                        className: "text-xl font-bold text-gray-900 dark:text-gray-100 mb-3",
                                        children: `Delete Rack ${ee.index + 1}?`,
                                    }),
                                    _jsx("p", {
                                        className: "text-gray-600 dark:text-gray-300 text-sm leading-relaxed mb-6",
                                        children: ee.hasEquipment
                                            ? "This rack contains equipment. All equipment in this rack will be permanently removed. This action cannot be undone."
                                            : "Are you sure you want to delete this empty rack? This action cannot be undone.",
                                    }),
                                    _jsxs("div", {
                                        className: "flex flex-col gap-3",
                                        children: [
                                            _jsx("button", {
                                                onClick: () => {
                                                    ((e) => {
                                                        if ("manual" !== L) return;
                                                        if (h.length <= 1) return void I("Cannot remove the last rack");
                                                        const s = h[e];
                                                        if (s) {
                                                            const e = new Set();
                                                            s.layout.forEach((t) => {
                                                                "equipment" === t.type &&
                                                                    t.item &&
                                                                    t.item.id &&
                                                                    e.add(t.item.id);
                                                            }),
                                                                e.size > 0 && t((t) => t.filter((t) => !e.has(t.id)));
                                                        }
                                                        p((t) => t.filter((t, s) => s !== e)),
                                                            B >= e && B > 0 && T(B - 1);
                                                    })(ee.index),
                                                        Z(!1),
                                                        te(null);
                                                },
                                                className:
                                                    "w-full py-3 px-4 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-xl transition-colors shadow-md dark:shadow-gray-950/20 hover:shadow-lg dark:shadow-gray-950/30",
                                                children: "Yes, Delete Rack",
                                            }),
                                            _jsx("button", {
                                                onClick: () => {
                                                    Z(!1), te(null);
                                                },
                                                className:
                                                    "w-full py-2.5 px-4 text-gray-600 dark:text-gray-300 hover:text-gray-800 font-medium transition-colors",
                                                children: "Cancel",
                                            }),
                                        ],
                                    }),
                                ],
                            }),
                            _jsx("div", {
                                className: "px-6 pb-4 text-center",
                                children: _jsx("p", { className: "text-xs text-gray-400", children: "AV Tools Pro" }),
                            }),
                        ],
                    }),
                }),
        ],
    });
}
